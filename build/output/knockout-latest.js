// Knockout JavaScript library v1.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,undefined){
var ko=window.ko={};ko.exportSymbol=function(a,d){for(var c=a.split("."),b=window,e=0;e<c.length-1;e++)b=b[c[e]];b[c[c.length-1]]=d};ko.exportProperty=function(a,d,c){a[d]=c};
ko.utils=new function(){function a(a,b){if("INPUT"!=a.tagName||!a.type)return!1;if("click"!=b.toLowerCase())return!1;var c=a.type.toLowerCase();return"checkbox"==c||"radio"==c}var d=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c=/MSIE 6/i.test(navigator.userAgent),b=/MSIE 7/i.test(navigator.userAgent),e={},g={},h=/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";e[h]=["keyup","keydown","keypress"];e.MouseEvents="click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave".split(",");
for(var f in e)if(h=e[f],h.length)for(var j=0,i=h.length;j<i;j++)g[h[j]]=f;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,e=a.length;c<e;c++)b(a[c])},arrayIndexOf:function(a,b){if("function"==typeof a.indexOf)return a.indexOf(b);for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var e=0,d=a.length;e<d;e++)if(b.call(c,a[e]))return a[e];return null},arrayRemoveItem:function(a,
b){var c=ko.utils.arrayIndexOf(a,b);0<=c&&a.splice(c,1)},arrayGetDistinctValues:function(a){for(var a=a||[],b=[],c=0,e=a.length;c<e;c++)0>ko.utils.arrayIndexOf(b,a[c])&&b.push(a[c]);return b},arrayMap:function(a,b){for(var a=a||[],c=[],e=0,d=a.length;e<d;e++)c.push(b(a[e]));return c},arrayFilter:function(a,b){for(var a=a||[],c=[],e=0,d=a.length;e<d;e++)b(a[e])&&c.push(a[e]);return c},arrayPushAll:function(a,b){for(var c=0,e=b.length;c<e;c++)a.push(b[c])},emptyDomNode:function(a){for(;a.firstChild;)ko.removeNode(a.firstChild)},
setDomNodeChildren:function(a,b){ko.utils.emptyDomNode(a);b&&ko.utils.arrayForEach(b,function(b){a.appendChild(b)})},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var e=c[0],d=e.parentNode,f=0,g=b.length;f<g;f++)d.insertBefore(b[f],e);f=0;for(g=c.length;f<g;f++)ko.removeNode(c[f])}},setOptionNodeSelectionState:function(a,b){0<=navigator.userAgent.indexOf("MSIE 6")?a.setAttribute("selected",b):a.selected=b},getElementsHavingAttribute:function(a,b){if(!a||1!=a.nodeType)return[];
var c=[];null!==a.getAttribute(b)&&c.push(a);for(var e=a.getElementsByTagName("*"),d=0,f=e.length;d<f;d++)null!==e[d].getAttribute(b)&&c.push(e[d]);return c},stringTrim:function(a){return(a||"").replace(d,"")},stringTokenize:function(a,b){for(var c=[],e=(a||"").split(b),d=0,f=e.length;d<f;d++){var g=ko.utils.stringTrim(e[d]);""!==g&&c.push(g)}return c},stringStartsWith:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},evalWithinScope:function(a,b,c){if(void 0===b)return(new Function("return "+
a))();b.skonode=c;return(new Function("__SKO__sc","with(__SKO__sc){ var innerNode=skonode; return ("+a+") }"))(b)},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;null!=a;){if(a==b)return!0;a=a.parentNode}return!1},domNodeIsAttachedToDocument:function(a){return ko.utils.domNodeIsContainedBy(a,document)},registerEventHandler:function(b,c,e){if("undefined"!=typeof jQuery){if(a(b,c))var d=e,e=function(a,b){var c=this.checked;if(b)this.checked=
!0!==b.checkedStateBeforeEvent;d.call(this,a);this.checked=c};jQuery(b).bind(c,e)}else if("function"==typeof b.addEventListener)b.addEventListener(c,e,!1);else if("undefined"!=typeof b.attachEvent)b.attachEvent("on"+c,function(a){e.call(b,a)});else throw Error("Browser doesn't support addEventListener or attachEvent");},triggerEvent:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof jQuery){var e=[];a(b,c)&&e.push({checkedStateBeforeEvent:b.checked});
jQuery(b).trigger(c,e)}else if("function"==typeof document.createEvent)if("function"==typeof b.dispatchEvent)e=document.createEvent(g[c]||"HTMLEvents"),e.initEvent(c,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(e);else throw Error("The supplied element doesn't support dispatchEvent");else if("undefined"!=typeof b.fireEvent){if("click"==c&&"INPUT"==b.tagName&&("checkbox"==b.type.toLowerCase()||"radio"==b.type.toLowerCase()))b.checked=!0!==b.checked;b.fireEvent("on"+c)}else throw Error("Browser doesn't support triggering events");
},unwrapObservable:function(a){return ko.isObservable(a)?a():a},domNodeHasCssClass:function(a,b){var c=(a.className||"").split(/\s+/);return 0<=ko.utils.arrayIndexOf(c,b)},toggleDomNodeCssClass:function(a,b,c){var e=ko.utils.domNodeHasCssClass(a,b);if(c&&!e)a.className=(a.className||"")+" "+b;else if(e&&!c){for(var c=(a.className||"").split(/\s+/),e="",d=0;d<c.length;d++)c[d]!=b&&(e+=c[d]+" ");a.className=ko.utils.stringTrim(e)}},range:function(a,b){for(var a=ko.utils.unwrapObservable(a),b=ko.utils.unwrapObservable(b),
c=[],e=a;e<=b;e++)c.push(e);return c},makeArray:function(a){for(var b=[],c=0,e=a.length;c<e;c++)b.push(a[c]);return b},isIe6:c,isIe7:b,getFormFields:function(a,b){for(var c=ko.utils.makeArray(a.getElementsByTagName("INPUT")).concat(ko.utils.makeArray(a.getElementsByTagName("TEXTAREA"))),e="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},d=[],f=c.length-1;0<=f;f--)e(c[f])&&d.push(c[f]);return d},parseJson:function(a){return"string"==typeof a&&(a=ko.utils.stringTrim(a))?
window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))():null},stringifyJson:function(a){if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(ko.utils.unwrapObservable(a))},postJson:function(a,b,c){var c=c||{},e=c.params||{},d=
c.includeFields||this.fieldsIncludedWithJsonPost,f=a;if("object"==typeof a&&"FORM"==a.tagName)for(var f=a.action,g=d.length-1;0<=g;g--)for(var j=ko.utils.getFormFields(a,d[g]),h=j.length-1;0<=h;h--)e[j[h].name]=j[h].value;var b=ko.utils.unwrapObservable(b),i=document.createElement("FORM");i.style.display="none";i.action=f;i.method="post";for(var q in b)a=document.createElement("INPUT"),a.name=q,a.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(b[q])),i.appendChild(a);for(q in e)a=document.createElement("INPUT"),
a.name=q,a.value=e[q],i.appendChild(a);document.body.appendChild(i);c.submitter?c.submitter(i):i.submit();setTimeout(function(){i.parentNode.removeChild(i)},0)}}};ko.exportSymbol("ko.utils",ko.utils);ko.exportSymbol("ko.utils.arrayForEach",ko.utils.arrayForEach);ko.exportSymbol("ko.utils.arrayFirst",ko.utils.arrayFirst);ko.exportSymbol("ko.utils.arrayFilter",ko.utils.arrayFilter);ko.exportSymbol("ko.utils.arrayGetDistinctValues",ko.utils.arrayGetDistinctValues);
ko.exportSymbol("ko.utils.arrayIndexOf",ko.utils.arrayIndexOf);ko.exportSymbol("ko.utils.arrayMap",ko.utils.arrayMap);ko.exportSymbol("ko.utils.arrayPushAll",ko.utils.arrayPushAll);ko.exportSymbol("ko.utils.arrayRemoveItem",ko.utils.arrayRemoveItem);ko.exportSymbol("ko.utils.fieldsIncludedWithJsonPost",ko.utils.fieldsIncludedWithJsonPost);ko.exportSymbol("ko.utils.getElementsHavingAttribute",ko.utils.getElementsHavingAttribute);ko.exportSymbol("ko.utils.getFormFields",ko.utils.getFormFields);
ko.exportSymbol("ko.utils.postJson",ko.utils.postJson);ko.exportSymbol("ko.utils.parseJson",ko.utils.parseJson);ko.exportSymbol("ko.utils.registerEventHandler",ko.utils.registerEventHandler);ko.exportSymbol("ko.utils.stringifyJson",ko.utils.stringifyJson);ko.exportSymbol("ko.utils.range",ko.utils.range);ko.exportSymbol("ko.utils.toggleDomNodeCssClass",ko.utils.toggleDomNodeCssClass);ko.exportSymbol("ko.utils.triggerEvent",ko.utils.triggerEvent);ko.exportSymbol("ko.utils.unwrapObservable",ko.utils.unwrapObservable);
Function.prototype.bind||(Function.prototype.bind=function(a){var d=this,c=Array.prototype.slice.call(arguments),a=c.shift();return function(){return d.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});
ko.utils.domData=new function(){var a=0,d="__ko__"+(new Date).getTime(),c={};return{get:function(a,c){var d=ko.utils.domData.getAll(a,!1);return void 0===d?void 0:d[c]},set:function(a,c,d){void 0===d&&void 0===ko.utils.domData.getAll(a,!1)||(ko.utils.domData.getAll(a,!0)[c]=d)},getAll:function(b,e){var g=b[d];if(!g){if(!e)return;g=b[d]="ko"+a++;c[g]={}}return c[g]},clear:function(a){var e=a[d];e&&(delete c[e],a[d]=null)}}};
ko.utils.domNodeDisposal=new function(){function a(a,e){var d=ko.utils.domData.get(a,c);void 0===d&&e&&(d=[],ko.utils.domData.set(a,c,d));return d}function d(b){sko.cleanNode(b);var c=a(b,!1);if(c)for(var c=c.slice(0),d=0;d<c.length;d++)c[d](b);ko.utils.domData.clear(b);"function"==typeof jQuery&&"function"==typeof jQuery.cleanData&&jQuery.cleanData([b])}var c="__ko_domNodeDisposal__"+(new Date).getTime();return{addDisposeCallback:function(b,c){if("function"!=typeof c)throw Error("Callback must be a function");
a(b,!0).push(c)},removeDisposeCallback:function(b,e){var d=a(b,!1);d&&(ko.utils.arrayRemoveItem(d,e),0==d.length&&ko.utils.domData.set(b,c,void 0))},cleanNode:function(a){if(!(1!=a.nodeType&&9!=a.nodeType)){d(a);var c=[];ko.utils.arrayPushAll(c,a.getElementsByTagName("*"));for(var a=0,g=c.length;a<g;a++)d(c[a])}},removeNode:function(a){ko.cleanNode(a);a.parentNode&&a.parentNode.removeChild(a)}}};ko.cleanNode=ko.utils.domNodeDisposal.cleanNode;ko.removeNode=ko.utils.domNodeDisposal.removeNode;
ko.exportSymbol("ko.cleanNode",ko.cleanNode);ko.exportSymbol("ko.removeNode",ko.removeNode);ko.exportSymbol("ko.utils.domNodeDisposal",ko.utils.domNodeDisposal);ko.exportSymbol("ko.utils.domNodeDisposal.addDisposeCallback",ko.utils.domNodeDisposal.addDisposeCallback);ko.exportSymbol("ko.utils.domNodeDisposal.removeDisposeCallback",ko.utils.domNodeDisposal.removeDisposeCallback);
(function(){ko.utils.parseHtmlFragment=function(a){if("undefined"!=typeof jQuery)a=jQuery.clean([a]);else{var d=ko.utils.stringTrim(a).toLowerCase(),c=document.createElement("div"),d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];for(c.innerHTML=d[1]+a+d[2];d[0]--;)c=c.lastChild;a=ko.utils.makeArray(c.childNodes)}return a};ko.utils.setHtml=
function(a,d){ko.utils.emptyDomNode(a);if(null!==d&&void 0!==d)if("string"!=typeof d&&(d=d.toString()),"undefined"!=typeof jQuery)try{jQuery(a).html(d)}catch(c){jQuery(a).html(d.replace("<","&lt;").replace(">","&gt;"))}else for(var b=ko.utils.parseHtmlFragment(d),e=0;e<b.length;e++)a.appendChild(b[e])}})();
ko.memoization=function(){function a(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function d(a,c){if(a)if(8==a.nodeType){var g=ko.memoization.parseMemoText(a.nodeValue);null!=g&&c.push({domNode:a,memoId:g})}else if(1==a.nodeType)for(var g=0,h=a.childNodes,f=h.length;g<f;g++)d(h[g],c)}var c={};return{memoize:function(b){if("function"!=typeof b)throw Error("You can only pass a function to ko.memoization.memoize()");var d=a()+a();c[d]=b;return"<\!--[ko_memo:"+d+"]--\>"},unmemoize:function(a,
d){var g=c[a];if(void 0===g)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return g.apply(null,d||[]),!0}finally{delete c[a]}},unmemoizeDomNodeAndDescendants:function(a,c){var g=[];d(a,g);for(var h=0,f=g.length;h<f;h++){var j=g[h].domNode,i=[j];c&&ko.utils.arrayPushAll(i,c);var k=c[0];sko.traceResources(a,k,function(){sko.traceRelations(a,k,function(){ko.memoization.unmemoize(g[h].memoId,i);j.nodeValue="";j.parentNode&&j.parentNode.removeChild(j)})})}},
parseMemoText:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();ko.exportSymbol("ko.memoization",ko.memoization);ko.exportSymbol("ko.memoization.memoize",ko.memoization.memoize);ko.exportSymbol("ko.memoization.unmemoize",ko.memoization.unmemoize);ko.exportSymbol("ko.memoization.parseMemoText",ko.memoization.parseMemoText);ko.exportSymbol("ko.memoization.unmemoizeDomNodeAndDescendants",ko.memoization.unmemoizeDomNodeAndDescendants);
ko.subscription=function(a,d){this.callback=a;this.dispose=function(){this.isDisposed=!0;d()}.bind(this);ko.exportProperty(this,"dispose",this.dispose)};
ko.subscribable=function(){var a=[];this.subscribe=function(d,c){var b=c?d.bind(c):d,e=new ko.subscription(b,function(){ko.utils.arrayRemoveItem(a,e)});a.push(e);return e};this.notifySubscribers=function(d){ko.utils.arrayForEach(a.slice(0),function(a){a&&!0!==a.isDisposed&&a.callback(d)})};this.getSubscriptionsCount=function(){return a.length};ko.exportProperty(this,"subscribe",this.subscribe);ko.exportProperty(this,"notifySubscribers",this.notifySubscribers);ko.exportProperty(this,"getSubscriptionsCount",
this.getSubscriptionsCount)};ko.isSubscribable=function(a){return"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};ko.exportSymbol("ko.subscribable",ko.subscribable);ko.exportSymbol("ko.isSubscribable",ko.isSubscribable);ko.dependencyDetection=function(){var a=[];return{begin:function(){a.push([])},end:function(){return a.pop()},registerDependency:function(d){if(!ko.isSubscribable(d))throw"Only subscribable things can act as dependencies";0<a.length&&a[a.length-1].push(d)}}}();
var primitiveTypes={undefined:!0,"boolean":!0,number:!0,string:!0};function valuesArePrimitiveAndEqual(a,d){return null===a||typeof a in primitiveTypes?a===d:!1}
ko.observable=function(a){function d(){if(0<arguments.length){if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))c=arguments[0],d.notifySubscribers(c);return this}ko.dependencyDetection.registerDependency(d);return c}var c=a;d.__ko_proto__=ko.observable;d.valueHasMutated=function(){d.notifySubscribers(c)};d.equalityComparer=valuesArePrimitiveAndEqual;ko.subscribable.call(d);ko.exportProperty(d,"valueHasMutated",d.valueHasMutated);return d};
ko.isObservable=function(a){return null===a||void 0===a||void 0===a.__ko_proto__?!1:a.__ko_proto__===ko.observable?!0:ko.isObservable(a.__ko_proto__)};ko.isWriteableObservable=function(a){return"function"==typeof a&&a.__ko_proto__===ko.observable?!0:"function"==typeof a&&a.__ko_proto__===ko.dependentObservable&&a.hasWriteFunction?!0:!1};ko.exportSymbol("ko.observable",ko.observable);ko.exportSymbol("ko.isObservable",ko.isObservable);ko.exportSymbol("ko.isWriteableObservable",ko.isWriteableObservable);
ko.observableArray=function(a){0==arguments.length&&(a=[]);if(null!==a&&void 0!==a&&!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var d=new ko.observable(a);ko.utils.arrayForEach("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){d[a]=function(){var b=d(),b=b[a].apply(b,arguments);d.valueHasMutated();return b}});ko.utils.arrayForEach(["slice"],function(a){d[a]=function(){var b=d();return b[a].apply(b,
arguments)}});d.remove=function(a){for(var b=d(),e=[],g=[],h="function"==typeof a?a:function(b){return b===a},f=0,j=b.length;f<j;f++){var i=b[f];h(i)?g.push(i):e.push(i)}d(e);return g};d.removeAll=function(a){if(void 0===a){var b=d();d([]);return b}return!a?[]:d.remove(function(b){return 0<=ko.utils.arrayIndexOf(a,b)})};d.destroy=function(a){for(var b=d(),e="function"==typeof a?a:function(b){return b===a},g=b.length-1;0<=g;g--)e(b[g])&&(b[g]._destroy=!0);d.valueHasMutated()};d.destroyAll=function(a){return void 0===
a?d.destroy(function(){return!0}):!a?[]:d.destroy(function(b){return 0<=ko.utils.arrayIndexOf(a,b)})};d.indexOf=function(a){var b=d();return ko.utils.arrayIndexOf(b,a)};d.replace=function(a,b){var e=d.indexOf(a);0<=e&&(d()[e]=b,d.valueHasMutated())};ko.exportProperty(d,"remove",d.remove);ko.exportProperty(d,"removeAll",d.removeAll);ko.exportProperty(d,"destroy",d.destroy);ko.exportProperty(d,"destroyAll",d.destroyAll);ko.exportProperty(d,"indexOf",d.indexOf);return d};
ko.exportSymbol("ko.observableArray",ko.observableArray);
ko.dependentObservable=function(a,d,c){function b(){ko.utils.arrayForEach(l,function(a){a.dispose()});l=[]}function e(a){b();ko.utils.arrayForEach(a,function(a){l.push(a.subscribe(g))})}function g(){if(j&&"function"==typeof c.disposeWhen&&c.disposeWhen())h.dispose();else{try{ko.dependencyDetection.begin(),f=c.owner?c.read.call(c.owner):c.read()}finally{var a=ko.utils.arrayGetDistinctValues(ko.dependencyDetection.end());e(a)}h.notifySubscribers(f);j=!0}}function h(){if(0<arguments.length)if("function"===
typeof c.write){var a=arguments[0];c.owner?c.write.call(c.owner,a):c.write(a)}else throw"Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.";else return j||g(),ko.dependencyDetection.registerDependency(h),f}var f,j=!1;a&&"object"==typeof a?c=a:(c=c||{},c.read=a||c.read,c.owner=d||c.owner);if("function"!=typeof c.read)throw"Pass a function that returns the value of the dependentObservable";var i="object"==
typeof c.disposeWhenNodeIsRemoved?c.disposeWhenNodeIsRemoved:null,k=null;if(i){k=function(){h.dispose()};ko.utils.domNodeDisposal.addDisposeCallback(i,k);var m=c.disposeWhen;c.disposeWhen=function(){return!ko.utils.domNodeIsAttachedToDocument(i)||"function"==typeof m&&m()}}var l=[];h.__ko_proto__=ko.dependentObservable;h.getDependenciesCount=function(){return l.length};h.hasWriteFunction="function"===typeof c.write;h.dispose=function(){i&&ko.utils.domNodeDisposal.removeDisposeCallback(i,k);b()};ko.subscribable.call(h);
!0!==c.deferEvaluation&&g();ko.exportProperty(h,"dispose",h.dispose);ko.exportProperty(h,"getDependenciesCount",h.getDependenciesCount);return h};ko.dependentObservable.__ko_proto__=ko.observable;ko.exportSymbol("ko.dependentObservable",ko.dependentObservable);
(function(){function a(b,e,g){g=g||new c;b=e(b);if(!("object"==typeof b&&null!==b&&void 0!==b))return b;var h=b instanceof Array?[]:{};g.save(b,h);d(b,function(c){var d=e(b[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":h[c]=d;break;case "object":case "undefined":var i=g.get(d);h[c]=void 0!==i?i:a(d,e,g)}});return h}function d(a,c){if(a instanceof Array)for(var d=0;d<a.length;d++)c(d);else for(d in a)c(d)}function c(){var a=[],c=[];this.save=function(d,h){var f=ko.utils.arrayIndexOf(a,
d);0<=f?c[f]=h:(a.push(d),c.push(h))};this.get=function(d){d=ko.utils.arrayIndexOf(a,d);return 0<=d?c[d]:void 0}}ko.toJS=function(b){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return a(b,function(a){for(var b=0;ko.isObservable(a)&&10>b;b++)a=a();return a})};ko.toJSON=function(a){a=ko.toJS(a);return ko.utils.stringifyJson(a)}})();ko.exportSymbol("ko.toJS",ko.toJS);ko.exportSymbol("ko.toJSON",ko.toJSON);
(function(){ko.selectExtensions={readValue:function(a){return"OPTION"==a.tagName?!0===a.__ko__hasDomDataOptionValue__?ko.utils.domData.get(a,ko.bindingHandlers.options.optionValueDomDataKey):a.getAttribute("value"):"SELECT"==a.tagName?0<=a.selectedIndex?ko.selectExtensions.readValue(a.options[a.selectedIndex]):void 0:a.value},writeValue:function(a,d){if("OPTION"==a.tagName)switch(typeof d){case "string":case "number":ko.utils.domData.set(a,ko.bindingHandlers.options.optionValueDomDataKey,void 0);
"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=d;break;default:ko.utils.domData.set(a,ko.bindingHandlers.options.optionValueDomDataKey,d),a.__ko__hasDomDataOptionValue__=!0,a.value=""}else if("SELECT"==a.tagName)for(var c=a.options.length-1;0<=c;c--){if(ko.selectExtensions.readValue(a.options[c])==d){a.selectedIndex=c;break}}else{if(null===d||void 0===d)d="";a.value=d}}}})();ko.exportSymbol("ko.selectExtensions",ko.selectExtensions);
ko.exportSymbol("ko.selectExtensions.readValue",ko.selectExtensions.readValue);ko.exportSymbol("ko.selectExtensions.writeValue",ko.selectExtensions.writeValue);
ko.jsonExpressionRewriting=function(){function a(a,b){return a.replace(c,function(a,c){return b[c]})}function d(a){return 0<=ko.utils.arrayIndexOf(e,ko.utils.stringTrim(a).toLowerCase())?!1:"<"==a[0]&&">"==a[a.length-1]?!0:null!==a.match(b)}var c=/\[ko_token_(\d+)\]/g,b=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,e=["true","false"];return{parseJson:function(b){b=ko.utils.stringTrim(b);if(3>b.length)return{};for(var c=[],d=null,e,i,k="{"==b.charAt(0)?1:0;k<b.length;k++){var m=
b.charAt(k);if(null===d)switch(m){case '"':case "'":case "/":d=k;e=m;break;case "<":d=k;e=">";break;case "{":d=k;i=1;e="}";break;case "[":d=k,e="]"}else if("}"==e&&"{"==m)i++;else if("}"==e&&"}"==m&&1<i)i--;else if(m==e){m=b.substring(d,k+1);c.push(m);var l="[ko_token_"+(c.length-1)+"]",b=b.substring(0,d)+l+b.substring(k+1),k=k-(m.length-l.length),d=null}}d={};b=b.split(",");e=0;for(i=b.length;e<i;e++)m=b[e],l=m.indexOf(":"),0<l&&l<m.length-1&&(k=ko.utils.stringTrim(m.substring(0,l)),m=ko.utils.stringTrim(m.substring(l+
1)),"{"==k.charAt(0)&&(k=k.substring(1)),"}"==m.charAt(m.length-1)&&(m=m.substring(0,m.length-1)),k=ko.utils.stringTrim(a(k,c)),m=ko.utils.stringTrim(a(m,c)),d[k]=m);return d},insertPropertyAccessorsIntoJson:function(a){var b=ko.jsonExpressionRewriting.parseJson(a),c=[],e;for(e in b){var i=b[e];d(i)&&(0<c.length&&c.push(", "),c.push(e+" : function(__ko_value) { "+i+" = __ko_value; }"))}0<c.length&&(b=c.join(""),a=a+", '_ko_property_writers' : { "+b+" } ");return a},parseURIsInJSONString:function(a){for(var b=
/["']?(<|\[)[a-z:\/.#?&%]+(\]|>)['"]?/g,c="",d=b.exec(a);null!=d;){if(("'"===d[0][0]||'"'===d[0][0])&&("'"===d[0][d[0].length-1]||'"'===d[0][d[0].length-1]))a=a.split(d[0]),c=c+a[0]+d[0],a=a[1];else var e=d[0],d=d.index,c=a.substring(0,d)+"sko.current().tryProperty('"+e+"')",a=a.substring(d+e.length);d=b.exec(a)}return c+a},insertPropertyReaderWritersIntoJson:function(a){var a=ko.jsonExpressionRewriting.parseJson(a),b=[],c="",e=!0,i;for(i in a){var k=a[i],k=this.parseURIsInJSONString(k);d(k)&&(0<
b.length&&b.push(", "),"<"===k[0]&&">"===k[k.length-1]&&"about"!==i&&"rel"!==i?b.push(i+" : function(__ko_value) { sko.current = function() { return sko.currentResource(innerNode); }; sko.current().tryProperty('"+k+"') = __ko_value; }"):null!=k.match(/^\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]$/)&&"about"!==i&&"rel"!==i?b.push(i+" : function(__ko_value) { sko.current = function() { return sko.currentResource(innerNode); }; sko.current().tryProperty('"+k+"') = __ko_value; }"):"<"===k[0]&&">"===k[k.length-
1]&&("about"===i||"rel"===i)||"["===k[0]&&"]"===k[k.length-1]&&("about"===i||"rel"===i)||(/tryProperty\([^)]+\)$/.test(k)||/prop\([^)]+\)$/.test(k)?b.push(i+" : function(__ko_value) { sko.current = function() { return sko.currentResource(innerNode); }; "+k+"(__ko_value); }"):b.push(i+" : function(__ko_value) { sko.current = function() { return sko.currentResource(innerNode); }; "+k+" = __ko_value; }")));e?e=!1:c+=", ";c="<"===k[0]&&">"===k[k.length-1]&&"about"!==i&&"rel"!==i?c+i+": (function(){ sko.current = function() { return sko.currentResource(innerNode); }; return sko.current().tryProperty('"+
k+"') })()":null!=k.match(/^\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]$/)&&"about"!==i&&"rel"!==i?c+i+": (function(){ sko.current = function() { return sko.currentResource(innerNode); }; return sko.current().tryProperty('"+k+"') })()":"<"===k[0]&&">"===k[k.length-1]&&("about"===i||"rel"===i)?c+i+": '"+k.slice(1,k.length-1)+"'":null!=k.match(/^\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]$/)&&("about"===i||"rel"===i)?c+i+": sko.rdf.prefixes.resolve('"+k.slice(1,k.length-1)+"')":c+i+": (function(){ sko.current = function() { return sko.currentResource(innerNode); }; return "+
k+" })()"}a=c;0<b.length&&(b=b.join(""),a=a+", '_ko_property_writers' : { "+b+" } ");return a}}}();ko.exportSymbol("ko.jsonExpressionRewriting",ko.jsonExpressionRewriting);ko.exportSymbol("ko.jsonExpressionRewriting.parseJson",ko.jsonExpressionRewriting.parseJson);ko.exportSymbol("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson);ko.exportSymbol("ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson",ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson);
(function(){ko.bindingHandlers={};ko.applyBindingsToNode=function(a,d,c,b){function e(a){return function(){return f[a]}}function g(){return f}var h=!0,b=b||"data-bind",f;new ko.dependentObservable(function(){var j;if("function"==typeof d){c.skonode=a;with(c)j=d()}else j=d;if(!j)a:{var i=a.getAttribute(b);try{var k=" { "+ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson(i)+" } ";j=ko.utils.evalWithinScope(k,null===c?window:c,a);break a}catch(m){"undefined"!==typeof console&&(console.log("!!! ERROR"),
console.log(i),console.log(m))}j=void 0}f=j;if(h)for(var l in f)ko.bindingHandlers[l]&&"function"==typeof ko.bindingHandlers[l].init&&(k=e(l),(0,ko.bindingHandlers[l].init)(a,k,g,c));for(l in f)ko.bindingHandlers[l]&&"function"==typeof ko.bindingHandlers[l].update&&(k=e(l),(0,ko.bindingHandlers[l].update)(a,k,g,c))},null,{disposeWhenNodeIsRemoved:a});h=!1};ko.applyBindings=function(a,d){if(d&&void 0==d.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)");
var d=d||window.document.body,c=ko.utils.getElementsHavingAttribute(d,"data-bind");ko.utils.arrayForEach(c,function(b){ko.applyBindingsToNode(b,null,a)})};ko.exportSymbol("ko.bindingHandlers",ko.bindingHandlers);ko.exportSymbol("ko.applyBindings",ko.applyBindings);ko.exportSymbol("ko.applyBindingsToNode",ko.applyBindingsToNode)})();var eventHandlersWithShortcuts=["click"];
ko.utils.arrayForEach(eventHandlersWithShortcuts,function(a){ko.bindingHandlers[a]={init:function(d,c,b,e){return ko.bindingHandlers.event.init.call(this,d,function(){var b={};b[a]=c();return b},b,e)}}});
ko.bindingHandlers.event={init:function(a,d,c,b){var e=d()||{},g;for(g in e)(function(){var e=g;"string"==typeof e&&ko.utils.registerEventHandler(a,e,function(a){var j,g=d()[e];if(g){var k=c();try{j=g.apply(b,arguments)}finally{if(!0!==j)a.preventDefault?a.preventDefault():a.returnValue=!1}if(!1===k[e+"Bubble"])a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()}})})()}};
ko.bindingHandlers.submit={init:function(a,d,c,b){if("function"!=typeof d())throw Error("The value for a submit binding must be a function to invoke on submit");ko.utils.registerEventHandler(a,"submit",function(c){var g,h=d();try{g=h.call(b,a)}finally{if(!0!==g)c.preventDefault?c.preventDefault():c.returnValue=!1}})}};ko.bindingHandlers.visible={update:function(a,d){var c=ko.utils.unwrapObservable(d()),b="none"!=a.style.display;if(c&&!b)a.style.display="";else if(!c&&b)a.style.display="none"}};
ko.bindingHandlers.enable={update:function(a,d){var c=ko.utils.unwrapObservable(d());if(c&&a.disabled)a.removeAttribute("disabled");else if(!c&&!a.disabled)a.disabled=!0}};ko.bindingHandlers.disable={update:function(a,d){ko.bindingHandlers.enable.update(a,function(){return!ko.utils.unwrapObservable(d())})}};
ko.bindingHandlers.value={init:function(a,d,c){var b=["change"],e=c().valueUpdate;e&&("string"==typeof e&&(e=[e]),ko.utils.arrayPushAll(b,e),b=ko.utils.arrayGetDistinctValues(b));ko.utils.arrayForEach(b,function(b){var e=!1;ko.utils.stringStartsWith(b,"after")&&(e=!0,b=b.substring(5));var f=e?function(a){setTimeout(a,0)}:function(a){a()};ko.utils.registerEventHandler(a,b,function(){f(function(){var b=d(),e=ko.selectExtensions.readValue(a);ko.isWriteableObservable(b)?b(e):(b=c(),b._ko_property_writers&&
b._ko_property_writers.value&&b._ko_property_writers.value(e))})})})},update:function(a,d){var c=ko.utils.unwrapObservable(d()),b=ko.selectExtensions.readValue(a),e=c!=b;0===c&&0!==b&&"0"!==b&&(e=!0);e&&(b=function(){ko.selectExtensions.writeValue(a,c)},b(),"SELECT"==a.tagName&&setTimeout(b,0));"SELECT"==a.tagName&&(b=ko.selectExtensions.readValue(a),b!==c&&ko.utils.triggerEvent(a,"change"))}};
ko.bindingHandlers.options={update:function(a,d,c){if("SELECT"!=a.tagName)throw Error("options binding applies only to SELECT elements");var b=ko.utils.arrayMap(ko.utils.arrayFilter(a.childNodes,function(a){return a.tagName&&"OPTION"==a.tagName&&a.selected}),function(a){return ko.selectExtensions.readValue(a)||a.innerText||a.textContent}),e=a.scrollTop,g=ko.utils.unwrapObservable(d());ko.utils.emptyDomNode(a);if(g){var h=c();"number"!=typeof g.length&&(g=[g]);if(h.optionsCaption){var f=document.createElement("OPTION");
f.innerHTML=h.optionsCaption;ko.selectExtensions.writeValue(f,void 0);a.appendChild(f)}c=0;for(d=g.length;c<d;c++){var f=document.createElement("OPTION"),j="string"==typeof h.optionsValue?g[c][h.optionsValue]:g[c],j=ko.utils.unwrapObservable(j);ko.selectExtensions.writeValue(f,j);var i=h.optionsText;optionText="function"==typeof i?i(g[c]):"string"==typeof i?g[c][i]:j;if(null===optionText||void 0===optionText)optionText="";optionText=ko.utils.unwrapObservable(optionText).toString();"string"==typeof f.innerText?
f.innerText=optionText:f.textContent=optionText;a.appendChild(f)}g=a.getElementsByTagName("OPTION");c=h=0;for(d=g.length;c<d;c++)0<=ko.utils.arrayIndexOf(b,ko.selectExtensions.readValue(g[c]))&&(ko.utils.setOptionNodeSelectionState(g[c],!0),h++);if(e)a.scrollTop=e}}};ko.bindingHandlers.options.optionValueDomDataKey="__ko.bindingHandlers.options.optionValueDomData__";
ko.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(a){for(var d=[],a=a.childNodes,c=0,b=a.length;c<b;c++){var e=a[c];"OPTION"==e.tagName&&e.selected&&d.push(ko.selectExtensions.readValue(e))}return d},init:function(a,d,c){ko.utils.registerEventHandler(a,"change",function(){var a=d();ko.isWriteableObservable(a)?a(ko.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this)):(a=c(),a._ko_property_writers&&a._ko_property_writers.value&&a._ko_property_writers.value(ko.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this)))})},
update:function(a,d){if("SELECT"!=a.tagName)throw Error("values binding applies only to SELECT elements");var c=ko.utils.unwrapObservable(d());if(c&&"number"==typeof c.length)for(var b=a.childNodes,e=0,g=b.length;e<g;e++){var h=b[e];"OPTION"==h.tagName&&ko.utils.setOptionNodeSelectionState(h,0<=ko.utils.arrayIndexOf(c,ko.selectExtensions.readValue(h)))}}};
ko.bindingHandlers.text={update:function(a,d){var c=ko.utils.unwrapObservable(d());if(null===c||void 0===c)c="";"string"==typeof a.innerText?a.innerText=c:a.textContent=c}};ko.bindingHandlers.html={update:function(a,d){var c=ko.utils.unwrapObservable(d());ko.utils.setHtml(a,c)}};ko.bindingHandlers.css={update:function(a,d){var c=ko.utils.unwrapObservable(d()||{}),b;for(b in c)if("string"==typeof b){var e=ko.utils.unwrapObservable(c[b]);ko.utils.toggleDomNodeCssClass(a,b,e)}}};
ko.bindingHandlers.style={update:function(a,d){var c=ko.utils.unwrapObservable(d()||{}),b;for(b in c)if("string"==typeof b){var e=ko.utils.unwrapObservable(c[b]);a.style[b]=e||""}}};ko.bindingHandlers.uniqueName={init:function(a,d){if(d())a.name="ko_unique_"+ ++ko.bindingHandlers.uniqueName.currentIndex,ko.utils.isIe6&&a.mergeAttributes(document.createElement("<input name='"+a.name+"'/>"),!1)}};ko.bindingHandlers.uniqueName.currentIndex=0;
ko.bindingHandlers.checked={init:function(a,d,c){ko.utils.registerEventHandler(a,"click",function(){var b;if("checkbox"==a.type)b=a.checked;else if("radio"==a.type&&a.checked)b=a.value;else return;var e=d();"checkbox"==a.type&&ko.utils.unwrapObservable(e)instanceof Array?(b=ko.utils.arrayIndexOf(ko.utils.unwrapObservable(e),a.value),a.checked&&0>b?e.push(a.value):!a.checked&&0<=b&&e.splice(b,1)):ko.isWriteableObservable(e)?e()!==b&&e(b):(e=c(),e._ko_property_writers&&e._ko_property_writers.checked&&
e._ko_property_writers.checked(b))});"radio"==a.type&&!a.name&&ko.bindingHandlers.uniqueName.init(a,function(){return!0})},update:function(a,d){var c=ko.utils.unwrapObservable(d());if("checkbox"==a.type)a.checked=c instanceof Array?0<=ko.utils.arrayIndexOf(c,a.value):c,c&&ko.utils.isIe6&&a.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),!1);else if("radio"==a.type)a.checked=a.value==c,a.value==c&&(ko.utils.isIe6||ko.utils.isIe7)&&a.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),
!1)}};ko.bindingHandlers.attr={update:function(a,d){var c=ko.utils.unwrapObservable(d())||{},b;for(b in c)if("string"==typeof b){var e=ko.utils.unwrapObservable(c[b]);if(!1===e||null===e||void 0===e)a.removeAttribute(b);else var g=e.toString();"<"===g[0]&&">"===g[g.length-1]&&(g=g.substring(1,g.length-1));a.setAttribute(b,g)}}};
ko.templateEngine=function(){this.renderTemplate=function(){throw"Override renderTemplate in your ko.templateEngine subclass";};this.isTemplateRewritten=function(){throw"Override isTemplateRewritten in your ko.templateEngine subclass";};this.rewriteTemplate=function(){throw"Override rewriteTemplate in your ko.templateEngine subclass";};this.createJavaScriptEvaluatorBlock=function(){throw"Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass";}};
ko.exportSymbol("ko.templateEngine",ko.templateEngine);
ko.templateRewriting=function(){var a=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;return{ensureTemplateIsRewritten:function(a,c){c.isTemplateRewritten(a)||c.rewriteTemplate(a,function(a){return ko.templateRewriting.memoizeBindingAttributeSyntax(a,c)})},memoizeBindingAttributeSyntax:function(d,c){return d.replace(a,function(a,d,g,h,f,j,i){a=ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson(i);return c.createJavaScriptEvaluatorBlock("ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {                     return (function() { var innerNode=skonode; return { "+
a+" } })()                 })")+d})},applyMemoizedBindingsToNextSibling:function(a){return ko.memoization.memoize(function(c,b){c.nextSibling&&sko.traceResources(c.nextSibling,b,function(){sko.traceRelations(c.nextSibling,b,function(){ko.applyBindingsToNode(c.nextSibling,a,b)})})})}}}();ko.exportSymbol("ko.templateRewriting",ko.templateRewriting);ko.exportSymbol("ko.templateRewriting.applyMemoizedBindingsToNextSibling",ko.templateRewriting.applyMemoizedBindingsToNextSibling);
(function(){function a(a,b,e,g,h){var f=ko.utils.unwrapObservable(g),h=h||{},j=h.templateEngine||d;ko.templateRewriting.ensureTemplateIsRewritten(e,j);e=j.renderTemplate(e,f,h);if("number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw"Template engine must return an array of DOM nodes";switch(b){case "replaceChildren":ko.utils.setDomNodeChildren(a,e);break;case "replaceNode":ko.utils.replaceDomNodes(a,e);break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+
b);}e&&ko.utils.arrayForEach(e,function(a){ko.memoization.unmemoizeDomNodeAndDescendants(a,[g])});h.afterRender&&h.afterRender(e,g);return e}var d;ko.setTemplateEngine=function(a){if(void 0!=a&&!(a instanceof ko.templateEngine))throw"templateEngine must inherit from ko.templateEngine";d=a};ko.renderTemplate=function(c,b,e,g,h){e=e||{};if(void 0==(e.templateEngine||d))throw"Set a template engine before calling renderTemplate";h=h||"replaceChildren";if(g){var f=g.nodeType?g:0<g.length?g[0]:null;return new ko.dependentObservable(function(){var d=
"function"==typeof c?c(b):c,d=a(g,h,d,b,e);"replaceNode"==h&&(g=d,f=g.nodeType?g:0<g.length?g[0]:null)},null,{disposeWhen:function(){return!f||!ko.utils.domNodeIsAttachedToDocument(f)},disposeWhenNodeIsRemoved:f&&"replaceNode"==h?f.parentNode:f})}return ko.memoization.memoize(function(a){ko.renderTemplate(c,b,e,a,"replaceNode")})};ko.renderTemplateForEach=function(c,b,d,g){return new ko.dependentObservable(function(){var h=ko.utils.unwrapObservable(b)||[];h.constructor!=Array&&(h=[h]);for(var f=0;f<
h.length;f++)if("number"===typeof h[f]||"string"===typeof h[f]){var j={$value:h[f]},i;for(i in viewModel)j[i]=viewModel[i];h[f]=j}h=ko.utils.arrayFilter(h,function(a){return d.includeDestroyed||!a._destroy});ko.utils.setDomNodeChildrenFromArrayMapping(g,h,function(b){var f="function"==typeof c?c(b):c;return a(null,"ignoreTargetNode",f,b,d)},d)},null,{disposeWhenNodeIsRemoved:g})};ko.bindingHandlers.template={update:function(a,b,d,g){b=ko.utils.unwrapObservable(b());d="string"==typeof b?b:b.name;if("undefined"!=
typeof b.foreach)g=ko.renderTemplateForEach(d,b.foreach||[],{templateOptions:b.templateOptions,afterAdd:b.afterAdd,beforeRemove:b.beforeRemove,includeDestroyed:b.includeDestroyed,afterRender:b.afterRender},a);else var h=b.data,g=ko.renderTemplate(d,"undefined"==typeof h?g:h,{templateOptions:b.templateOptions,afterRender:b.afterRender},a);(b=ko.utils.domData.get(a,"__ko__templateSubscriptionDomDataKey__"))&&"function"==typeof b.dispose&&b.dispose();ko.utils.domData.set(a,"__ko__templateSubscriptionDomDataKey__",
g)}}})();ko.exportSymbol("ko.setTemplateEngine",ko.setTemplateEngine);ko.exportSymbol("ko.renderTemplate",ko.renderTemplate);
(function(){ko.utils.compareArrays=function(a,d,c){if(void 0===c)return ko.utils.compareArrays(a,d,1)||ko.utils.compareArrays(a,d,10)||ko.utils.compareArrays(a,d,Number.MAX_VALUE);for(var a=a||[],d=d||[],b=a,e=d,g=[],h=0;h<=e.length;h++)g[h]=[];for(var h=0,f=Math.min(b.length,c);h<=f;h++)g[0][h]=h;h=1;for(f=Math.min(e.length,c);h<=f;h++)g[h][0]=h;for(var f=b.length,j,i=e.length,h=1;h<=f;h++){j=Math.max(1,h-c);for(var k=Math.min(i,h+c);j<=k;j++)g[j][h]=b[h-1]===e[j-1]?g[j-1][h-1]:Math.min(void 0===
g[j-1][h]?Number.MAX_VALUE:g[j-1][h]+1,void 0===g[j][h-1]?Number.MAX_VALUE:g[j][h-1]+1)}c=a.length;b=d.length;e=[];h=g[b][c];if(void 0===h)g=null;else{for(;0<c||0<b;){f=g[b][c];i=0<b?g[b-1][c]:h+1;k=0<c?g[b][c-1]:h+1;j=0<b&&0<c?g[b-1][c-1]:h+1;if(void 0===i||i<f-1)i=h+1;if(void 0===k||k<f-1)k=h+1;j<f-1&&(j=h+1);i<=k&&i<j?(e.push({status:"added",value:d[b-1]}),b--):(k<i&&k<j?e.push({status:"deleted",value:a[c-1]}):(e.push({status:"retained",value:a[c-1]}),b--),c--)}g=e.reverse()}return g}})();
ko.exportSymbol("ko.utils.compareArrays",ko.utils.compareArrays);
(function(){function a(a,c,b){var e=[],a=ko.dependentObservable(function(){var a=c(b)||[];0<e.length&&ko.utils.replaceDomNodes(e,a);e.splice(0,e.length);ko.utils.arrayPushAll(e,a)},null,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return 0==e.length||!ko.utils.domNodeIsAttachedToDocument(e[0])}});return{mappedNodes:e,dependentObservable:a}}ko.utils.setDomNodeChildrenFromArrayMapping=function(d,c,b,e){for(var c=c||[],e=e||{},g=void 0===ko.utils.domData.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult"),
h=ko.utils.domData.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],f=ko.utils.arrayMap(h,function(a){return a.arrayEntry}),j=ko.utils.compareArrays(f,c),c=[],i=0,k=[],f=[],m=null,l=0,r=j.length;l<r;l++)switch(j[l].status){case "retained":var n=h[i];c.push(n);0<n.domNodes.length&&(m=n.domNodes[n.domNodes.length-1]);i++;break;case "deleted":h[i].dependentObservable.dispose();ko.utils.arrayForEach(h[i].domNodes,function(a){k.push({element:a,index:l,value:j[l].value});m=a});i++;break;
case "added":var o=a(d,b,j[l].value),n=o.mappedNodes;c.push({arrayEntry:j[l].value,domNodes:n,dependentObservable:o.dependentObservable});for(var o=0,s=n.length;o<s;o++){var p=n[o];f.push({element:p,index:l,value:j[l].value});null==m?d.firstChild?d.insertBefore(p,d.firstChild):d.appendChild(p):m.nextSibling?d.insertBefore(p,m.nextSibling):d.appendChild(p);m=p}}ko.utils.arrayForEach(k,function(a){ko.cleanNode(a.element)});b=!1;if(!g){if(e.afterAdd)for(l=0;l<f.length;l++)e.afterAdd(f[l].element,f[l].index,
f[l].value);if(e.beforeRemove){for(l=0;l<k.length;l++)e.beforeRemove(k[l].element,k[l].index,k[l].value);b=!0}}b||ko.utils.arrayForEach(k,function(a){a.element.parentNode&&a.element.parentNode.removeChild(a.element)});ko.utils.domData.set(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult",c)}})();ko.exportSymbol("ko.utils.setDomNodeChildrenFromArrayMapping",ko.utils.setDomNodeChildrenFromArrayMapping);
ko.jqueryTmplTemplateEngine=function(){var a;a="undefined"==typeof jQuery||!jQuery.tmpl?0:jQuery.tmpl.tag?jQuery.tmpl.tag.tmpl&&jQuery.tmpl.tag.tmpl.open&&0<=jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")?3:2:1;this.jQueryTmplVersion=a;this.getTemplateNode=function(a){var b=document.getElementById(a);if(null==b)throw Error("Cannot find template with ID="+a);return b};var d=RegExp("__ko_apos__","g");this.renderTemplate=function(a,b,e){e=e||{};if(0==this.jQueryTmplVersion)throw Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details.");
if(1==this.jQueryTmplVersion)return a='<script type="text/html">'+this.getTemplateNode(a).text+"<\/script>",b=jQuery.tmpl(a,b)[0].text.replace(d,"'"),jQuery.clean([b],document);if(!(a in jQuery.template)){var g=this.getTemplateNode(a).text;jQuery.template(a,g)}b=[b];b=jQuery.tmpl(a,b,e.templateOptions);b.appendTo(document.createElement("div"));jQuery.fragments={};return b};this.isTemplateRewritten=function(a){return a in jQuery.template?!0:!0===this.getTemplateNode(a).isRewritten};this.rewriteTemplate=
function(a,b){var d=this.getTemplateNode(a),g=b(d.text);1==this.jQueryTmplVersion&&(g=ko.utils.stringTrim(g),g=g.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g,function(a,b,c){return b.replace(/\'/g,"__ko_apos__")+c}));d.text=g;d.isRewritten=!0};this.createJavaScriptEvaluatorBlock=function(a){a=function(a){var c=/<\$[^>]*>/g;if(1<a.split(c).length){var d="",h=null;a.replace(c,function(a,b,c){null===h&&(h=c);b=h.split(a);d=d+b[0]+a.replace(/</,"<'+").replace(/>/,"+'>");b.shift();1===b.length?
d+=b[0]:h=b.join(a)});return d}return a}(a);return 1==this.jQueryTmplVersion?"{{= "+a+"}}":"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){document.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")};ko.exportProperty(this,"addTemplate",this.addTemplate);1<this.jQueryTmplVersion&&(jQuery.tmpl.tag.ko_code={open:(3>this.jQueryTmplVersion?"_":"__")+".push($1 || '');"})};ko.jqueryTmplTemplateEngine.prototype=new ko.templateEngine;ko.setTemplateEngine(new ko.jqueryTmplTemplateEngine);
ko.exportSymbol("ko.jqueryTmplTemplateEngine",ko.jqueryTmplTemplateEngine);Utils={stackCounterLimit:1E3,stackCounter:0};Utils.recur=function(a){Utils.stackCounter===Utils.stackCounterLimit?(Utils.stackCounter=0,setTimeout(a,0)):(Utils.stackCounter++,a())};Utils.repeat=function(a,d,c,b,e){4===arguments.length&&(e={});a<d?(e._i=a,c(function(c,e){Utils.recur(function(){Utils.repeat(a+1,d,c,b,e)})},e)):b(e)};SemanticKnockOut={};window.sko=SemanticKnockOut;sko.activeDebug=!1;
sko.log=function(a){sko.activeDebug&&console.log(a)};
sko.jsonld={coerce:function(a,d,c){null==a["@context"]&&(a["@context"]={});if(null==a["@context"]["@coerce"])a["@context"]["@coerce"]={},a["@context"]["@coerce"][c]=d;else if("string"===typeof a["@context"]["@coerce"][c]&&a["@context"]["@coerce"][c]!=d)a["@context"]["@coerce"][c]=[a["@context"]["@coerce"][c],d];else if("object"===typeof a["@context"]["@coerce"][c]){for(var b=0;b<a["@context"]["@coerce"][c].length;b++)if(a["@context"]["@coerce"][c][b]===d)return a;a["@context"]["@coerce"][c].push(d)}else a["@context"]["@coerce"][c]=
d;return a},graphToJSONLD:function(a,d){var c={};a.forEach(function(a){var b=a.subject.valueOf(),e=c[b];null==e&&(e={"@subject":b,"@context":{}},c[b]=e);var j=a.predicate.valueOf();"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===j&&(j="@type");var b=null,i=!1,b=d.prefixes.shrink(j);b!=j&&(i=!0);-1!=b.indexOf("#")?b=b.split("#")[1]:(b=b.split("/"),b=b[b.length-1]);j=a.object.valueOf();null!=e[b]?i?(a=b.split(":")[0],"object"===typeof e[b]?e[b].push(j):(j=[e[b],j],e[b]=j)):null!=e["@context"][b]||
"@"===b[0]?"object"===typeof e[b]?e[b].push(j):(j=[e[b],j],e[b]=j):(b=a.predicate.valueOf(),null==e[b]?e[b]=j:"object"===typeof e[b]?e[b].push(j):(j=[e[b],j],e[b]=j),"string"===typeof j&&(0==j.indexOf("http://")||0==j.indexOf("https://"))&&sko.jsonld.coerce(e,b,"@iri")):(e[b]=j,"@"!=b[0]&&(!0==i?(a=b.split(":")[0],e["@context"][a]=d.prefixes[a]):e["@context"][b]=a.predicate.valueOf(),"string"===typeof j&&(0==j.indexOf("http://")||0==j.indexOf("https://"))&&sko.jsonld.coerce(e,b,"@iri")))});var b=
[],e;for(e in c)b.push(c[e]);return b}};sko.Class={};sko.Class.Clone=function(){};sko.Class.registry={};sko.Class.define=function(a,d){sko.Class.registry[sko.NTUri(a.replace(/\s*/g,""))]=d};sko.Class.instance=function(a,d){var c=sko.NTUri(a),b=d||{};sko.Class.Clone.prototype=sko.Class.registry[c];c=new sko.Class.Clone;b.extended=null;for(var e in c)null==b[e]&&(b[e]=c[e]);b.extended&&b.extended();return b};
sko.Class.check=function(a,d){var c=d||!1,b;for(b in sko.Class.registry)if(sko.log("*** IS INSTANCE OF? "+b),sko.Class.isInstance(a,b))sko.log("Y!"),(c||null==a.classes[b])&&sko.Class.instance(b,a),a.classes[b]=!0;else if(sko.log("N!"),null!=a.classes[b]){delete a.classes[b];for(var e in sko.Class.registry[b])delete a[e]}};
sko.Class.isInstance=function(a,d){if(0===d.indexOf("ObjectIntersectionOf(")){for(var c=d.slice(0,d.length-1).split("ObjectIntersectionOf(")[1].split(","),b=0;b<c.length;b++)if(sko.log("INTERSECTION CHECKING "+c[b]),!sko.Class.isInstance(a,c[b]))return!1;return!0}if(0===d.indexOf("ObjectUnionOf(")){c=d.slice(0,d.length-1).split("ObjectUnionOf(")[1].split(",");for(b=0;b<c.length;b++)if(sko.Class.isInstance(a,c[b]))return!0;return!1}if(0===d.indexOf("ObjectSomeValuesFrom(")){c=d.slice(0,d.length-1).split("ObjectSomeValuesFrom(")[1];
sko.log("CHECKIN CLASS URI: "+sko.NTUri(c));for(b in a.valuesMap)sko.log(" - "+b+" ---\> "+a.valuesMap[sko.NTUri(c)]);return null!=a.valuesMap[sko.NTUri(c)]}sko.log("CHECKIN CLASS URI: "+sko.NTUri(d));sko.log(a);for(b in a.classes)sko.log(" - "+b+" ---\> "+a.classes[b]);return!0===a.classes[sko.NTUri(d)]};
sko.ready=function(){sko.aboutResourceMap={};sko.aboutResourceSubscriptionMap={};sko.Class.registry={};sko.aboutCounter=0;sko.generatorId=0;sko.generatorsMap={};var a=null;2===arguments.length?(sko.store=arguments[0],a=arguments[1],sko.rdf=sko.store.rdf,a(!0)):(a=arguments[0],rdfstore.create(function(d){sko.store=d;sko.store.registerDefaultProfileNamespaces();sko.rdf=sko.store.rdf;a(!0)}))};sko.registerPrefix=function(a,d){sko.store.registerDefaultNamespace(a,d)};sko._blankCounter=0;
sko.nextBlankLabel=function(){var a="_:sko_"+sko._blankCounter;sko._blankCounter++;return a};sko.aboutResourceMap={};sko.aboutResourceSubscriptionMap={};sko.aboutCounter=0;
sko.about=function(a,d,c){if(null!=sko.about[a])c(a);else{var b=""+sko.aboutCounter;sko.aboutCounter++;null==a&&(a=sko.nextBlankLabel());if("string"===typeof a){var e=a;sko.store.node(sko.plainUri(e),function(a,d){if(a){sko.log("FOUND RESOURCE: "+e);sko.log(d);sko.log(" FOR "+sko.plainUri(e));sko.log(" ------------\> "+b+" : "+e);sko.aboutResourceMap[b]=new sko.Resource(b,e,d);sko.about[b]=ko.observable(e);var f=sko.about[b].subscribe(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+b+" new value -> "+
a);null==a&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.nextBlankLabel());sko.store.node(sko.plainUri(a),function(c,d){if(c){var e=d.toArray()[0].subject.valueOf();sko.log(" ------------\> "+b+" : "+e+" 2");sko.aboutResourceMap[b].about(e)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : "+a+" 3"),sko.aboutResourceMap[b].about(a)})});sko.aboutResourceSubscriptionMap[b]=f}c(b)})}else sko.about[b]=ko.dependentObservable({read:function(){var c=a();sko.log("*** OBSERVABLE READING DEPENDING NODE ABOT ID:"+
b+" new value -> "+c);null==c&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),c=sko.nextBlankLabel());return c},write:function(c){sko.log("*** OBSERVABLE WRITING DEPENDING NODE ABOT ID:"+b+" new value -> "+c);null==c&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),c=sko.nextBlankLabel());a(c)},owner:d}),sko.store.node(sko.plainUri(sko.about[b]()),function(a,d){if(a){sko.log(" ------------\> "+b+" : "+d+" 4");sko.aboutResourceMap[b]=new sko.Resource(b,sko.about[b](),d);var e=sko.about[b].subscribe(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+
b+" new value -> "+a);null!=a?sko.store.node(sko.plainUri(a),function(c,d){if(c)if(0<d.toArray().length){var e=d.toArray()[0].subject.toNT();sko.log(" ------------\> "+b+" : "+e+" 5");sko.aboutResourceMap[b].about(e)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : "+a+" 6"),sko.aboutResourceMap[b].about(a);else sko.log("Error updating 3 resource for URI:"+a+" in SKO about node observer"),sko.log("*** NO RESOURCE FOR URI:"+a+" NEXT ID:"+b),sko.log(" ------------\> "+b+" : "+
a+" 7"),sko.aboutResourceMap[b].about(a)}):(sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : NEW BLANK  8"),sko.aboutResourceMap[b].about(sko.nextBlankLabel()))});sko.aboutResourceSubscriptionMap[b]=e}c(b)})}};
sko.rel=function(a,d,c,b){var e=""+sko.aboutCounter,g=null;sko.aboutCounter++;if("string"===typeof a){var h=sko.NTUri(a),g=h;sko.about[e]=ko.dependentObservable({read:function(){sko.log("*** OBSERVABLE READING RELATED  DEPENDING NODE ABOT ID:"+e);var a=sko.currentResource(jQuery(d).parent().toArray()[0]);sko.log(a);if(null!=a){sko.log(" ** about:"+a.about());sko.log("*** Found parent resource: "+a.about());if(a[h]){var b=a[h]();if(null!=b&&!sko.isSKOBlankNode(a[h]()))return b=sko.NTUri(b),null==sko.aboutResourceMap[e]||
sko.aboutResourceMap[e].about()!=b?(sko.log("*** found related resource: "+b),sko.store.node(sko.plainUri(b),function(a,c){sko.log("CREATED NODE FOR ID "+e+" AND URI: "+sko.plainUri(b));sko.log(c);sko.log(" ------------\> "+e+" : "+b+" 8b");sko.aboutResourceMap[e]=new sko.Resource(e,b,c)})):sko.log("*** Related resource hasn't changed"),b;if(null==b){sko.log("*** related resource is null");sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL");var c=sko.nextBlankLabel();sko.log(" ** setting parent node related resource to "+
c);a[h](c)}else sko.aboutResourceMap[e]?(sko.log("*** setting new value for related resource "+c),sko.log(" ------------\> "+e+" : "+c+" 9"),sko.aboutResourceMap[e].about(c)):sko.log("!! Should I create the new blank node?");return c}sko.log("!!! parent resource doest not link to the related resource")}else sko.log("!!! impossible to find parent resource")},write:function(a){null==a&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.nextBlankLabel());a=sko.NTUri(a);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+
e+" URI -> "+a);var b=sko.currentResource(jQuery(d).parent().toArray()[0]);null!=b?(sko.log("*** Found parent resource: "+b.about()),b[g]?(sko.log("*** Setting new related resource in parent resource found: "+a),b[g](a)):sko.log("!!! parent resource doest not link to the related resource")):sko.log("!!! impossible to find parent resource")},owner:c});c=sko.about[e].subscribe(function(a){sko.log("*** OBSERVING RELATED NODE ABOT ID:"+e+" new value -> "+a);null==a&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),
a=sko.nextBlankLabel());a=sko.NTUri(a);null!=sko.about[e]()?sko.plainUri(a)!==sko.plainUri(sko.about[e]())&&sko.store.node(sko.plainUri(a),function(b,c){b?(c.toArray(),sko.log(" ------------\> "+e+" : "+h+" 10"),sko.aboutResourceMap[e].about(h)):sko.log("Error updating 1 resource for URI:"+a+" in SKO about related node observer")}):sko.log("!! this resource is now null, should be removed from list of resources?")})}else sko.about[e]=ko.dependentObservable({read:function(){var b;null!=a?(b=a(),b=sko.NTUri(b),
sko.log("*** OBSERVABLE READING RELATED DEPENDING NODE ABOT ID:"+e+" URI -> "+b)):(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),b=sko.nextBlankLabel());var c=sko.currentResource(jQuery(d).parent().toArray()[0]);if(null!=c){sko.log("*** Found parent resource: "+c.about());if(c[b]){var g=c[b]();sko.log("*** found related resource: "+g);sko.store.node(sko.plainUri(g),function(a,b){sko.log(" ------------\> "+e+" : "+g+" 11");sko.aboutResourceMap[e]=new sko.Resource(e,g,b)});return g}sko.log("!!! parent resource doest not link to the related resource")}else sko.log("!!! impossible to find parent resource")},
write:function(b){var b=sko.NTUri(b),c=sko.currentResource(jQuery(d).parent().toArray()[0]);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+e+" URI -> "+b);null==b&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),b=sko.nextBlankLabel());null!=c?(sko.log("*** Found parent resource: "+c.about()),c[a()]?(sko.log("*** Setting new related resource in parent resource found: "+b),c[a()](b),a(b)):sko.log("!!! parent resource doest not link to the related resource")):sko.log("!!! impossible to find parent resource")},
owner:c}),c=sko.about[e].subscribe(function(a){a=sko.NTUri(a);sko.log("*** OBSERVING RELATED NODE (F) ABOT ID:"+e+" new value -> "+a);null==a&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.nextBlankLabel());sko.plainUri(a)!=sko.plainUri(sko.about[e]())?sko.store.node(sko.plainUri(a),function(b,c){if(b){var d=c.toArray()[0].subject.valueOf();sko.log(" ------------\> "+e+" : "+d+" 12");sko.aboutResourceMap[e].about(d)}else sko.log("Error updating  2 resource for URI:"+a+" in SKO about related node observer")}):
sko.log("*** Related about resource hasn't changed")});sko.aboutResourceSubscriptionMap[e]=c;b(e)};sko.plainUri=function(a){if("<"===a[0]&&">"==a[a.length-1])return a.slice(1,a.length-1);if(null!=a.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)){a=a.slice(1,a.length-1);resolved=sko.rdf.prefixes.resolve(a);if(null==resolved)throw"The CURIE "+a+" cannot be resolved";return resolved}return a};
sko.effectiveValue=function(a){if(null==a)return null;if(a.interfaceName&&"Literal"===a.interfaceName){if("http://www.w3.org/2001/XMLSchema#integer"==a.datatype||"http://www.w3.org/2001/XMLSchema#decimal"==a.datatype||"http://www.w3.org/2001/XMLSchema#double"==a.datatype||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==a.datatype||"http://www.w3.org/2001/XMLSchema#negativeInteger"==a.datatype||"http://www.w3.org/2001/XMLSchema#long"==a.datatype||"http://www.w3.org/2001/XMLSchema#int"==a.datatype||
"http://www.w3.org/2001/XMLSchema#short"==a.datatype||"http://www.w3.org/2001/XMLSchema#byte"==a.datatype||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==a.datatype||"http://www.w3.org/2001/XMLSchema#unsignedLong"==a.datatype||"http://www.w3.org/2001/XMLSchema#unsignedInt"==a.datatype||"http://www.w3.org/2001/XMLSchema#unsignedShort"==a.datatype||"http://www.w3.org/2001/XMLSchema#unsignedByte"==a.datatype||"http://www.w3.org/2001/XMLSchema#positiveInteger"==a.datatype)return parseFloat(a.valueOf());
if("http://www.w3.org/2001/XMLSchema#boolean"===a.type)return"true"===a.valueOf()||!0===a.valueOf()||"True"===a.valueOf();if("http://www.w3.org/2001/XMLSchema#string"===a.type)return a.valueOf();if("http://www.w3.org/2001/XMLSchema#dateTime"===a.type)return new Date(a.valueOf());if(null==a.type)return a.valueOf()}else return a.valueOf()};sko.defaultLanguage=ko.observable(null);
sko.Resource=function(a,d,c){this.resourceId=a;this.valuesMap={};this.subscriptions=[];this.literalLangs={};this.classes={};var b=this;this.defaultLanguage=ko.dependentObservable(function(){return sko.defaultLanguage()});d=sko.NTUri(d);c.forEach(function(a){sko.log(a);"<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"===a.predicate.toNT()&&(sko.log(" found resource class "+a.object.toNT()),b.classes[a.object.toNT()]=!0);if("NamedNode"===a.object.interfaceName)b.valuesMap[a.predicate.toNT()]=a.object.toNT(),
b[a.predicate.toNT()]=ko.observable(a.object.toNT());else if("Literal"===a.object.interfaceName)if(null!=b.defaultLanguage()){if(null==b.valuesMap[a.predicate.toNT()]||a.object.language==b.defaultLanguage()){var c=sko.effectiveValue(a.object.valueOf());b.valuesMap[a.predicate.toNT()]=c;b[a.predicate.toNT()]=ko.observable(c);b[sko.plainUri(a.predicate.toNT())]=b[a.predicate.toNT()];b.literalLangs[a.predicate.toNT()]=a.object.language}}else{if(null==b.valuesMap[a.predicate.toNT()]||null==a.object.language)c=
sko.effectiveValue(a.object.valueOf()),b.valuesMap[a.predicate.toNT()]=c,b[a.predicate.toNT()]=ko.observable(c),b[sko.plainUri(a.predicate.toNT())]=b[a.predicate.toNT()],b.literalLangs[a.predicate.toNT()]=a.object.language}else b.valuesMap[a.predicate.toNT()]=a.object.valueOf(),b[a.predicate.toNT()]=ko.observable(a.object.valueOf()),b[sko.plainUri(a.predicate.toNT())]=b[a.predicate.toNT()]});this.about=ko.observable(d);this["@"]=this.about;this.storeObserverFn=sko.Resource.storeObserver(this);sko.Class.check(this,
!0);b=this;this.subscriptions.push(this.about.subscribe(function(a){sko.log("SKO Resource new resource:"+a);sko.log("*** STOP OBSERVING NODE STORE");sko.store.stopObservingNode(b.storeObserverFn);if(null!=a&&0!=a.indexOf("_:sko"))sko.log("*** START OBSERVING NODE STORE FOR "+b.about()),sko.store.startObservingNode(sko.plainUri(a),b.storeObserverFn);else{sko.log("*** nullifying resources");for(var c in b.valuesMap)b.valuesMap[c]=null;for(c in b.valuesMap)b[c](null)}}));sko.Resource.koObserver(this);
sko.store.startObservingNode(sko.plainUri(this.about()),b.storeObserverFn)};sko.NTUri=function(a){if("["===a[0]&&"]"===a[a.length-1]){a=a.slice(1,a.length-1);resolved=sko.rdf.prefixes.resolve(a);if(null==a)throw"The CURIE "+a+" cannot be resolved";a="<"+resolved+">"}return a};sko.Resource.prototype.tryProperty=function(a){a=sko.NTUri(a);if(null==this[a]){this.valuesMap[a]=null;this[a]=ko.observable(null);var d=this;this.subscriptions.push(this[a].subscribe(function(c){d.notifyPropertyChange(a,c)}))}return this[a]};
sko.Resource.prototype.prop=function(a){return this.tryProperty(a)};sko.Resource.prototype.getProp=function(a){return this.tryProperty(a)()};sko.Resource.prototype.setProp=function(a,d){return this.tryProperty(a)(d)};
sko.Resource.prototype.notifyPropertyChange=function(a,d){sko.log("*** received KO notification for property "+a+" -> "+d);if(null==this.valuesMap[a])this.valuesMap[a]=d,0===this.about().indexOf("_:sko")||null!=d&&(0===d.indexOf("http")?sko.store.execute("INSERT DATA { "+this.about()+" "+a+" <"+d+"> }",function(){}):0===d.indexOf("<")?sko.store.execute("INSERT DATA { "+this.about()+" "+a+" "+d+" }",function(){}):sko.store.execute("INSERT DATA { "+this.about()+" "+a+' "'+d+'" }',function(){}));else if(this.valuesMap[a]!==
d&&!sko.isSKOBlankNode(d)){var c='"'+this.valuesMap[a]+'"',d='"'+d+'"';null!=this.literalLangs[a]&&(c=c+"@"+this.literalLangs[a],d=d+"@"+this.literalLangs[a]);var b="DELETE { "+this.about()+" "+a+" "+c+" }",b=b+" INSERT { "+this.about()+" "+a+" "+d+" }",b=b+" WHERE { "+this.about()+" "+a+" "+c+" }",b=b.replace(/"</g,"<").replace(/>"/g,">");this.valuesMap[a]=d;sko.log("*** updating STORE: \n  "+b);sko.store.execute(b)}};sko.isSKOBlankNode=function(a){return 0===a.indexOf("_:sko")};
sko.Resource.prototype.disconnect=function(){sko.log(" ** DISCONNECTING");sko.store.stopObservingNode(this.storeObserverFn);sko.log(" ** disconnected STORE");for(var a=0;a<this.subscriptions.length;a++)sko.log(" ** disconnecting subscription"),this.subscriptions[a].dispose();sko.log(" ** disconnecting resource map");sko.aboutResourceSubscriptionMap[this.resourceId].dispose();sko.log(" ** deleting");delete sko.aboutResourceMap[this.resourceId];delete sko.about[this.resourceId]};
sko.cleanNode=function(a){sko.log("*** CLEANING!");sko.log(a);var d=jQuery(a).attr("aboutId"),c=[];null!=d&&c.push(d);c=c.concat(sko.childrenResourceIds(a));for(a=0;a<c.length;a++)null!=sko.aboutResourceMap[c[a]]&&(sko.log("*** DISCONNECTING "+c[a]),sko.log(sko.aboutResourceMap[c[a]]),sko.aboutResourceMap[c[a]].disconnect())};
sko.Resource.koObserver=function(a){var d=function(a,c){sko.log("*** subcribing to property "+c);var d=a[c].subscribe(function(d){a.notifyPropertyChange(c,d)});a.subscriptions.push(d)},c;for(c in a.valuesMap)d(a,c)};
sko.Resource.storeObserver=function(a){return function(d){sko.log("*** received notification change from STORE in resource "+a.about());if(0!==a.about().indexOf("_:sko")){var c={},b={};sko.log("*** triples in STORE resource -> "+d.toArray().length);d.forEach(function(d){if("NamedNode"===d.object.interfaceName)sko.log(" "+d.predicate.toNT()+" -> "+d.object.toNT()),null!=c[d.predicate.toNT()]?c[d.predicate.toNT()].constructor===Array?(c[d.predicate.toNT()].push(d.object.toNT()),c[d.predicate.toNT()].sort()):
c[d.predicate.toNT()]=[c[d.predicate.toNT()],d.object.toNT()]:c[d.predicate.toNT()]=d.object.toNT();else if(null!=a.defaultLanguage()){if(null==c[d.predicate.toNT()]||d.object.language==a.defaultLanguage())null!=c[d.predicate.toNT()]?c[d.predicate.toNT()].constructor===Array?(c[d.predicate.toNT()].push(d.object.valueOf()),c[d.predicate.toNT()].sort()):b[d.predicate.toNT()]!=d.object.language?(c[d.predicate.toNT()]=d.object.valueOf(),b[d.predicate.toNT()]=d.object.language):c[d.predicate.toNT()]=[c[d.predicate.toNT()],
d.object.valueOf()]:(sko.log(" "+d.predicate.toNT()+" -> "+d.object.valueOf()),c[d.predicate.toNT()]=d.object.valueOf(),b[d.predicate.toNT()]=d.object.language)}else if(null==c[d.predicate.toNT()]||null==d.object.language)null!=c[d.predicate.toNT()]?c[d.predicate.toNT()].constructor===Array?(c[d.predicate.toNT()].push(d.object.valueOf()),c[d.predicate.toNT()].sort()):null!=b[d.predicate.toNT()]?(c[d.predicate.toNT()]=d.object.valueOf(),b[d.predicate.toNT()]=d.object.language):c[d.predicate.toNT()]=
[c[d.predicate.toNT()],d.object.valueOf()]:(sko.log(" "+d.predicate.toNT()+" -> "+d.object.valueOf()),c[d.predicate.toNT()]=d.object.valueOf(),b[d.predicate.toNT()]=d.object.language)});var e={},d=[],g=[],h=[],f;for(f in a.valuesMap)if(null!=c[f])if(e[f]=c[f],a.valuesMap[f]&&a.valuesMap[f].constructor===Array&&newValue[f].constructor===Array)a.valuesMap[f].length!=newValue[f].length&&g.push(f);else{if(a.valuesMap[f]!==c[f]&&(g.push(f),null!=b[f]||null!=a.literalLangs[f]))a.literalLangs[f]=b[f]}else d.push(f),
delete a.literalLangs[f];for(f in c)null==a.valuesMap[f]&&(h.push(f),e[f]=c[f],a.literalLangs[f]=b[f]);a.valuesMap=e;for(f=0;f<d.length;f++)sko.log("*** setting value to null "+d[f]+" -> NULL"),a[d[f]](null);for(f=0;f<g.length;f++)sko.log("*** updating value "+g[f]+" -> "+a.valuesMap[g[f]]),a[g[f]](a.valuesMap[g[f]]);for(f=0;f<h.length;f++)sko.log("*** new value "+h[f]+" -> "+a.valuesMap[h[f]]),a[h[f]]=ko.observable(a.valuesMap[h[f]]),a[sko.plainUri(h[f])]=a[h[f]];sko.Class.check(a);sko.log("*** END MODIFICATION")}}};
sko.traceResources=function(a,d,c){sko.log("** TRACING:");sko.log(a);var b=[];(jQuery(a).attr("about")||jQuery(a).attr("data-bind"))&&b.push(a);var a=jQuery(a).find("*[about], *[data-bind]").toArray(),b=b.concat(a),e=function(a,c){node=b[c._i];var f=jQuery(node).attr("about");null==jQuery(node).attr("aboutId")?(null==f&&(dataBind=jQuery(node).attr("data-bind"),null!=dataBind&&-1!=dataBind.indexOf("about:")&&(f=/s*([^ ]+)s*,?/.exec(dataBind.split("about:")[1])[0],","===f[f.length-1]&&(f=f.slice(0,
f.length-1)))),null!=f&&""!=f?("string"===typeof f&&"<"!==f[0]&&">"!==f[f.length-1]&&"["!==f[0]&&"]"!==f[f.length-1]&&(f=d[f]),sko.about(f,d,function(b){jQuery(node).attr("aboutId",b);a(e,c)})):a(e,c)):a(e,c)};Utils.repeat(0,b.length,e,function(){c()})};
sko.currentResource=function(a){sko.log("in current resource");sko.log(a);if(null==a)return sko.log("!!! top of DOM tree, About node not found"),null;var d=jQuery(a).attr("aboutId");sko.log("about id:"+d);if(d){a=sko.about[d]();sko.log("uri:"+a);if(null!=a)return sko.aboutResourceMap[d];sko.log("!!! current resource is null: "+d)}else return sko.log("recurring"),sko.currentResource(jQuery(a).parent().toArray()[0])};
sko.currentResourceNode=function(a){sko.log("in current resource node");sko.log(a);if(null==a)return sko.log("!!! top of DOM tree, About node not found"),null;var d=jQuery(a).attr("aboutId");sko.log("about id:"+d);if(d){var c=sko.about[d]();sko.log("uri:"+c);if(null!=c)return a;sko.log("!!! current resource is null: "+d);return null}sko.log("recurring");return sko.currentResourceNode(jQuery(a).parent().toArray()[0])};sko.childrenResourceIds=function(a){return jQuery(a).find("*[aboutId]").map(function(){return jQuery(this).attr("aboutId")})};
sko.traceRelations=function(a,d,c){sko.log("*** TRACING RELATIONS:");a=sko.currentResourceNode(a)||a;sko.log("*** FOUND ROOT NODE TO LOOK FOR RELATIONS:");sko.log(a);var b=[];(jQuery(a).attr("rel")||jQuery(a).attr("data-bind"))&&b.push(a);a=jQuery(a).find("*[rel], *[data-bind]").toArray();b=b.concat(a);sko.log(" ** NODES TO LOOK FOR RELATED RESOURCES");sko.log(b);var e=function(a,c){node=b[c._i];var f=jQuery(node).attr("rel");null==f&&(dataBind=jQuery(node).attr("data-bind"),null!=dataBind&&-1!=dataBind.indexOf("rel:")&&
(f=/s*([^ ]+)s*,?/.exec(dataBind.split("rel:")[1])[0],","===f[f.length-1]&&(f=f.slice(0,f.length-1))));null!=f&&""!=f?("string"===typeof f&&"<"!==f[0]&&">"!==f[f.length-1]&&"["!==f[0]&&"]"!==f[f.length-1]&&(f=d[f]),null==jQuery(node).attr("aboutId")?(sko.log("*** CREATING RELATED NODE"),sko.rel(f,node,d,function(b){jQuery(node).attr("aboutId",b);a(e,c)})):(sko.log("*** NODE IS ALREADY TRACED"),a(e,c))):a(e,c)};Utils.repeat(0,b.length,e,function(){c()})};sko.generatorId=0;sko.generatorsMap={};
sko.where=function(a){var a="select ?subject where "+a,d=""+sko.generatorId;sko.generatorId++;sko.generatorsMap[d]=ko.observable([]);sko.log("*** WHERE QUERY: "+a);sko.store.startObservingQuery(a,function(a){var b=[];sko.log(" ** RESULTS!!!");for(var e=0;e<a.length;e++)sko.log(" ** ADDING VALUE "+a[e].subject.value),b.push("<"+a[e].subject.value+">");sko.log("** SETTING VALUE");sko.log(b);sko.generatorsMap[d](b)});return sko.generatorsMap[d]};
sko.applyBindings=function(a,d,c){"string"===typeof a&&(a=jQuery(a)[0]);sko.traceResources(a,d,function(){sko.traceRelations(a,d,function(){ko.applyBindings(d,a);null!=c&&c()})})};sko.resource=function(a){a=jQuery(a).toArray();if(1===a.length)return sko.currentResource(a[0]);for(var d=[],c=0;c<a.length;c++)d.push(sko.currentResource(a[c]));return d};sko.owl={};
})(window);
