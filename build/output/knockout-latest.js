// Knockout JavaScript library v1.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,undefined){
function d(a){throw a;}var k=void 0,n=null,p=window.ko={};p.b=function(a,e){for(var b=a.split("."),c=window,f=0;f<b.length-1;f++)c=c[b[f]];c[b[b.length-1]]=e};p.s=function(a,e,b){a[e]=b};
p.a=new function(){function a(a,c){if(a.tagName!="INPUT"||!a.type)return!1;if(c.toLowerCase()!="click")return!1;var b=a.type.toLowerCase();return b=="checkbox"||b=="radio"}var e=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,b=/MSIE 6/i.test(navigator.userAgent),c=/MSIE 7/i.test(navigator.userAgent),f={},h={};f[/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];f.MouseEvents="click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave".split(",");
for(var g in f){var i=f[g];if(i.length)for(var m=0,j=i.length;m<j;m++)h[i[m]]=g}return{Ga:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],n:function(a,c){for(var b=0,f=a.length;b<f;b++)c(a[b])},o:function(a,c){if(typeof a.indexOf=="function")return a.indexOf(c);for(var b=0,f=a.length;b<f;b++)if(a[b]===c)return b;return-1},gb:function(a,c,b){for(var f=0,e=a.length;f<e;f++)if(c.call(b,a[f]))return a[f];return n},la:function(a,c){var b=p.a.o(a,c);b>=0&&a.splice(b,1)},ja:function(a){for(var a=
a||[],c=[],b=0,f=a.length;b<f;b++)p.a.o(c,a[b])<0&&c.push(a[b]);return c},ka:function(a,c){for(var a=a||[],b=[],f=0,e=a.length;f<e;f++)b.push(c(a[f]));return b},ia:function(a,c){for(var a=a||[],b=[],f=0,e=a.length;f<e;f++)c(a[f])&&b.push(a[f]);return b},Q:function(a,c){for(var b=0,f=c.length;b<f;b++)a.push(c[b])},oa:function(a){for(;a.firstChild;)p.removeNode(a.firstChild)},Nb:function(a,c){p.a.oa(a);c&&p.a.n(c,function(c){a.appendChild(c)})},Ra:function(a,c){var b=a.nodeType?[a]:a;if(b.length>0){for(var f=
b[0],e=f.parentNode,h=0,i=c.length;h<i;h++)e.insertBefore(c[h],f);h=0;for(i=b.length;h<i;h++)p.removeNode(b[h])}},Ta:function(a,c){navigator.userAgent.indexOf("MSIE 6")>=0?a.setAttribute("selected",c):a.selected=c},Ha:function(a,c){if(!a||a.nodeType!=1)return[];var b=[];a.getAttribute(c)!==n&&b.push(a);for(var f=a.getElementsByTagName("*"),e=0,h=f.length;e<h;e++)f[e].getAttribute(c)!==n&&b.push(f[e]);return b},z:function(a){return(a||"").replace(e,"")},Zb:function(a,c){for(var b=[],f=(a||"").split(c),
e=0,h=f.length;e<h;e++){var i=p.a.z(f[e]);i!==""&&b.push(i)}return b},Tb:function(a,c){a=a||"";return c.length>a.length?!1:a.substring(0,c.length)===c},sb:function(a,c){return c===k?(new Function("return "+a))():(new Function("__SKO__sc","with(__SKO__sc){ return ("+a+") }"))(c)},pb:function(a,c){if(c.compareDocumentPosition)return(c.compareDocumentPosition(a)&16)==16;for(;a!=n;){if(a==c)return!0;a=a.parentNode}return!1},na:function(a){return p.a.pb(a,document)},N:function(c,b,f){if(typeof jQuery!=
"undefined"){if(a(c,b))var e=f,f=function(a,c){var b=this.checked;if(c)this.checked=c.jb!==!0;e.call(this,a);this.checked=b};jQuery(c).bind(b,f)}else typeof c.addEventListener=="function"?c.addEventListener(b,f,!1):typeof c.attachEvent!="undefined"?c.attachEvent("on"+b,function(a){f.call(c,a)}):d(Error("Browser doesn't support addEventListener or attachEvent"))},Za:function(c,b){(!c||!c.nodeType)&&d(Error("element must be a DOM node when calling triggerEvent"));if(typeof jQuery!="undefined"){var f=
[];a(c,b)&&f.push({jb:c.checked});jQuery(c).trigger(b,f)}else if(typeof document.createEvent=="function")typeof c.dispatchEvent=="function"?(f=document.createEvent(h[b]||"HTMLEvents"),f.initEvent(b,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,c),c.dispatchEvent(f)):d(Error("The supplied element doesn't support dispatchEvent"));else if(typeof c.fireEvent!="undefined"){if(b=="click"&&c.tagName=="INPUT"&&(c.type.toLowerCase()=="checkbox"||c.type.toLowerCase()=="radio"))c.checked=c.checked!==!0;c.fireEvent("on"+
b)}else d(Error("Browser doesn't support triggering events"))},e:function(a){return p.Z(a)?a():a},ob:function(a,c){return p.a.o((a.className||"").split(/\s+/),c)>=0},Wa:function(a,c,b){var f=p.a.ob(a,c);if(b&&!f)a.className=(a.className||"")+" "+c;else if(f&&!b){for(var b=(a.className||"").split(/\s+/),f="",e=0;e<b.length;e++)b[e]!=c&&(f+=b[e]+" ");a.className=p.a.z(f)}},Ib:function(a,c){for(var a=p.a.e(a),c=p.a.e(c),b=[],f=a;f<=c;f++)b.push(f);return b},ta:function(a){for(var c=[],b=0,f=a.length;b<
f;b++)c.push(a[b]);return c},ra:b,yb:c,Ia:function(a,c){for(var b=p.a.ta(a.getElementsByTagName("INPUT")).concat(p.a.ta(a.getElementsByTagName("TEXTAREA"))),f=typeof c=="string"?function(a){return a.name===c}:function(a){return c.test(a.name)},e=[],h=b.length-1;h>=0;h--)f(b[h])&&e.push(b[h]);return e},T:function(a){return typeof a=="string"&&(a=p.a.z(a))?window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))():n},za:function(a){(typeof JSON=="undefined"||typeof JSON.stringify==
"undefined")&&d(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(p.a.e(a))},Gb:function(a,c,b){var b=b||{},f=b.params||{},e=b.includeFields||this.Ga,h=a;if(typeof a=="object"&&a.tagName=="FORM")for(var h=a.action,i=e.length-1;i>=0;i--)for(var g=p.a.Ia(a,e[i]),m=g.length-1;m>=0;m--)f[g[m].name]=g[m].value;var c=p.a.e(c),
j=document.createElement("FORM");j.style.display="none";j.action=h;j.method="post";for(var u in c)a=document.createElement("INPUT"),a.name=u,a.value=p.a.za(p.a.e(c[u])),j.appendChild(a);for(u in f)a=document.createElement("INPUT"),a.name=u,a.value=f[u],j.appendChild(a);document.body.appendChild(j);b.submitter?b.submitter(j):j.submit();setTimeout(function(){j.parentNode.removeChild(j)},0)}}};p.b("ko.utils",p.a);p.b("ko.utils.arrayForEach",p.a.n);p.b("ko.utils.arrayFirst",p.a.gb);
p.b("ko.utils.arrayFilter",p.a.ia);p.b("ko.utils.arrayGetDistinctValues",p.a.ja);p.b("ko.utils.arrayIndexOf",p.a.o);p.b("ko.utils.arrayMap",p.a.ka);p.b("ko.utils.arrayPushAll",p.a.Q);p.b("ko.utils.arrayRemoveItem",p.a.la);p.b("ko.utils.fieldsIncludedWithJsonPost",p.a.Ga);p.b("ko.utils.getElementsHavingAttribute",p.a.Ha);p.b("ko.utils.getFormFields",p.a.Ia);p.b("ko.utils.postJson",p.a.Gb);p.b("ko.utils.parseJson",p.a.T);p.b("ko.utils.registerEventHandler",p.a.N);p.b("ko.utils.stringifyJson",p.a.za);
p.b("ko.utils.range",p.a.Ib);p.b("ko.utils.toggleDomNodeCssClass",p.a.Wa);p.b("ko.utils.triggerEvent",p.a.Za);p.b("ko.utils.unwrapObservable",p.a.e);Function.prototype.bind||(Function.prototype.bind=function(a){var e=this,b=Array.prototype.slice.call(arguments),a=b.shift();return function(){return e.apply(a,b.concat(Array.prototype.slice.call(arguments)))}});
p.a.l=new function(){var a=0,e="__ko__"+(new Date).getTime(),b={};return{get:function(a,b){var e=p.a.l.getAll(a,!1);return e===k?k:e[b]},set:function(a,b,e){e===k&&p.a.l.getAll(a,!1)===k||(p.a.l.getAll(a,!0)[b]=e)},getAll:function(c,f){var h=c[e];if(!h){if(!f)return;h=c[e]="ko"+a++;b[h]={}}return b[h]},clear:function(a){var f=a[e];f&&(delete b[f],a[e]=n)}}};
p.a.K=new function(){function a(a,f){var e=p.a.l.get(a,b);e===k&&f&&(e=[],p.a.l.set(a,b,e));return e}function e(c){sko.I(c);var b=a(c,!1);if(b)for(var b=b.slice(0),e=0;e<b.length;e++)b[e](c);p.a.l.clear(c);typeof jQuery=="function"&&typeof jQuery.cleanData=="function"&&jQuery.cleanData([c])}var b="__ko_domNodeDisposal__"+(new Date).getTime();return{Ea:function(c,b){typeof b!="function"&&d(Error("Callback must be a function"));a(c,!0).push(b)},Qa:function(c,f){var e=a(c,!1);e&&(p.a.la(e,f),e.length==
0&&p.a.l.set(c,b,k))},I:function(a){if(!(a.nodeType!=1&&a.nodeType!=9)){e(a);var b=[];p.a.Q(b,a.getElementsByTagName("*"));for(var a=0,h=b.length;a<h;a++)e(b[a])}},removeNode:function(a){p.I(a);a.parentNode&&a.parentNode.removeChild(a)}}};p.I=p.a.K.I;p.removeNode=p.a.K.removeNode;p.b("ko.cleanNode",p.I);p.b("ko.removeNode",p.removeNode);p.b("ko.utils.domNodeDisposal",p.a.K);p.b("ko.utils.domNodeDisposal.addDisposeCallback",p.a.K.Ea);p.b("ko.utils.domNodeDisposal.removeDisposeCallback",p.a.K.Qa);
p.a.Fb=function(a){if(typeof jQuery!="undefined")a=jQuery.clean([a]);else{var e=p.a.z(a).toLowerCase(),b=document.createElement("div"),e=e.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!e.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!e.indexOf("<td")||!e.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];for(b.innerHTML=e[1]+a+e[2];e[0]--;)b=b.lastChild;a=p.a.ta(b.childNodes)}return a};
p.a.Ob=function(a,e){p.a.oa(a);if(e!==n&&e!==k)if(typeof e!="string"&&(e=e.toString()),typeof jQuery!="undefined")jQuery(a).html(e);else for(var b=p.a.Fb(e),c=0;c<b.length;c++)a.appendChild(b[c])};
p.A=function(){function a(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function e(a,b){if(a)if(a.nodeType==8){var h=p.A.Na(a.nodeValue);h!=n&&b.push({nb:a,Cb:h})}else if(a.nodeType==1)for(var h=0,g=a.childNodes,i=g.length;h<i;h++)e(g[h],b)}var b={};return{ua:function(c){typeof c!="function"&&d(Error("You can only pass a function to ko.memoization.memoize()"));var f=a()+a();b[f]=c;return"<\!--[ko_memo:"+f+"]--\>"},$a:function(a,f){var e=b[a];e===k&&d(Error("Couldn't find any memo with ID "+
a+". Perhaps it's already been unmemoized."));try{return e.apply(n,f||[]),!0}finally{delete b[a]}},ab:function(a,b){var h=[];e(a,h);for(var g=0,i=h.length;g<i;g++){var m=h[g].nb,j=[m];b&&p.a.Q(j,b);p.A.$a(h[g].Cb,j);m.nodeValue="";m.parentNode&&m.parentNode.removeChild(m)}},Na:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:n}}}();p.b("ko.memoization",p.A);p.b("ko.memoization.memoize",p.A.ua);p.b("ko.memoization.unmemoize",p.A.$a);p.b("ko.memoization.parseMemoText",p.A.Na);
p.b("ko.memoization.unmemoizeDomNodeAndDescendants",p.A.ab);p.Ub=function(a,e){this.ib=a;this.v=function(){this.xb=!0;e()}.bind(this);p.s(this,"dispose",this.v)};p.Aa=function(){var a=[];this.C=function(e,b){var c=b?e.bind(b):e,f=new p.Ub(c,function(){p.a.la(a,f)});a.push(f);return f};this.S=function(e){p.a.n(a.slice(0),function(a){a&&a.xb!==!0&&a.ib(e)})};this.ub=function(){return a.length};p.s(this,"subscribe",this.C);p.s(this,"notifySubscribers",this.S);p.s(this,"getSubscriptionsCount",this.ub)};
p.La=function(a){return typeof a.C=="function"&&typeof a.S=="function"};p.b("ko.subscribable",p.Aa);p.b("ko.isSubscribable",p.La);p.V=function(){var a=[];return{hb:function(){a.push([])},end:function(){return a.pop()},Pa:function(e){p.La(e)||d("Only subscribable things can act as dependencies");a.length>0&&a[a.length-1].push(e)}}}();var x={undefined:!0,"boolean":!0,number:!0,string:!0};function y(a,e){return a===n||typeof a in x?a===e:!1}
p.t=function(a){function e(){if(arguments.length>0){if(!e.equalityComparer||!e.equalityComparer(b,arguments[0]))b=arguments[0],e.S(b);return this}else return p.V.Pa(e),b}var b=a;e.H=p.t;e.ea=function(){e.S(b)};e.equalityComparer=y;p.Aa.call(e);p.s(e,"valueHasMutated",e.ea);return e};p.Z=function(a){return a===n||a===k||a.H===k?!1:a.H===p.t?!0:p.Z(a.H)};p.$=function(a){return typeof a=="function"&&a.H===p.t?!0:typeof a=="function"&&a.H===p.k&&a.vb?!0:!1};p.b("ko.observable",p.t);
p.b("ko.isObservable",p.Z);p.b("ko.isWriteableObservable",p.$);
p.Eb=function(a){arguments.length==0&&(a=[]);a!==n&&a!==k&&!("length"in a)&&d(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var e=new p.t(a);p.a.n("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){e[a]=function(){var c=e(),c=c[a].apply(c,arguments);e.ea();return c}});p.a.n(["slice"],function(a){e[a]=function(){var c=e();return c[a].apply(c,arguments)}});e.remove=function(a){for(var c=e(),f=[],h=[],g=typeof a=="function"?
a:function(c){return c===a},i=0,m=c.length;i<m;i++){var j=c[i];g(j)?h.push(j):f.push(j)}e(f);return h};e.Kb=function(a){if(a===k){var c=e();e([]);return c}return!a?[]:e.remove(function(c){return p.a.o(a,c)>=0})};e.ma=function(a){for(var c=e(),f=typeof a=="function"?a:function(c){return c===a},h=c.length-1;h>=0;h--)f(c[h])&&(c[h]._destroy=!0);e.ea()};e.mb=function(a){return a===k?e.ma(function(){return!0}):!a?[]:e.ma(function(c){return p.a.o(a,c)>=0})};e.indexOf=function(a){var c=e();return p.a.o(c,
a)};e.replace=function(a,c){var f=e.indexOf(a);f>=0&&(e()[f]=c,e.ea())};p.s(e,"remove",e.remove);p.s(e,"removeAll",e.Kb);p.s(e,"destroy",e.ma);p.s(e,"destroyAll",e.mb);p.s(e,"indexOf",e.indexOf);return e};p.b("ko.observableArray",p.Eb);
p.k=function(a,e,b){function c(){p.a.n(o,function(a){a.v()});o=[]}function f(a){c();p.a.n(a,function(a){o.push(a.C(h))})}function h(){if(m&&typeof b.disposeWhen=="function"&&b.disposeWhen())g.v();else{try{p.V.hb(),i=b.owner?b.read.call(b.owner):b.read()}finally{var a=p.a.ja(p.V.end());f(a)}g.S(i);m=!0}}function g(){if(arguments.length>0)if(typeof b.write==="function"){var a=arguments[0];b.owner?b.write.call(b.owner,a):b.write(a)}else d("Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
else return m||h(),p.V.Pa(g),i}var i,m=!1;a&&typeof a=="object"?b=a:(b=b||{},b.read=a||b.read,b.owner=e||b.owner);typeof b.read!="function"&&d("Pass a function that returns the value of the dependentObservable");var j=typeof b.disposeWhenNodeIsRemoved=="object"?b.disposeWhenNodeIsRemoved:n,l=n;if(j){l=function(){g.v()};p.a.K.Ea(j,l);var q=b.disposeWhen;b.disposeWhen=function(){return!p.a.na(j)||typeof q=="function"&&q()}}var o=[];g.H=p.k;g.tb=function(){return o.length};g.vb=typeof b.write==="function";
g.v=function(){j&&p.a.K.Qa(j,l);c()};p.Aa.call(g);b.deferEvaluation!==!0&&h();p.s(g,"dispose",g.v);p.s(g,"getDependenciesCount",g.tb);return g};p.k.H=p.t;p.b("ko.dependentObservable",p.k);
(function(){function a(c,f,h){h=h||new b;c=f(c);if(!(typeof c=="object"&&c!==n&&c!==k))return c;var g=c instanceof Array?[]:{};h.save(c,g);e(c,function(b){var e=f(c[b]);switch(typeof e){case "boolean":case "number":case "string":case "function":g[b]=e;break;case "object":case "undefined":var j=h.get(e);g[b]=j!==k?j:a(e,f,h)}});return g}function e(a,b){if(a instanceof Array)for(var e=0;e<a.length;e++)b(e);else for(e in a)b(e)}function b(){var a=[],b=[];this.save=function(e,g){var i=p.a.o(a,e);i>=0?
b[i]=g:(a.push(e),b.push(g))};this.get=function(e){e=p.a.o(a,e);return e>=0?b[e]:k}}p.Va=function(c){arguments.length==0&&d(Error("When calling ko.toJS, pass the object you want to convert."));return a(c,function(a){for(var c=0;p.Z(a)&&c<10;c++)a=a();return a})};p.toJSON=function(a){a=p.Va(a);return p.a.za(a)}})();p.b("ko.toJS",p.Va);p.b("ko.toJSON",p.toJSON);
p.m={B:function(a){return a.tagName=="OPTION"?a.__ko__hasDomDataOptionValue__===!0?p.a.l.get(a,p.d.options.va):a.getAttribute("value"):a.tagName=="SELECT"?a.selectedIndex>=0?p.m.B(a.options[a.selectedIndex]):k:a.value},fa:function(a,e){if(a.tagName=="OPTION")switch(typeof e){case "string":case "number":p.a.l.set(a,p.d.options.va,k);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=e;break;default:p.a.l.set(a,p.d.options.va,e),a.__ko__hasDomDataOptionValue__=!0,a.value=
""}else if(a.tagName=="SELECT")for(var b=a.options.length-1;b>=0;b--){if(p.m.B(a.options[b])==e){a.selectedIndex=b;break}}else{if(e===n||e===k)e="";a.value=e}}};p.b("ko.selectExtensions",p.m);p.b("ko.selectExtensions.readValue",p.m.B);p.b("ko.selectExtensions.writeValue",p.m.fa);
p.G=function(){function a(a,c){return a.replace(b,function(a,b){return c[b]})}function e(a){return p.a.o(f,p.a.z(a).toLowerCase())>=0?!1:a[0]=="<"&&a[a.length-1]==">"?!0:a.match(c)!==n}var b=/\[ko_token_(\d+)\]/g,c=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,f=["true","false"];return{T:function(c){c=p.a.z(c);if(c.length<3)return{};for(var b=[],e=n,f,j=c.charAt(0)=="{"?1:0;j<c.length;j++){var l=c.charAt(j);if(e===n)switch(l){case '"':case "'":case "<":e=j;f=">";break;case "/":e=
j;f=l;break;case "{":e=j;f="}";break;case "[":e=j,f="]"}else if(l==f){l=c.substring(e,j+1);b.push(l);var q="[ko_token_"+(b.length-1)+"]",c=c.substring(0,e)+q+c.substring(j+1);j-=l.length-q.length;e=n}}e={};c=c.split(",");f=0;for(j=c.length;f<j;f++){var q=c[f],o=q.indexOf(":");o>0&&o<q.length-1&&(l=p.a.z(q.substring(0,o)),q=p.a.z(q.substring(o+1)),l.charAt(0)=="{"&&(l=l.substring(1)),q.charAt(q.length-1)=="}"&&(q=q.substring(0,q.length-1)),l=p.a.z(a(l,b)),q=p.a.z(a(q,b)),e[l]=q)}return e},wb:function(a){var c=
p.G.T(a),b=[],f;for(f in c){var j=c[f];e(j)&&(b.length>0&&b.push(", "),b.push(f+" : function(__ko_value) { "+j+" = __ko_value; }"))}b.length>0&&(a=a+", '_ko_property_writers' : { "+b.join("")+" } ");return a},qa:function(a){var a=p.G.T(a),c=[],b="",f=!0,j;for(j in a){var l=a[j];e(l)&&(c.length>0&&c.push(", "),l[0]==="<"&&l[l.length-1]===">"&&j!=="about"&&j!=="rel"?c.push(j+" : function(__ko_value) { sko.current().tryProperty('"+l+"') = __ko_value; }"):l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=
n&&j!=="about"&&j!=="rel"?c.push(j+" : function(__ko_value) { sko.current().tryProperty('"+l+"') = __ko_value; }"):l[0]==="<"&&l[l.length-1]===">"&&(j==="about"||j==="rel")||l[0]==="["&&l[l.length-1]==="]"&&(j==="about"||j==="rel")||c.push(j+" : function(__ko_value) { "+l+" = __ko_value; }"));f?f=!1:b+=", ";b=l[0]==="<"&&l[l.length-1]===">"&&j!=="about"&&j!=="rel"?b+j+": sko.current().tryProperty('"+l+"')":l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=n&&j!=="about"&&j!=="rel"?b+j+": sko.current().tryProperty('"+
l+"')":l[0]==="<"&&l[l.length-1]===">"&&(j==="about"||j==="rel")?b+j+": '"+l.slice(1,l.length-1)+"'":l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=n&&(j==="about"||j==="rel")?b+j+": sko.rdf.prefixes.resolve('"+l.slice(1,l.length-1)+"')":b+j+": "+l}a=b;c.length>0&&(a=a+", '_ko_property_writers' : { "+c.join("")+" } ");return a}}}();p.b("ko.jsonExpressionRewriting",p.G);p.b("ko.jsonExpressionRewriting.parseJson",p.G.T);p.b("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",p.G.wb);
p.b("ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson",p.G.qa);
(function(){function a(a,b){try{var c=" { "+p.G.qa(a)+" } ";return p.a.sb(c,b===n?window:b)}catch(f){d(Error("Unable to parse binding attribute.\nMessage: "+f+";\nAttribute value: "+a))}}p.d={};p.ha=function(e,b,c,f){function h(a){return function(){return m[a]}}function g(){return m}var i=!0,f=f||"data-bind",m;new p.k(function(){sko.Vb=function(){return sko.J(e)};m=(typeof b=="function"?b():b)||a(e.getAttribute(f),c);if(i)for(var j in m)p.d[j]&&typeof p.d[j].init=="function"&&(0,p.d[j].init)(e,h(j),
g,c);for(j in m)p.d[j]&&typeof p.d[j].update=="function"&&(0,p.d[j].update)(e,h(j),g,c)},n,{disposeWhenNodeIsRemoved:e});i=!1};p.ga=function(a,b){b&&b.nodeType==k&&d(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)"));var b=b||window.document.body,c=p.a.Ha(b,"data-bind");p.a.n(c,function(c){p.ha(c,n,a)})};p.b("ko.bindingHandlers",p.d);p.b("ko.applyBindings",p.ga);p.b("ko.applyBindingsToNode",
p.ha)})();p.a.n(["click"],function(a){p.d[a]={init:function(e,b,c,f){return p.d.event.init.call(this,e,function(){var c={};c[a]=b();return c},c,f)}}});p.d.event={init:function(a,e,b,c){var f=e()||{},h;for(h in f)(function(){var f=h;typeof f=="string"&&p.a.N(a,f,function(a){var h,j=e()[f];if(j){var l=b();try{h=j.apply(c,arguments)}finally{if(h!==!0)a.preventDefault?a.preventDefault():a.returnValue=!1}if(l[f+"Bubble"]===!1)a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()}})})()}};
p.d.submit={init:function(a,e,b,c){typeof e()!="function"&&d(Error("The value for a submit binding must be a function to invoke on submit"));p.a.N(a,"submit",function(b){var h,g=e();try{h=g.call(c,a)}finally{if(h!==!0)b.preventDefault?b.preventDefault():b.returnValue=!1}})}};p.d.visible={update:function(a,e){var b=p.a.e(e()),c=a.style.display!="none";if(b&&!c)a.style.display="";else if(!b&&c)a.style.display="none"}};
p.d.enable={update:function(a,e){var b=p.a.e(e());if(b&&a.disabled)a.removeAttribute("disabled");else if(!b&&!a.disabled)a.disabled=!0}};p.d.disable={update:function(a,e){p.d.enable.update(a,function(){return!p.a.e(e())})}};
p.d.value={init:function(a,e,b){var c=["change"],f=b().valueUpdate;f&&(typeof f=="string"&&(f=[f]),p.a.Q(c,f),c=p.a.ja(c));p.a.n(c,function(c){var f=!1;p.a.Tb(c,"after")&&(f=!0,c=c.substring(5));var i=f?function(a){setTimeout(a,0)}:function(a){a()};p.a.N(a,c,function(){i(function(){var c=e(),f=p.m.B(a);p.$(c)?c(f):(c=b(),c._ko_property_writers&&c._ko_property_writers.value&&c._ko_property_writers.value(f))})})})},update:function(a,e){var b=p.a.e(e()),c=p.m.B(a),f=b!=c;b===0&&c!==0&&c!=="0"&&(f=!0);
f&&(c=function(){p.m.fa(a,b)},c(),a.tagName=="SELECT"&&setTimeout(c,0));a.tagName=="SELECT"&&(c=p.m.B(a),c!==b&&p.a.Za(a,"change"))}};
p.d.options={update:function(a,e,b){a.tagName!="SELECT"&&d(Error("options binding applies only to SELECT elements"));var c=p.a.ka(p.a.ia(a.childNodes,function(a){return a.tagName&&a.tagName=="OPTION"&&a.selected}),function(a){return p.m.B(a)||a.innerText||a.textContent}),f=a.scrollTop,h=p.a.e(e());p.a.oa(a);if(h){var g=b();typeof h.length!="number"&&(h=[h]);if(g.optionsCaption){var i=document.createElement("OPTION");i.innerHTML=g.optionsCaption;p.m.fa(i,k);a.appendChild(i)}b=0;for(e=h.length;b<e;b++){var i=
document.createElement("OPTION"),m=typeof g.optionsValue=="string"?h[b][g.optionsValue]:h[b],m=p.a.e(m);p.m.fa(i,m);var j=g.optionsText;optionText=typeof j=="function"?j(h[b]):typeof j=="string"?h[b][j]:m;if(optionText===n||optionText===k)optionText="";optionText=p.a.e(optionText).toString();typeof i.innerText=="string"?i.innerText=optionText:i.textContent=optionText;a.appendChild(i)}h=a.getElementsByTagName("OPTION");b=g=0;for(e=h.length;b<e;b++)p.a.o(c,p.m.B(h[b]))>=0&&(p.a.Ta(h[b],!0),g++);if(f)a.scrollTop=
f}}};p.d.options.va="__ko.bindingHandlers.options.optionValueDomData__";
p.d.selectedOptions={Ja:function(a){for(var e=[],a=a.childNodes,b=0,c=a.length;b<c;b++){var f=a[b];f.tagName=="OPTION"&&f.selected&&e.push(p.m.B(f))}return e},init:function(a,e,b){p.a.N(a,"change",function(){var a=e();p.$(a)?a(p.d.selectedOptions.Ja(this)):(a=b(),a._ko_property_writers&&a._ko_property_writers.value&&a._ko_property_writers.value(p.d.selectedOptions.Ja(this)))})},update:function(a,e){a.tagName!="SELECT"&&d(Error("values binding applies only to SELECT elements"));var b=p.a.e(e());if(b&&
typeof b.length=="number")for(var c=a.childNodes,f=0,h=c.length;f<h;f++){var g=c[f];g.tagName=="OPTION"&&p.a.Ta(g,p.a.o(b,p.m.B(g))>=0)}}};p.d.text={update:function(a,e){var b=p.a.e(e());if(b===n||b===k)b="";typeof a.innerText=="string"?a.innerText=b:a.textContent=b}};p.d.html={update:function(a,e){var b=p.a.e(e());p.a.Ob(a,b)}};p.d.css={update:function(a,e){var b=p.a.e(e()||{}),c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);p.a.Wa(a,c,f)}}};
p.d.style={update:function(a,e){var b=p.a.e(e()||{}),c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);a.style[c]=f||""}}};p.d.uniqueName={init:function(a,e){if(e())a.name="ko_unique_"+ ++p.d.uniqueName.lb,p.a.ra&&a.mergeAttributes(document.createElement("<input name='"+a.name+"'/>"),!1)}};p.d.uniqueName.lb=0;
p.d.checked={init:function(a,e,b){p.a.N(a,"click",function(){var c;if(a.type=="checkbox")c=a.checked;else if(a.type=="radio"&&a.checked)c=a.value;else return;var f=e();a.type=="checkbox"&&p.a.e(f)instanceof Array?(c=p.a.o(p.a.e(f),a.value),a.checked&&c<0?f.push(a.value):!a.checked&&c>=0&&f.splice(c,1)):p.$(f)?f()!==c&&f(c):(f=b(),f._ko_property_writers&&f._ko_property_writers.checked&&f._ko_property_writers.checked(c))});a.type=="radio"&&!a.name&&p.d.uniqueName.init(a,function(){return!0})},update:function(a,
e){var b=p.a.e(e());if(a.type=="checkbox")a.checked=b instanceof Array?p.a.o(b,a.value)>=0:b,b&&p.a.ra&&a.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),!1);else if(a.type=="radio")a.checked=a.value==b,a.value==b&&(p.a.ra||p.a.yb)&&a.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),!1)}};
p.d.attr={update:function(a,e){var b=p.a.e(e())||{},c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);f===!1||f===n||f===k?a.removeAttribute(c):a.setAttribute(c,f.toString())}}};
p.Ba=function(){this.renderTemplate=function(){d("Override renderTemplate in your ko.templateEngine subclass")};this.isTemplateRewritten=function(){d("Override isTemplateRewritten in your ko.templateEngine subclass")};this.rewriteTemplate=function(){d("Override rewriteTemplate in your ko.templateEngine subclass")};this.createJavaScriptEvaluatorBlock=function(){d("Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass")}};p.b("ko.templateEngine",p.Ba);
p.da=function(){var a=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;return{rb:function(a,b){b.isTemplateRewritten(a)||b.rewriteTemplate(a,function(a){return p.da.Db(a,b)})},Db:function(e,b){return e.replace(a,function(a,e,h,g,i,m,j){a=p.G.qa(j);return b.createJavaScriptEvaluatorBlock("ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {                     return (function() { return { "+a+" } })()                 })")+e})},
eb:function(a){return p.A.ua(function(b,c){b.nextSibling&&sko.Ya(b.nextSibling,c,function(){sko.Xa(b.nextSibling,c,function(){p.ha(b.nextSibling,a,c)})})})}}}();p.b("ko.templateRewriting",p.da);p.b("ko.templateRewriting.applyMemoizedBindingsToNextSibling",p.da.eb);
(function(){function a(a,c,f,h,g){var i=p.a.e(h),g=g||{},m=g.templateEngine||e;p.da.rb(f,m);f=m.renderTemplate(f,i,g);(typeof f.length!="number"||f.length>0&&typeof f[0].nodeType!="number")&&d("Template engine must return an array of DOM nodes");switch(c){case "replaceChildren":p.a.Nb(a,f);break;case "replaceNode":p.a.Ra(a,f);break;case "ignoreTargetNode":break;default:d(Error("Unknown renderMode: "+c))}f&&p.a.n(f,function(a){p.A.ab(a,[h])});g.afterRender&&g.afterRender(f,h);return f}var e;p.Ua=function(a){a!=
k&&!(a instanceof p.Ba)&&d("templateEngine must inherit from ko.templateEngine");e=a};p.wa=function(b,c,f,h,g){f=f||{};(f.templateEngine||e)==k&&d("Set a template engine before calling renderTemplate");g=g||"replaceChildren";if(h){var i=h.nodeType?h:h.length>0?h[0]:n;return new p.k(function(){var e=typeof b=="function"?b(c):b,e=a(h,g,e,c,f);g=="replaceNode"&&(h=e,i=h.nodeType?h:h.length>0?h[0]:n)},n,{disposeWhen:function(){return!i||!p.a.na(i)},disposeWhenNodeIsRemoved:i&&g=="replaceNode"?i.parentNode:
i})}else return p.A.ua(function(a){p.wa(b,c,f,a,"replaceNode")})};p.Lb=function(b,c,e,h){return new p.k(function(){var g=p.a.e(c)||[];typeof g.length=="undefined"&&(g=[g]);g=p.a.ia(g,function(a){return e.includeDestroyed||!a._destroy});p.a.Sa(h,g,function(c){var g=typeof b=="function"?b(c):b;return a(n,"ignoreTargetNode",g,c,e)},e)},n,{disposeWhenNodeIsRemoved:h})};p.d.template={update:function(a,c,e,h){c=p.a.e(c());e=typeof c=="string"?c:c.name;if(typeof c.foreach!="undefined")h=p.Lb(e,c.foreach||
[],{templateOptions:c.templateOptions,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,includeDestroyed:c.includeDestroyed,afterRender:c.afterRender},a);else var g=c.data,h=p.wa(e,typeof g=="undefined"?h:g,{templateOptions:c.templateOptions,afterRender:c.afterRender},a);(c=p.a.l.get(a,"__ko__templateSubscriptionDomDataKey__"))&&typeof c.v=="function"&&c.v();p.a.l.set(a,"__ko__templateSubscriptionDomDataKey__",h)}}})();p.b("ko.setTemplateEngine",p.Ua);p.b("ko.renderTemplate",p.wa);
p.a.R=function(a,e,b){if(b===k)return p.a.R(a,e,1)||p.a.R(a,e,10)||p.a.R(a,e,Number.MAX_VALUE);else{for(var a=a||[],e=e||[],c=a,f=e,h=[],g=0;g<=f.length;g++)h[g]=[];for(var g=0,i=Math.min(c.length,b);g<=i;g++)h[0][g]=g;g=1;for(i=Math.min(f.length,b);g<=i;g++)h[g][0]=g;for(var i=c.length,m,j=f.length,g=1;g<=i;g++){m=Math.max(1,g-b);for(var l=Math.min(j,g+b);m<=l;m++)h[m][g]=c[g-1]===f[m-1]?h[m-1][g-1]:Math.min(h[m-1][g]===k?Number.MAX_VALUE:h[m-1][g]+1,h[m][g-1]===k?Number.MAX_VALUE:h[m][g-1]+1)}b=
a.length;c=e.length;f=[];g=h[c][b];if(g===k)h=n;else{for(;b>0||c>0;){i=h[c][b];j=c>0?h[c-1][b]:g+1;l=b>0?h[c][b-1]:g+1;m=c>0&&b>0?h[c-1][b-1]:g+1;if(j===k||j<i-1)j=g+1;if(l===k||l<i-1)l=g+1;m<i-1&&(m=g+1);j<=l&&j<m?(f.push({status:"added",value:e[c-1]}),c--):(l<j&&l<m?f.push({status:"deleted",value:a[b-1]}):(f.push({status:"retained",value:a[b-1]}),c--),b--)}h=f.reverse()}return h}};p.b("ko.utils.compareArrays",p.a.R);
(function(){function a(a,b,c){var f=[],a=p.k(function(){var a=b(c)||[];f.length>0&&p.a.Ra(f,a);f.splice(0,f.length);p.a.Q(f,a)},n,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return f.length==0||!p.a.na(f[0])}});return{Bb:f,k:a}}p.a.Sa=function(e,b,c,f){for(var b=b||[],f=f||{},h=p.a.l.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===k,g=p.a.l.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],i=p.a.ka(g,function(a){return a.fb}),m=p.a.R(i,b),b=[],j=0,l=[],i=[],
q=n,o=0,v=m.length;o<v;o++)switch(m[o].status){case "retained":var r=g[j];b.push(r);r.W.length>0&&(q=r.W[r.W.length-1]);j++;break;case "deleted":g[j].k.v();p.a.n(g[j].W,function(a){l.push({element:a,index:o,value:m[o].value});q=a});j++;break;case "added":var s=a(e,c,m[o].value),r=s.Bb;b.push({fb:m[o].value,W:r,k:s.k});for(var s=0,w=r.length;s<w;s++){var t=r[s];i.push({element:t,index:o,value:m[o].value});q==n?e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t):q.nextSibling?e.insertBefore(t,
q.nextSibling):e.appendChild(t);q=t}}p.a.n(l,function(a){p.I(a.element)});c=!1;if(!h){if(f.afterAdd)for(o=0;o<i.length;o++)f.afterAdd(i[o].element,i[o].index,i[o].value);if(f.beforeRemove){for(o=0;o<l.length;o++)f.beforeRemove(l[o].element,l[o].index,l[o].value);c=!0}}c||p.a.n(l,function(a){a.element.parentNode&&a.element.parentNode.removeChild(a.element)});p.a.l.set(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult",b)}})();p.b("ko.utils.setDomNodeChildrenFromArrayMapping",p.a.Sa);
p.sa=function(){this.M=typeof jQuery=="undefined"||!jQuery.tmpl?0:jQuery.tmpl.tag?jQuery.tmpl.tag.tmpl&&jQuery.tmpl.tag.tmpl.open&&jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?3:2:1;this.getTemplateNode=function(a){var b=document.getElementById(a);b==n&&d(Error("Cannot find template with ID="+a));return b};var a=RegExp("__ko_apos__","g");this.renderTemplate=function(e,b,c){c=c||{};this.M==0&&d(Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details."));
if(this.M==1)return e='<script type="text/html">'+this.getTemplateNode(e).text+"<\/script>",b=jQuery.tmpl(e,b)[0].text.replace(a,"'"),jQuery.clean([b],document);if(!(e in jQuery.template)){var f=this.getTemplateNode(e).text;jQuery.template(e,f)}b=[b];b=jQuery.tmpl(e,b,c.templateOptions);b.appendTo(document.createElement("div"));jQuery.fragments={};return b};this.isTemplateRewritten=function(a){return a in jQuery.template?!0:this.getTemplateNode(a).zb===!0};this.rewriteTemplate=function(a,b){var c=
this.getTemplateNode(a),f=b(c.text);this.M==1&&(f=p.a.z(f),f=f.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g,function(a,c,b){return c.replace(/\'/g,"__ko_apos__")+b}));c.text=f;c.zb=!0};this.createJavaScriptEvaluatorBlock=function(a){return this.M==1?"{{= "+a+"}}":"{{ko_code ((function() { return "+a+" })()) }}"};this.cb=function(a,b){document.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")};p.s(this,"addTemplate",this.cb);this.M>1&&(jQuery.tmpl.tag.ko_code={open:(this.M<
3?"_":"__")+".push($1 || '');"})};p.sa.prototype=new p.Ba;p.Ua(new p.sa);p.b("ko.jqueryTmplTemplateEngine",p.sa);Utils={Pb:1E3,ya:0};Utils.Jb=function(a){Utils.ya===Utils.Pb?(Utils.ya=0,setTimeout(a,0)):(Utils.ya++,a())};Utils.repeat=function(a,e,b,c,f){arguments.length===4&&(f={});a<e?(f.Da=a,b(function(b,f){Utils.Jb(function(){Utils.repeat(a+1,e,b,c,f)})},f)):c(f)};SemanticKnockOut={};window.sko=SemanticKnockOut;sko.bb=!1;sko.log=function(a){sko.bb&&console.log(a)};
sko.Wb=function(){sko.f={};sko.P={};sko.O=0;sko.pa=0;sko.X={};var a=n;arguments.length===2?(sko.i=arguments[0],a=arguments[1],sko.U=sko.i.U,a(!0)):(a=arguments[0],rdfstore.create(function(e){sko.i=e;sko.U=sko.i.U;a(!0)}))};sko.Ca=0;sko.w=function(){var a="_:sko_"+sko.Ca;sko.Ca++;return a};sko.f={};sko.P={};sko.O=0;
sko.c=function(a,e,b){if(sko.c[a]!=n)b(a);else{var c=""+sko.O;sko.O++;a==n&&(a=sko.w());if(typeof a==="string"){var f=a;sko.i.L(sko.h(f),function(a,e){if(a){sko.log("FOUND RESOURCE: "+f);sko.log(e);sko.log(" FOR "+sko.h(f));sko.log(" ------------\> "+c+" : "+f);sko.f[c]=new sko.F(c,f,e);sko.c[c]=p.t(f);var i=sko.c[c].C(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+c+" new value -> "+a);a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.w());sko.i.L(sko.h(a),function(b,e){if(b){var f=
e.r()[0].ba.valueOf();sko.log(" ------------\> "+c+" : "+f+" 2");sko.f[c].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : "+a+" 3"),sko.f[c].c(a)})});sko.P[c]=i}b(c)})}else sko.c[c]=p.k({Oa:function(){var b=a();sko.log("*** OBSERVABLE READING DEPENDING NODE ABOT ID:"+c+" new value -> "+b);b==n&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),b=sko.w());return b},write:function(b){sko.log("*** OBSERVABLE WRITING DEPENDING NODE ABOT ID:"+c+" new value -> "+b);b==n&&
(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),b=sko.w());a(b)},Ma:e}),sko.i.L(sko.h(sko.c[c]()),function(a,e){if(a){sko.log(" ------------\> "+c+" : "+e+" 4");sko.f[c]=new sko.F(c,sko.c[c](),e);var f=sko.c[c].C(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+c+" new value -> "+a);a!=n?sko.i.L(sko.h(a),function(b,e){if(b)if(e.r().length>0){var f=e.r()[0].ba.j();sko.log(" ------------\> "+c+" : "+f+" 5");sko.f[c].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : "+
a+" 6"),sko.f[c].c(a);else sko.log("Error updating 3 resource for URI:"+a+" in SKO about node observer"),sko.log("*** NO RESOURCE FOR URI:"+a+" NEXT ID:"+c),sko.log(" ------------\> "+c+" : "+a+" 7"),sko.f[c].c(a)}):(sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : NEW BLANK  8"),sko.f[c].c(sko.w()))});sko.P[c]=f}b(c)})}};
sko.rel=function(a,e,b,c){var f=""+sko.O,h=n;sko.O++;if(typeof a==="string"){var g=sko.D(a),h=g;sko.c[f]=p.k({Oa:function(){sko.log("*** OBSERVABLE READING RELATED  DEPENDING NODE ABOT ID:"+f);var a=sko.J(jQuery(e).parent().r()[0]);sko.log(a);if(a!=n)if(sko.log(" ** about:"+a.c()),sko.log("*** Found parent resource: "+a.c()),a[g]){var c=a[g]();if(c!=n&&!sko.Ka(a[g]()))return c=sko.D(c),sko.f[f]==n||sko.f[f].c()!=c?(sko.log("*** found related resource: "+c),sko.i.L(sko.h(c),function(a,b){sko.log("CREATED NODE FOR ID "+
f+" AND URI: "+sko.h(c));sko.log(b);sko.log(" ------------\> "+f+" : "+c+" 8b");sko.f[f]=new sko.F(f,c,b)})):sko.log("*** Related resource hasn't changed"),c;else{if(c==n){sko.log("*** related resource is null");sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL");var b=sko.w();sko.log(" ** setting parent node related resource to "+b);a[g](b)}else sko.f[f]?(sko.log("*** setting new value for related resource "+b),sko.log(" ------------\> "+f+" : "+b+" 9"),sko.f[f].c(b)):sko.log("!! Should I create the new blank node?");
return b}}else sko.log("!!! parent resource doest not link to the related resource");else sko.log("!!! impossible to find parent resource")},write:function(a){a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.w());a=sko.D(a);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+a);var c=sko.J(jQuery(e).parent().r()[0]);c!=n?(sko.log("*** Found parent resource: "+c.c()),c[h]?(sko.log("*** Setting new related resource in parent resource found: "+a),c[h](a)):sko.log("!!! parent resource doest not link to the related resource")):
sko.log("!!! impossible to find parent resource")},Ma:b});b=sko.c[f].C(function(a){sko.log("*** OBSERVING RELATED NODE ABOT ID:"+f+" new value -> "+a);a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.w());a=sko.D(a);sko.c[f]()!=n?sko.h(a)!==sko.h(sko.c[f]())&&sko.i.L(sko.h(a),function(c,b){c?(b.r(),sko.log(" ------------\> "+f+" : "+g+" 10"),sko.f[f].c(g)):sko.log("Error updating 1 resource for URI:"+a+" in SKO about related node observer")}):sko.log("!! this resource is now null, should be removed from list of resources?")})}else sko.c[f]=
p.k({Oa:function(){var c=a(),c=sko.D(c);sko.log("*** OBSERVABLE READING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+c);c==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),c=sko.w());var b=sko.J(jQuery(e).parent().r()[0]);if(b!=n)if(sko.log("*** Found parent resource: "+b.c()),b[c]){var g=b[c]();sko.log("*** found related resource: "+g);sko.i.L(sko.h(g),function(a,c){sko.log(" ------------\> "+f+" : "+g+" 11");sko.f[f]=new sko.F(f,g,c)});return g}else sko.log("!!! parent resource doest not link to the related resource");
else sko.log("!!! impossible to find parent resource")},write:function(c){var c=sko.D(c),b=sko.J(jQuery(e).parent().r()[0]);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+c);c==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),c=sko.w());b!=n?(sko.log("*** Found parent resource: "+b.c()),b[a()]?(sko.log("*** Setting new related resource in parent resource found: "+c),b[a()](c),a(c)):sko.log("!!! parent resource doest not link to the related resource")):sko.log("!!! impossible to find parent resource")},
Ma:b}),b=sko.c[f].C(function(a){a=sko.D(a);sko.log("*** OBSERVING RELATED NODE (F) ABOT ID:"+f+" new value -> "+a);a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.w());sko.h(a)!=sko.h(sko.c[f]())?sko.i.L(sko.h(a),function(c,b){if(c){var e=b.r()[0].ba.valueOf();sko.log(" ------------\> "+f+" : "+e+" 12");sko.f[f].c(e)}else sko.log("Error updating  2 resource for URI:"+a+" in SKO about related node observer")}):sko.log("*** Related about resource hasn't changed")});sko.P[f]=b;c(f)};
sko.h=function(a){if(a[0]==="<"&&a[a.length-1]==">")return a.slice(1,a.length-1);else if(a.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=n)if(a=a.slice(1,a.length-1),resolved=sko.U.Hb.Mb(a),resolved==n)d("The CURIE "+a+" cannot be resolved");else return resolved;else return a};
sko.qb=function(a){if(a==n)return n;else if(a.Y&&a.Y==="Literal")if(a.q=="http://www.w3.org/2001/XMLSchema#integer"||a.q=="http://www.w3.org/2001/XMLSchema#decimal"||a.q=="http://www.w3.org/2001/XMLSchema#double"||a.q=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.q=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.q=="http://www.w3.org/2001/XMLSchema#long"||a.q=="http://www.w3.org/2001/XMLSchema#int"||a.q=="http://www.w3.org/2001/XMLSchema#short"||a.q=="http://www.w3.org/2001/XMLSchema#byte"||
a.q=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.q=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.q=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.q=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.q=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.q=="http://www.w3.org/2001/XMLSchema#positiveInteger")return parseFloat(a.valueOf());else if(a.type==="http://www.w3.org/2001/XMLSchema#boolean")return a.valueOf()==="true"||a.valueOf()===!0||a.valueOf()==="True";else if(a.type===
"http://www.w3.org/2001/XMLSchema#string")return a.valueOf();else if(a.type==="http://www.w3.org/2001/XMLSchema#dateTime")return new Date(a.valueOf());else{if(a.type==n)return a.valueOf()}else return a.valueOf()};
sko.F=function(a,e,b){this.xa=a;this.g={};this.ca=[];var c=this,e=sko.D(e);b.forEach(function(a){sko.log(a);if(a.object.Y==="NamedNode")c.g[a.u.j()]=a.object.j(),c[a.u.j()]=p.t(a.object.j());else{if(a.object.Y==="Literal"){var b=sko.qb(a.object.valueOf());c.g[a.u.j()]=b;c[a.u.j()]=p.t(b)}else c.g[a.u.j()]=a.object.valueOf(),c[a.u.j()]=p.t(a.object.valueOf());c[sko.h(a.u.j())]=c[a.u.j()]}});this.c=p.t(e);this["@"]=this.c;this.aa=sko.F.Sb(this);c=this;this.ca.push(this.c.C(function(a){sko.log("SKO Resource new resource:"+
a);sko.log("*** STOP OBSERVING NODE STORE FOR "+c.c());sko.i.Rb(c.aa);if(a!=n&&a.indexOf("_:sko")!=0)sko.log("*** START OBSERVING NODE STORE FOR "+c.c()),sko.i.Qb(sko.h(a),c.aa);else{sko.log("*** nullifying resources");for(var b in c.g)c.g[b]=n;for(b in c.g)c[b](n)}}));sko.F.Ab(this);sko.i.Qb(sko.h(this.c()),c.aa)};sko.D=function(a){a[0]==="["&&a[a.length-1]==="]"&&(a=a.slice(1,a.length-1),resolved=sko.U.Hb.Mb(a),a==n?d("The CURIE "+a+" cannot be resolved"):a="<"+resolved+">");return a};
sko.Ka=function(a){return a.indexOf("_:sko")===0};
sko.I=function(a){sko.log("*** CLEANING!");sko.log(a);var e=jQuery(a).p("aboutId"),b=[];e!=n&&b.push(e);b=b.concat(sko.kb(a));for(a=0;a<b.length;a++)if(sko.f[b[a]]!=n){sko.log("*** DISCONNECTING "+b[a]);sko.log(sko.f[b[a]]);e=sko.f[b[a]];sko.log(" ** DISCONNECTING");sko.i.Rb(e.aa);sko.log(" ** disconnected STORE");for(var c=0;c<e.ca.length;c++)sko.log(" ** disconnecting subscription"),e.ca[c].v();sko.log(" ** disconnecting resource map");sko.P[e.xa].v();sko.log(" ** deleting");delete sko.f[e.xa];
delete sko.c[e.xa]}};
sko.F.Ab=function(a){function e(a,b){sko.log("*** subcribing to property "+b);var e=a[b].C(function(e){sko.log("*** received KO notification for property "+b+" -> "+e);if(a.g[b]!=n&&a.g[b]!==e&&!sko.Ka(e)){var h="DELETE { "+a.c()+" "+b+' "'+a.g[b]+'" }',h=h+" INSERT { "+a.c()+" "+b+' "'+e+'" }',h=h+" WHERE { "+a.c()+" "+b+' "'+a.g[b]+'" }',h=h.replace(/"</g,"<").replace(/>"/g,">");a.g[b]=e;sko.log("*** updating STORE: \n  "+h);sko.i.execute(h)}});a.ca.push(e)}for(var b in a.g)e(a,b)};
sko.F.Sb=function(a){return function(e){sko.log("*** received notification change from STORE in resource "+a.c());if(a.c()!=="_:sko_10"){var b={};sko.log("*** triples in STORE resource -> "+e.r().length);e.forEach(function(a){a.object.Y==="NamedNode"?(sko.log(" "+a.u.j()+" -> "+a.object.j()),b[a.u.j()]=a.object.j()):(sko.log(" "+a.u.j()+" -> "+a.object.valueOf()),b[a.u.j()]=a.object.valueOf())});var c={},e=[],f=[],h=[],g;for(g in a.g)b[g]!=n?(c[g]=b[g],a.g[g]!==b[g]&&f.push(g)):e.push(g);for(g in b)a.g[g]==
n&&(h.push(g),c[g]=b[g]);a.g=c;for(g=0;g<e.length;g++)sko.log("*** setting value to null "+e[g]+" -> NULL"),a[e[g]](n);for(g=0;g<f.length;g++)sko.log("*** updating value "+f[g]+" -> "+a.g[f[g]]),a[f[g]](a.g[f[g]]);for(g=0;g<h.length;g++)sko.log("*** new value "+h[g]+" -> "+a.g[h[g]]),a[h[g]]=p.t(a.g[h[g]]),a[sko.h(h[g])]=a[triple.u.j()];sko.log("*** END MODIFICATION")}}};
sko.Ya=function(a,e,b){function c(a,b){node=f[b.Da];var i=jQuery(node).p("about");i==n&&(dataBind=jQuery(node).p("data-bind"),dataBind!=n&&dataBind.indexOf("about:")!=-1&&(i=/s*([^ ]+)s*,?/.exec(dataBind.split("about:")[1])[0],i[i.length-1]===","&&(i=i.slice(0,i.length-1))));i!=n?(typeof i==="string"&&i[0]!=="<"&&i[i.length-1]!==">"&&i[0]!=="["&&i[i.length-1]!=="]"&&(i=e[i]),sko.c(i,e,function(e){jQuery(node).p("aboutId",e);a(c,b)})):a(c,b)}sko.log("** TRACING:");sko.log(a);var f=[];(jQuery(a).p("about")||
jQuery(a).p("data-bind"))&&f.push(a);a=jQuery(a).find("*[about], *[data-bind]").r();f=f.concat(a);Utils.repeat(0,f.length,c,function(){b()})};sko.J=function(a){sko.log("in current resource");sko.log(a);if(a==n)return sko.log("!!! top of DOM tree, About node not found"),n;var e=jQuery(a).p("aboutId");sko.log("about id:"+e);if(e)if(a=sko.c[e](),sko.log("uri:"+a),a!=n)return sko.f[e];else sko.log("!!! current resource is null: "+e);else return sko.log("recurring"),sko.J(jQuery(a).parent().r()[0])};
sko.Fa=function(a){sko.log("in current resource node");sko.log(a);if(a==n)return sko.log("!!! top of DOM tree, About node not found"),n;var e=jQuery(a).p("aboutId");sko.log("about id:"+e);if(e){var b=sko.c[e]();sko.log("uri:"+b);return b!=n?a:(sko.log("!!! current resource is null: "+e),n)}else return sko.log("recurring"),sko.Fa(jQuery(a).parent().r()[0])};sko.kb=function(a){return jQuery(a).find("*[aboutId]").map(function(){return jQuery(this).p("aboutId")})};
sko.Xa=function(a,e,b){function c(a,b){node=f[b.Da];var i=jQuery(node).p("rel");i==n&&(dataBind=jQuery(node).p("data-bind"),dataBind!=n&&dataBind.indexOf("rel:")!=-1&&(i=/s*([^ ]+)s*,?/.exec(dataBind.split("rel:")[1])[0],i[i.length-1]===","&&(i=i.slice(0,i.length-1))));i!=n?(typeof i==="string"&&i[0]!=="<"&&i[i.length-1]!==">"&&i[0]!=="["&&i[i.length-1]!=="]"&&(i=e[i]),jQuery(node).p("aboutId")==n?(sko.log("*** CREATING RELATED NODE"),sko.rel(i,node,e,function(e){jQuery(node).p("aboutId",e);a(c,b)})):
(sko.log("*** NODE IS ALREADY TRACED"),a(c,b))):a(c,b)}sko.log("*** TRACING RELATIONS:");a=sko.Fa(a)||a;sko.log("*** FOUND ROOT NODE TO LOOK FOR RELATIONS:");sko.log(a);var f=[];(jQuery(a).p("rel")||jQuery(a).p("data-bind"))&&f.push(a);a=jQuery(a).find("*[rel], *[data-bind]").r();f=f.concat(a);sko.log(" ** NODES TO LOOK FOR RELATED RESOURCES");sko.log(f);Utils.repeat(0,f.length,c,function(){b()})};sko.pa=0;sko.X={};
sko.$b=function(a){var a="select ?subject where "+a,e=""+sko.pa;sko.pa++;sko.X[e]=p.t([]);sko.log("*** WHERE QUERY: "+a);sko.i.Yb(a,function(a){var c=[];sko.log(" ** RESULTS!!!");for(var f=0;f<a.length;f++)sko.log(" ** ADDING VALUE "+a[f].ba.value),c.push("<"+a[f].ba.value+">");sko.log("** SETTING VALUE");sko.log(c);sko.X[e](c)});return sko.X[e]};sko.ga=function(a,e,b){typeof a==="string"&&(a=jQuery(a)[0]);sko.Ya(a,e,function(){sko.Xa(a,e,function(){p.ga(e,a);b!=n&&b()})})};sko.Xb=function(a){return sko.J(jQuery(a).r()[0])};
})(window);
