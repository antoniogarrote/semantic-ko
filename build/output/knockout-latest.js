// Knockout JavaScript library v1.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,undefined){
function d(a){throw a;}var k=void 0,n=null,p=window.ko={};p.b=function(a,e){for(var b=a.split("."),c=window,f=0;f<b.length-1;f++)c=c[b[f]];c[b[b.length-1]]=e};p.r=function(a,e,b){a[e]=b};
p.a=new function(){function a(a,c){if(a.tagName!="INPUT"||!a.type)return!1;if(c.toLowerCase()!="click")return!1;var b=a.type.toLowerCase();return b=="checkbox"||b=="radio"}var e=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,b=/MSIE 6/i.test(navigator.userAgent),c=/MSIE 7/i.test(navigator.userAgent),f={},h={};f[/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];f.MouseEvents="click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave".split(",");
for(var g in f){var i=f[g];if(i.length)for(var l=0,j=i.length;l<j;l++)h[i[l]]=g}return{Ea:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],m:function(a,c){for(var b=0,f=a.length;b<f;b++)c(a[b])},n:function(a,c){if(typeof a.indexOf=="function")return a.indexOf(c);for(var b=0,f=a.length;b<f;b++)if(a[b]===c)return b;return-1},eb:function(a,c,b){for(var f=0,e=a.length;f<e;f++)if(c.call(b,a[f]))return a[f];return n},ja:function(a,c){var b=p.a.n(a,c);b>=0&&a.splice(b,1)},ha:function(a){for(var a=
a||[],c=[],b=0,f=a.length;b<f;b++)p.a.n(c,a[b])<0&&c.push(a[b]);return c},ia:function(a,c){for(var a=a||[],b=[],f=0,e=a.length;f<e;f++)b.push(c(a[f]));return b},ga:function(a,c){for(var a=a||[],b=[],f=0,e=a.length;f<e;f++)c(a[f])&&b.push(a[f]);return b},P:function(a,c){for(var b=0,f=c.length;b<f;b++)a.push(c[b])},ma:function(a){for(;a.firstChild;)p.removeNode(a.firstChild)},Jb:function(a,c){p.a.ma(a);c&&p.a.m(c,function(c){a.appendChild(c)})},Pa:function(a,c){var b=a.nodeType?[a]:a;if(b.length>0){for(var f=
b[0],e=f.parentNode,g=0,h=c.length;g<h;g++)e.insertBefore(c[g],f);g=0;for(h=b.length;g<h;g++)p.removeNode(b[g])}},Ra:function(a,c){navigator.userAgent.indexOf("MSIE 6")>=0?a.setAttribute("selected",c):a.selected=c},Fa:function(a,c){if(!a||a.nodeType!=1)return[];var b=[];a.getAttribute(c)!==n&&b.push(a);for(var f=a.getElementsByTagName("*"),e=0,g=f.length;e<g;e++)f[e].getAttribute(c)!==n&&b.push(f[e]);return b},w:function(a){return(a||"").replace(e,"")},Ub:function(a,c){for(var b=[],f=(a||"").split(c),
e=0,g=f.length;e<g;e++){var h=p.a.w(f[e]);h!==""&&b.push(h)}return b},Pb:function(a,c){a=a||"";return c.length>a.length?!1:a.substring(0,c.length)===c},qb:function(a,c){return c===k?(new Function("return "+a))():(new Function("__SKO__sc","with(__SKO__sc){ return ("+a+") }"))(c)},nb:function(a,c){if(c.compareDocumentPosition)return(c.compareDocumentPosition(a)&16)==16;for(;a!=n;){if(a==c)return!0;a=a.parentNode}return!1},la:function(a){return p.a.nb(a,document)},M:function(c,b,f){if(typeof jQuery!=
"undefined"){if(a(c,b))var e=f,f=function(a,c){var b=this.checked;if(c)this.checked=c.hb!==!0;e.call(this,a);this.checked=b};jQuery(c).bind(b,f)}else typeof c.addEventListener=="function"?c.addEventListener(b,f,!1):typeof c.attachEvent!="undefined"?c.attachEvent("on"+b,function(a){f.call(c,a)}):d(Error("Browser doesn't support addEventListener or attachEvent"))},Xa:function(c,b){(!c||!c.nodeType)&&d(Error("element must be a DOM node when calling triggerEvent"));if(typeof jQuery!="undefined"){var f=
[];a(c,b)&&f.push({hb:c.checked});jQuery(c).trigger(b,f)}else if(typeof document.createEvent=="function")typeof c.dispatchEvent=="function"?(f=document.createEvent(h[b]||"HTMLEvents"),f.initEvent(b,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,c),c.dispatchEvent(f)):d(Error("The supplied element doesn't support dispatchEvent"));else if(typeof c.fireEvent!="undefined"){if(b=="click"&&c.tagName=="INPUT"&&(c.type.toLowerCase()=="checkbox"||c.type.toLowerCase()=="radio"))c.checked=c.checked!==!0;c.fireEvent("on"+
b)}else d(Error("Browser doesn't support triggering events"))},e:function(a){return p.X(a)?a():a},mb:function(a,c){return p.a.n((a.className||"").split(/\s+/),c)>=0},Ua:function(a,c,b){var f=p.a.mb(a,c);if(b&&!f)a.className=(a.className||"")+" "+c;else if(f&&!b){for(var b=(a.className||"").split(/\s+/),f="",e=0;e<b.length;e++)b[e]!=c&&(f+=b[e]+" ");a.className=p.a.w(f)}},Fb:function(a,c){for(var a=p.a.e(a),c=p.a.e(c),b=[],f=a;f<=c;f++)b.push(f);return b},ra:function(a){for(var c=[],b=0,f=a.length;b<
f;b++)c.push(a[b]);return c},pa:b,wb:c,Ga:function(a,c){for(var b=p.a.ra(a.getElementsByTagName("INPUT")).concat(p.a.ra(a.getElementsByTagName("TEXTAREA"))),f=typeof c=="string"?function(a){return a.name===c}:function(a){return c.test(a.name)},e=[],g=b.length-1;g>=0;g--)f(b[g])&&e.push(b[g]);return e},S:function(a){return typeof a=="string"&&(a=p.a.w(a))?window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))():n},xa:function(a){(typeof JSON=="undefined"||typeof JSON.stringify==
"undefined")&&d(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(p.a.e(a))},Eb:function(a,c,b){var b=b||{},f=b.params||{},e=b.includeFields||this.Ea,g=a;if(typeof a=="object"&&a.tagName=="FORM")for(var g=a.action,h=e.length-1;h>=0;h--)for(var i=p.a.Ga(a,e[h]),l=i.length-1;l>=0;l--)f[i[l].name]=i[l].value;var c=p.a.e(c),
j=document.createElement("FORM");j.style.display="none";j.action=g;j.method="post";for(var u in c)a=document.createElement("INPUT"),a.name=u,a.value=p.a.xa(p.a.e(c[u])),j.appendChild(a);for(u in f)a=document.createElement("INPUT"),a.name=u,a.value=f[u],j.appendChild(a);document.body.appendChild(j);b.submitter?b.submitter(j):j.submit();setTimeout(function(){j.parentNode.removeChild(j)},0)}}};p.b("ko.utils",p.a);p.b("ko.utils.arrayForEach",p.a.m);p.b("ko.utils.arrayFirst",p.a.eb);
p.b("ko.utils.arrayFilter",p.a.ga);p.b("ko.utils.arrayGetDistinctValues",p.a.ha);p.b("ko.utils.arrayIndexOf",p.a.n);p.b("ko.utils.arrayMap",p.a.ia);p.b("ko.utils.arrayPushAll",p.a.P);p.b("ko.utils.arrayRemoveItem",p.a.ja);p.b("ko.utils.fieldsIncludedWithJsonPost",p.a.Ea);p.b("ko.utils.getElementsHavingAttribute",p.a.Fa);p.b("ko.utils.getFormFields",p.a.Ga);p.b("ko.utils.postJson",p.a.Eb);p.b("ko.utils.parseJson",p.a.S);p.b("ko.utils.registerEventHandler",p.a.M);p.b("ko.utils.stringifyJson",p.a.xa);
p.b("ko.utils.range",p.a.Fb);p.b("ko.utils.toggleDomNodeCssClass",p.a.Ua);p.b("ko.utils.triggerEvent",p.a.Xa);p.b("ko.utils.unwrapObservable",p.a.e);Function.prototype.bind||(Function.prototype.bind=function(a){var e=this,b=Array.prototype.slice.call(arguments),a=b.shift();return function(){return e.apply(a,b.concat(Array.prototype.slice.call(arguments)))}});
p.a.j=new function(){var a=0,e="__ko__"+(new Date).getTime(),b={};return{get:function(a,b){var e=p.a.j.getAll(a,!1);return e===k?k:e[b]},set:function(a,b,e){e===k&&p.a.j.getAll(a,!1)===k||(p.a.j.getAll(a,!0)[b]=e)},getAll:function(c,f){var h=c[e];if(!h){if(!f)return;h=c[e]="ko"+a++;b[h]={}}return b[h]},clear:function(a){var f=a[e];f&&(delete b[f],a[e]=n)}}};
p.a.J=new function(){function a(a,f){var e=p.a.j.get(a,b);e===k&&f&&(e=[],p.a.j.set(a,b,e));return e}function e(c){sko.H(c);var b=a(c,!1);if(b)for(var b=b.slice(0),e=0;e<b.length;e++)b[e](c);p.a.j.clear(c);typeof jQuery=="function"&&typeof jQuery.cleanData=="function"&&jQuery.cleanData([c])}var b="__ko_domNodeDisposal__"+(new Date).getTime();return{Ca:function(c,b){typeof b!="function"&&d(Error("Callback must be a function"));a(c,!0).push(b)},Oa:function(c,f){var e=a(c,!1);e&&(p.a.ja(e,f),e.length==
0&&p.a.j.set(c,b,k))},H:function(a){if(!(a.nodeType!=1&&a.nodeType!=9)){e(a);var b=[];p.a.P(b,a.getElementsByTagName("*"));for(var a=0,h=b.length;a<h;a++)e(b[a])}},removeNode:function(a){p.H(a);a.parentNode&&a.parentNode.removeChild(a)}}};p.H=p.a.J.H;p.removeNode=p.a.J.removeNode;p.b("ko.cleanNode",p.H);p.b("ko.removeNode",p.removeNode);p.b("ko.utils.domNodeDisposal",p.a.J);p.b("ko.utils.domNodeDisposal.addDisposeCallback",p.a.J.Ca);p.b("ko.utils.domNodeDisposal.removeDisposeCallback",p.a.J.Oa);
p.a.Db=function(a){if(typeof jQuery!="undefined")a=jQuery.clean([a]);else{var e=p.a.w(a).toLowerCase(),b=document.createElement("div"),e=e.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!e.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!e.indexOf("<td")||!e.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];for(b.innerHTML=e[1]+a+e[2];e[0]--;)b=b.lastChild;a=p.a.ra(b.childNodes)}return a};
p.a.Kb=function(a,e){p.a.ma(a);if(e!==n&&e!==k)if(typeof e!="string"&&(e=e.toString()),typeof jQuery!="undefined")jQuery(a).html(e);else for(var b=p.a.Db(e),c=0;c<b.length;c++)a.appendChild(b[c])};
p.z=function(){function a(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function e(a,b){if(a)if(a.nodeType==8){var h=p.z.La(a.nodeValue);h!=n&&b.push({lb:a,Ab:h})}else if(a.nodeType==1)for(var h=0,g=a.childNodes,i=g.length;h<i;h++)e(g[h],b)}var b={};return{sa:function(c){typeof c!="function"&&d(Error("You can only pass a function to ko.memoization.memoize()"));var f=a()+a();b[f]=c;return"<\!--[ko_memo:"+f+"]--\>"},Ya:function(a,f){var e=b[a];e===k&&d(Error("Couldn't find any memo with ID "+
a+". Perhaps it's already been unmemoized."));try{return e.apply(n,f||[]),!0}finally{delete b[a]}},Za:function(a,b){var h=[];e(a,h);for(var g=0,i=h.length;g<i;g++){var l=h[g].lb,j=[l];b&&p.a.P(j,b);p.z.Ya(h[g].Ab,j);l.nodeValue="";l.parentNode&&l.parentNode.removeChild(l)}},La:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:n}}}();p.b("ko.memoization",p.z);p.b("ko.memoization.memoize",p.z.sa);p.b("ko.memoization.unmemoize",p.z.Ya);p.b("ko.memoization.parseMemoText",p.z.La);
p.b("ko.memoization.unmemoizeDomNodeAndDescendants",p.z.Za);p.Qb=function(a,e){this.gb=a;this.u=function(){this.vb=!0;e()}.bind(this);p.r(this,"dispose",this.u)};p.ya=function(){var a=[];this.C=function(e,b){var c=b?e.bind(b):e,f=new p.Qb(c,function(){p.a.ja(a,f)});a.push(f);return f};this.R=function(e){p.a.m(a.slice(0),function(a){a&&a.vb!==!0&&a.gb(e)})};this.sb=function(){return a.length};p.r(this,"subscribe",this.C);p.r(this,"notifySubscribers",this.R);p.r(this,"getSubscriptionsCount",this.sb)};
p.Ja=function(a){return typeof a.C=="function"&&typeof a.R=="function"};p.b("ko.subscribable",p.ya);p.b("ko.isSubscribable",p.Ja);p.T=function(){var a=[];return{fb:function(){a.push([])},end:function(){return a.pop()},Na:function(e){p.Ja(e)||d("Only subscribable things can act as dependencies");a.length>0&&a[a.length-1].push(e)}}}();var x={undefined:!0,"boolean":!0,number:!0,string:!0};function y(a,e){return a===n||typeof a in x?a===e:!1}
p.s=function(a){function e(){if(arguments.length>0){if(!e.equalityComparer||!e.equalityComparer(b,arguments[0]))b=arguments[0],e.R(b);return this}else return p.T.Na(e),b}var b=a;e.G=p.s;e.ca=function(){e.R(b)};e.equalityComparer=y;p.ya.call(e);p.r(e,"valueHasMutated",e.ca);return e};p.X=function(a){return a===n||a===k||a.G===k?!1:a.G===p.s?!0:p.X(a.G)};p.Y=function(a){return typeof a=="function"&&a.G===p.s?!0:typeof a=="function"&&a.G===p.i&&a.tb?!0:!1};p.b("ko.observable",p.s);
p.b("ko.isObservable",p.X);p.b("ko.isWriteableObservable",p.Y);
p.Cb=function(a){arguments.length==0&&(a=[]);a!==n&&a!==k&&!("length"in a)&&d(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var e=new p.s(a);p.a.m("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){e[a]=function(){var c=e(),c=c[a].apply(c,arguments);e.ca();return c}});p.a.m(["slice"],function(a){e[a]=function(){var c=e();return c[a].apply(c,arguments)}});e.remove=function(a){for(var c=e(),f=[],h=[],g=typeof a=="function"?
a:function(c){return c===a},i=0,l=c.length;i<l;i++){var j=c[i];g(j)?h.push(j):f.push(j)}e(f);return h};e.Hb=function(a){if(a===k){var c=e();e([]);return c}return!a?[]:e.remove(function(c){return p.a.n(a,c)>=0})};e.ka=function(a){for(var c=e(),f=typeof a=="function"?a:function(c){return c===a},h=c.length-1;h>=0;h--)f(c[h])&&(c[h]._destroy=!0);e.ca()};e.kb=function(a){return a===k?e.ka(function(){return!0}):!a?[]:e.ka(function(c){return p.a.n(a,c)>=0})};e.indexOf=function(a){var c=e();return p.a.n(c,
a)};e.replace=function(a,c){var f=e.indexOf(a);f>=0&&(e()[f]=c,e.ca())};p.r(e,"remove",e.remove);p.r(e,"removeAll",e.Hb);p.r(e,"destroy",e.ka);p.r(e,"destroyAll",e.kb);p.r(e,"indexOf",e.indexOf);return e};p.b("ko.observableArray",p.Cb);
p.i=function(a,e,b){function c(){p.a.m(o,function(a){a.u()});o=[]}function f(a){c();p.a.m(a,function(a){o.push(a.C(h))})}function h(){if(l&&typeof b.disposeWhen=="function"&&b.disposeWhen())g.u();else{try{p.T.fb(),i=b.owner?b.read.call(b.owner):b.read()}finally{var a=p.a.ha(p.T.end());f(a)}g.R(i);l=!0}}function g(){if(arguments.length>0)if(typeof b.write==="function"){var a=arguments[0];b.owner?b.write.call(b.owner,a):b.write(a)}else d("Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
else return l||h(),p.T.Na(g),i}var i,l=!1;a&&typeof a=="object"?b=a:(b=b||{},b.read=a||b.read,b.owner=e||b.owner);typeof b.read!="function"&&d("Pass a function that returns the value of the dependentObservable");var j=typeof b.disposeWhenNodeIsRemoved=="object"?b.disposeWhenNodeIsRemoved:n,m=n;if(j){m=function(){g.u()};p.a.J.Ca(j,m);var q=b.disposeWhen;b.disposeWhen=function(){return!p.a.la(j)||typeof q=="function"&&q()}}var o=[];g.G=p.i;g.rb=function(){return o.length};g.tb=typeof b.write==="function";
g.u=function(){j&&p.a.J.Oa(j,m);c()};p.ya.call(g);b.deferEvaluation!==!0&&h();p.r(g,"dispose",g.u);p.r(g,"getDependenciesCount",g.rb);return g};p.i.G=p.s;p.b("ko.dependentObservable",p.i);
(function(){function a(c,f,h){h=h||new b;c=f(c);if(!(typeof c=="object"&&c!==n&&c!==k))return c;var g=c instanceof Array?[]:{};h.save(c,g);e(c,function(b){var e=f(c[b]);switch(typeof e){case "boolean":case "number":case "string":case "function":g[b]=e;break;case "object":case "undefined":var j=h.get(e);g[b]=j!==k?j:a(e,f,h)}});return g}function e(a,b){if(a instanceof Array)for(var e=0;e<a.length;e++)b(e);else for(e in a)b(e)}function b(){var a=[],b=[];this.save=function(e,g){var i=p.a.n(a,e);i>=0?
b[i]=g:(a.push(e),b.push(g))};this.get=function(e){e=p.a.n(a,e);return e>=0?b[e]:k}}p.Ta=function(c){arguments.length==0&&d(Error("When calling ko.toJS, pass the object you want to convert."));return a(c,function(a){for(var c=0;p.X(a)&&c<10;c++)a=a();return a})};p.toJSON=function(a){a=p.Ta(a);return p.a.xa(a)}})();p.b("ko.toJS",p.Ta);p.b("ko.toJSON",p.toJSON);
p.k={A:function(a){return a.tagName=="OPTION"?a.__ko__hasDomDataOptionValue__===!0?p.a.j.get(a,p.d.options.ta):a.getAttribute("value"):a.tagName=="SELECT"?a.selectedIndex>=0?p.k.A(a.options[a.selectedIndex]):k:a.value},da:function(a,e){if(a.tagName=="OPTION")switch(typeof e){case "string":case "number":p.a.j.set(a,p.d.options.ta,k);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=e;break;default:p.a.j.set(a,p.d.options.ta,e),a.__ko__hasDomDataOptionValue__=!0,a.value=
""}else if(a.tagName=="SELECT")for(var b=a.options.length-1;b>=0;b--){if(p.k.A(a.options[b])==e){a.selectedIndex=b;break}}else{if(e===n||e===k)e="";a.value=e}}};p.b("ko.selectExtensions",p.k);p.b("ko.selectExtensions.readValue",p.k.A);p.b("ko.selectExtensions.writeValue",p.k.da);
p.F=function(){function a(a,c){return a.replace(b,function(a,b){return c[b]})}function e(a){return p.a.n(f,p.a.w(a).toLowerCase())>=0?!1:a[0]=="<"&&a[a.length-1]==">"?!0:a.match(c)!==n}var b=/\[ko_token_(\d+)\]/g,c=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,f=["true","false"];return{S:function(c){c=p.a.w(c);if(c.length<3)return{};for(var b=[],e=n,f,j=c.charAt(0)=="{"?1:0;j<c.length;j++){var m=c.charAt(j);if(e===n)switch(m){case '"':case "'":case "<":e=j;f=">";break;case "/":e=
j;f=m;break;case "{":e=j;f="}";break;case "[":e=j,f="]"}else if(m==f){m=c.substring(e,j+1);b.push(m);var q="[ko_token_"+(b.length-1)+"]",c=c.substring(0,e)+q+c.substring(j+1);j-=m.length-q.length;e=n}}e={};c=c.split(",");f=0;for(j=c.length;f<j;f++){var q=c[f],o=q.indexOf(":");o>0&&o<q.length-1&&(m=p.a.w(q.substring(0,o)),q=p.a.w(q.substring(o+1)),m.charAt(0)=="{"&&(m=m.substring(1)),q.charAt(q.length-1)=="}"&&(q=q.substring(0,q.length-1)),m=p.a.w(a(m,b)),q=p.a.w(a(q,b)),e[m]=q)}return e},ub:function(a){var c=
p.F.S(a),b=[],f;for(f in c){var j=c[f];e(j)&&(b.length>0&&b.push(", "),b.push(f+" : function(__ko_value) { "+j+" = __ko_value; }"))}b.length>0&&(a=a+", '_ko_property_writers' : { "+b.join("")+" } ");return a},oa:function(a){var a=p.F.S(a),c=[],b="",f=!0,j;for(j in a){var m=a[j];e(m)&&(c.length>0&&c.push(", "),m[0]==="<"&&m[m.length-1]===">"&&j!=="about"&&j!=="rel"?c.push(j+" : function(__ko_value) { sko.resource()['"+m+"'] = __ko_value; }"):m[0]==="<"&&m[m.length-1]===">"&&(j==="about"||j==="rel")||
c.push(j+" : function(__ko_value) { "+m+" = __ko_value; }"));f?f=!1:b+=", ";b=m[0]==="<"&&m[m.length-1]===">"&&j!=="about"&&j!=="rel"?b+j+": sko.resource()['"+m+"']":m[0]==="<"&&m[m.length-1]===">"&&(j==="about"||j==="rel")?b+j+": '"+m.slice(1,m.length-1)+"'":b+j+": "+m}a=b;c.length>0&&(a=a+", '_ko_property_writers' : { "+c.join("")+" } ");return a}}}();p.b("ko.jsonExpressionRewriting",p.F);p.b("ko.jsonExpressionRewriting.parseJson",p.F.S);
p.b("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",p.F.ub);p.b("ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson",p.F.oa);
(function(){function a(a,b){try{var c=" { "+p.F.oa(a)+" } ";return p.a.qb(c,b===n?window:b)}catch(f){d(Error("Unable to parse binding attribute.\nMessage: "+f+";\nAttribute value: "+a))}}p.d={};p.fa=function(e,b,c,f){function h(a){return function(){return l[a]}}function g(){return l}var i=!0,f=f||"data-bind",l;new p.i(function(){console.log("*** sko.resource SETTING CURRENT NODE");console.log(sko.I(e));sko.Sb=function(){return sko.I(e)};l=(typeof b=="function"?b():b)||a(e.getAttribute(f),c);if(i)for(var j in l)p.d[j]&&
typeof p.d[j].init=="function"&&(0,p.d[j].init)(e,h(j),g,c);for(j in l)p.d[j]&&typeof p.d[j].update=="function"&&(0,p.d[j].update)(e,h(j),g,c)},n,{disposeWhenNodeIsRemoved:e});i=!1};p.ea=function(a,b){b&&b.nodeType==k&&d(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)"));var b=b||window.document.body,c=p.a.Fa(b,"data-bind");p.a.m(c,function(c){p.fa(c,n,a)})};p.b("ko.bindingHandlers",p.d);
p.b("ko.applyBindings",p.ea);p.b("ko.applyBindingsToNode",p.fa)})();p.a.m(["click"],function(a){p.d[a]={init:function(e,b,c,f){return p.d.event.init.call(this,e,function(){var c={};c[a]=b();return c},c,f)}}});
p.d.event={init:function(a,e,b,c){var f=e()||{},h;for(h in f)(function(){var f=h;typeof f=="string"&&p.a.M(a,f,function(a){var h,j=e()[f];if(j){var m=b();try{h=j.apply(c,arguments)}finally{if(h!==!0)a.preventDefault?a.preventDefault():a.returnValue=!1}if(m[f+"Bubble"]===!1)a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()}})})()}};
p.d.submit={init:function(a,e,b,c){typeof e()!="function"&&d(Error("The value for a submit binding must be a function to invoke on submit"));p.a.M(a,"submit",function(b){var h,g=e();try{h=g.call(c,a)}finally{if(h!==!0)b.preventDefault?b.preventDefault():b.returnValue=!1}})}};p.d.visible={update:function(a,e){var b=p.a.e(e()),c=a.style.display!="none";if(b&&!c)a.style.display="";else if(!b&&c)a.style.display="none"}};
p.d.enable={update:function(a,e){var b=p.a.e(e());if(b&&a.disabled)a.removeAttribute("disabled");else if(!b&&!a.disabled)a.disabled=!0}};p.d.disable={update:function(a,e){p.d.enable.update(a,function(){return!p.a.e(e())})}};
p.d.value={init:function(a,e,b){var c=["change"],f=b().valueUpdate;f&&(typeof f=="string"&&(f=[f]),p.a.P(c,f),c=p.a.ha(c));p.a.m(c,function(c){var f=!1;p.a.Pb(c,"after")&&(f=!0,c=c.substring(5));var i=f?function(a){setTimeout(a,0)}:function(a){a()};p.a.M(a,c,function(){i(function(){var c=e(),f=p.k.A(a);p.Y(c)?c(f):(c=b(),c._ko_property_writers&&c._ko_property_writers.value&&c._ko_property_writers.value(f))})})})},update:function(a,e){var b=p.a.e(e()),c=p.k.A(a),f=b!=c;b===0&&c!==0&&c!=="0"&&(f=!0);
f&&(c=function(){p.k.da(a,b)},c(),a.tagName=="SELECT"&&setTimeout(c,0));a.tagName=="SELECT"&&(c=p.k.A(a),c!==b&&p.a.Xa(a,"change"))}};
p.d.options={update:function(a,e,b){a.tagName!="SELECT"&&d(Error("options binding applies only to SELECT elements"));var c=p.a.ia(p.a.ga(a.childNodes,function(a){return a.tagName&&a.tagName=="OPTION"&&a.selected}),function(a){return p.k.A(a)||a.innerText||a.textContent}),f=a.scrollTop,h=p.a.e(e());p.a.ma(a);if(h){var g=b();typeof h.length!="number"&&(h=[h]);if(g.optionsCaption){var i=document.createElement("OPTION");i.innerHTML=g.optionsCaption;p.k.da(i,k);a.appendChild(i)}b=0;for(e=h.length;b<e;b++){var i=
document.createElement("OPTION"),l=typeof g.optionsValue=="string"?h[b][g.optionsValue]:h[b],l=p.a.e(l);p.k.da(i,l);var j=g.optionsText;optionText=typeof j=="function"?j(h[b]):typeof j=="string"?h[b][j]:l;if(optionText===n||optionText===k)optionText="";optionText=p.a.e(optionText).toString();typeof i.innerText=="string"?i.innerText=optionText:i.textContent=optionText;a.appendChild(i)}h=a.getElementsByTagName("OPTION");b=g=0;for(e=h.length;b<e;b++)p.a.n(c,p.k.A(h[b]))>=0&&(p.a.Ra(h[b],!0),g++);if(f)a.scrollTop=
f}}};p.d.options.ta="__ko.bindingHandlers.options.optionValueDomData__";
p.d.selectedOptions={Ha:function(a){for(var e=[],a=a.childNodes,b=0,c=a.length;b<c;b++){var f=a[b];f.tagName=="OPTION"&&f.selected&&e.push(p.k.A(f))}return e},init:function(a,e,b){p.a.M(a,"change",function(){var a=e();p.Y(a)?a(p.d.selectedOptions.Ha(this)):(a=b(),a._ko_property_writers&&a._ko_property_writers.value&&a._ko_property_writers.value(p.d.selectedOptions.Ha(this)))})},update:function(a,e){a.tagName!="SELECT"&&d(Error("values binding applies only to SELECT elements"));var b=p.a.e(e());if(b&&
typeof b.length=="number")for(var c=a.childNodes,f=0,h=c.length;f<h;f++){var g=c[f];g.tagName=="OPTION"&&p.a.Ra(g,p.a.n(b,p.k.A(g))>=0)}}};p.d.text={update:function(a,e){var b=p.a.e(e());if(b===n||b===k)b="";typeof a.innerText=="string"?a.innerText=b:a.textContent=b}};p.d.html={update:function(a,e){var b=p.a.e(e());p.a.Kb(a,b)}};p.d.css={update:function(a,e){var b=p.a.e(e()||{}),c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);p.a.Ua(a,c,f)}}};
p.d.style={update:function(a,e){var b=p.a.e(e()||{}),c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);a.style[c]=f||""}}};p.d.uniqueName={init:function(a,e){if(e())a.name="ko_unique_"+ ++p.d.uniqueName.jb,p.a.pa&&a.mergeAttributes(document.createElement("<input name='"+a.name+"'/>"),!1)}};p.d.uniqueName.jb=0;
p.d.checked={init:function(a,e,b){p.a.M(a,"click",function(){var c;if(a.type=="checkbox")c=a.checked;else if(a.type=="radio"&&a.checked)c=a.value;else return;var f=e();a.type=="checkbox"&&p.a.e(f)instanceof Array?(c=p.a.n(p.a.e(f),a.value),a.checked&&c<0?f.push(a.value):!a.checked&&c>=0&&f.splice(c,1)):p.Y(f)?f()!==c&&f(c):(f=b(),f._ko_property_writers&&f._ko_property_writers.checked&&f._ko_property_writers.checked(c))});a.type=="radio"&&!a.name&&p.d.uniqueName.init(a,function(){return!0})},update:function(a,
e){var b=p.a.e(e());if(a.type=="checkbox")a.checked=b instanceof Array?p.a.n(b,a.value)>=0:b,b&&p.a.pa&&a.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),!1);else if(a.type=="radio")a.checked=a.value==b,a.value==b&&(p.a.pa||p.a.wb)&&a.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),!1)}};
p.d.attr={update:function(a,e){var b=p.a.e(e())||{},c;for(c in b)if(typeof c=="string"){var f=p.a.e(b[c]);f===!1||f===n||f===k?a.removeAttribute(c):a.setAttribute(c,f.toString())}}};
p.za=function(){this.renderTemplate=function(){d("Override renderTemplate in your ko.templateEngine subclass")};this.isTemplateRewritten=function(){d("Override isTemplateRewritten in your ko.templateEngine subclass")};this.rewriteTemplate=function(){d("Override rewriteTemplate in your ko.templateEngine subclass")};this.createJavaScriptEvaluatorBlock=function(){d("Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass")}};p.b("ko.templateEngine",p.za);
p.ba=function(){var a=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;return{pb:function(a,b){b.isTemplateRewritten(a)||b.rewriteTemplate(a,function(a){return p.ba.Bb(a,b)})},Bb:function(e,b){return e.replace(a,function(a,e,h,g,i,l,j){a=p.F.oa(j);return b.createJavaScriptEvaluatorBlock("ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {                     return (function() { return { "+a+" } })()                 })")+e})},
bb:function(a){return p.z.sa(function(b,c){b.nextSibling&&sko.Wa(b.nextSibling,c,function(){sko.Va(b.nextSibling,c,function(){p.fa(b.nextSibling,a,c)})})})}}}();p.b("ko.templateRewriting",p.ba);p.b("ko.templateRewriting.applyMemoizedBindingsToNextSibling",p.ba.bb);
(function(){function a(a,c,f,h,g){var i=p.a.e(h),g=g||{},l=g.templateEngine||e;p.ba.pb(f,l);f=l.renderTemplate(f,i,g);(typeof f.length!="number"||f.length>0&&typeof f[0].nodeType!="number")&&d("Template engine must return an array of DOM nodes");switch(c){case "replaceChildren":p.a.Jb(a,f);break;case "replaceNode":p.a.Pa(a,f);break;case "ignoreTargetNode":break;default:d(Error("Unknown renderMode: "+c))}f&&p.a.m(f,function(a){p.z.Za(a,[h])});g.afterRender&&g.afterRender(f,h);return f}var e;p.Sa=function(a){a!=
k&&!(a instanceof p.za)&&d("templateEngine must inherit from ko.templateEngine");e=a};p.ua=function(b,c,f,h,g){f=f||{};(f.templateEngine||e)==k&&d("Set a template engine before calling renderTemplate");g=g||"replaceChildren";if(h){var i=h.nodeType?h:h.length>0?h[0]:n;return new p.i(function(){var e=typeof b=="function"?b(c):b,e=a(h,g,e,c,f);g=="replaceNode"&&(h=e,i=h.nodeType?h:h.length>0?h[0]:n)},n,{disposeWhen:function(){return!i||!p.a.la(i)},disposeWhenNodeIsRemoved:i&&g=="replaceNode"?i.parentNode:
i})}else return p.z.sa(function(a){p.ua(b,c,f,a,"replaceNode")})};p.Ib=function(b,c,e,h){return new p.i(function(){var g=p.a.e(c)||[];typeof g.length=="undefined"&&(g=[g]);g=p.a.ga(g,function(a){return e.includeDestroyed||!a._destroy});p.a.Qa(h,g,function(c){var g=typeof b=="function"?b(c):b;return a(n,"ignoreTargetNode",g,c,e)},e)},n,{disposeWhenNodeIsRemoved:h})};p.d.template={update:function(a,c,e,h){c=p.a.e(c());e=typeof c=="string"?c:c.name;if(typeof c.foreach!="undefined")h=p.Ib(e,c.foreach||
[],{templateOptions:c.templateOptions,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,includeDestroyed:c.includeDestroyed,afterRender:c.afterRender},a);else var g=c.data,h=p.ua(e,typeof g=="undefined"?h:g,{templateOptions:c.templateOptions,afterRender:c.afterRender},a);(c=p.a.j.get(a,"__ko__templateSubscriptionDomDataKey__"))&&typeof c.u=="function"&&c.u();p.a.j.set(a,"__ko__templateSubscriptionDomDataKey__",h)}}})();p.b("ko.setTemplateEngine",p.Sa);p.b("ko.renderTemplate",p.ua);
p.a.Q=function(a,e,b){if(b===k)return p.a.Q(a,e,1)||p.a.Q(a,e,10)||p.a.Q(a,e,Number.MAX_VALUE);else{for(var a=a||[],e=e||[],c=a,f=e,h=[],g=0;g<=f.length;g++)h[g]=[];for(var g=0,i=Math.min(c.length,b);g<=i;g++)h[0][g]=g;g=1;for(i=Math.min(f.length,b);g<=i;g++)h[g][0]=g;for(var i=c.length,l,j=f.length,g=1;g<=i;g++){l=Math.max(1,g-b);for(var m=Math.min(j,g+b);l<=m;l++)h[l][g]=c[g-1]===f[l-1]?h[l-1][g-1]:Math.min(h[l-1][g]===k?Number.MAX_VALUE:h[l-1][g]+1,h[l][g-1]===k?Number.MAX_VALUE:h[l][g-1]+1)}b=
a.length;c=e.length;f=[];g=h[c][b];if(g===k)h=n;else{for(;b>0||c>0;){i=h[c][b];j=c>0?h[c-1][b]:g+1;m=b>0?h[c][b-1]:g+1;l=c>0&&b>0?h[c-1][b-1]:g+1;if(j===k||j<i-1)j=g+1;if(m===k||m<i-1)m=g+1;l<i-1&&(l=g+1);j<=m&&j<l?(f.push({status:"added",value:e[c-1]}),c--):(m<j&&m<l?f.push({status:"deleted",value:a[b-1]}):(f.push({status:"retained",value:a[b-1]}),c--),b--)}h=f.reverse()}return h}};p.b("ko.utils.compareArrays",p.a.Q);
(function(){function a(a,b,c){var f=[],a=p.i(function(){var a=b(c)||[];f.length>0&&p.a.Pa(f,a);f.splice(0,f.length);p.a.P(f,a)},n,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return f.length==0||!p.a.la(f[0])}});return{zb:f,i:a}}p.a.Qa=function(e,b,c,f){for(var b=b||[],f=f||{},h=p.a.j.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===k,g=p.a.j.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],i=p.a.ia(g,function(a){return a.cb}),l=p.a.Q(i,b),b=[],j=0,m=[],i=[],
q=n,o=0,v=l.length;o<v;o++)switch(l[o].status){case "retained":var r=g[j];b.push(r);r.U.length>0&&(q=r.U[r.U.length-1]);j++;break;case "deleted":g[j].i.u();p.a.m(g[j].U,function(a){m.push({element:a,index:o,value:l[o].value});q=a});j++;break;case "added":var s=a(e,c,l[o].value),r=s.zb;b.push({cb:l[o].value,U:r,i:s.i});for(var s=0,w=r.length;s<w;s++){var t=r[s];i.push({element:t,index:o,value:l[o].value});q==n?e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t):q.nextSibling?e.insertBefore(t,
q.nextSibling):e.appendChild(t);q=t}}p.a.m(m,function(a){p.H(a.element)});c=!1;if(!h){if(f.afterAdd)for(o=0;o<i.length;o++)f.afterAdd(i[o].element,i[o].index,i[o].value);if(f.beforeRemove){for(o=0;o<m.length;o++)f.beforeRemove(m[o].element,m[o].index,m[o].value);c=!0}}c||p.a.m(m,function(a){a.element.parentNode&&a.element.parentNode.removeChild(a.element)});p.a.j.set(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult",b)}})();p.b("ko.utils.setDomNodeChildrenFromArrayMapping",p.a.Qa);
p.qa=function(){this.L=typeof jQuery=="undefined"||!jQuery.tmpl?0:jQuery.tmpl.tag?jQuery.tmpl.tag.tmpl&&jQuery.tmpl.tag.tmpl.open&&jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?3:2:1;this.getTemplateNode=function(a){var b=document.getElementById(a);b==n&&d(Error("Cannot find template with ID="+a));return b};var a=RegExp("__ko_apos__","g");this.renderTemplate=function(e,b,c){c=c||{};this.L==0&&d(Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details."));
if(this.L==1)return e='<script type="text/html">'+this.getTemplateNode(e).text+"<\/script>",b=jQuery.tmpl(e,b)[0].text.replace(a,"'"),jQuery.clean([b],document);if(!(e in jQuery.template)){var f=this.getTemplateNode(e).text;jQuery.template(e,f)}b=[b];b=jQuery.tmpl(e,b,c.templateOptions);b.appendTo(document.createElement("div"));jQuery.fragments={};return b};this.isTemplateRewritten=function(a){return a in jQuery.template?!0:this.getTemplateNode(a).xb===!0};this.rewriteTemplate=function(a,b){var c=
this.getTemplateNode(a),f=b(c.text);this.L==1&&(f=p.a.w(f),f=f.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g,function(a,c,b){return c.replace(/\'/g,"__ko_apos__")+b}));c.text=f;c.xb=!0};this.createJavaScriptEvaluatorBlock=function(a){return this.L==1?"{{= "+a+"}}":"{{ko_code ((function() { return "+a+" })()) }}"};this.ab=function(a,b){document.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")};p.r(this,"addTemplate",this.ab);this.L>1&&(jQuery.tmpl.tag.ko_code={open:(this.L<
3?"_":"__")+".push($1 || '');"})};p.qa.prototype=new p.za;p.Sa(new p.qa);p.b("ko.jqueryTmplTemplateEngine",p.qa);Utils={Lb:1E3,wa:0};Utils.Gb=function(a){Utils.wa===Utils.Lb?(Utils.wa=0,setTimeout(a,0)):(Utils.wa++,a())};Utils.repeat=function(a,e,b,c,f){arguments.length===4&&(f={});a<e?(f.Ba=a,b(function(b,f){Utils.Gb(function(){Utils.repeat(a+1,e,b,c,f)})},f)):c(f)};SemanticKnockOut={};window.sko=SemanticKnockOut;sko.$a=!1;sko.log=function(a){sko.$a&&console.log(a)};
sko.Rb=function(){sko.f={};sko.O={};sko.N=0;sko.na=0;sko.V={};var a=n;arguments.length===2?(sko.l=arguments[0],a=arguments[1],a(!0)):(a=arguments[0],rdfstore.create(function(e){sko.l=e;a(!0)}))};sko.Aa=0;sko.v=function(){var a="_:sko_"+sko.Aa;sko.Aa++;return a};sko.f={};sko.O={};sko.N=0;
sko.c=function(a,e,b){if(sko.c[a]!=n)b(a);else{var c=""+sko.N;sko.N++;a==n&&(a=sko.v());if(typeof a==="string"){var f=a;sko.l.K(sko.h(f),function(a,e){if(a){sko.log("FOUND RESOURCE: "+f);sko.log(e);sko.log(" FOR "+sko.h(f));sko.log(" ------------\> "+c+" : "+f);sko.f[c]=new sko.D(c,f,e);sko.c[c]=p.s(f);var i=sko.c[c].C(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+c+" new value -> "+a);a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.v());sko.l.K(sko.h(a),function(b,e){if(b){var f=
e.t()[0].$.valueOf();sko.log(" ------------\> "+c+" : "+f+" 2");sko.f[c].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : "+a+" 3"),sko.f[c].c(a)})});sko.O[c]=i}b(c)})}else sko.c[c]=p.i({Ma:function(){var b=a();sko.log("*** OBSERVABLE READING DEPENDING NODE ABOT ID:"+c+" new value -> "+b);b==n&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),b=sko.v());return b},write:function(b){sko.log("*** OBSERVABLE WRITING DEPENDING NODE ABOT ID:"+c+" new value -> "+b);b==n&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),
b=sko.v());a(b)},Ka:e}),sko.l.K(sko.h(sko.c[c]()),function(a,e){if(a){sko.log(" ------------\> "+c+" : "+e+" 4");sko.f[c]=new sko.D(c,sko.c[c](),e);var f=sko.c[c].C(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+c+" new value -> "+a);a!=n?sko.l.K(sko.h(a),function(b,e){if(b)if(e.t().length>0){var f=e.t()[0].$.q();sko.log(" ------------\> "+c+" : "+f+" 5");sko.f[c].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : "+a+" 6"),sko.f[c].c(a);else sko.log("Error updating 3 resource for URI:"+
a+" in SKO about node observer"),sko.log("*** NO RESOURCE FOR URI:"+a+" NEXT ID:"+c),sko.log(" ------------\> "+c+" : "+a+" 7"),sko.f[c].c(a)}):(sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+c+" : NEW BLANK  8"),sko.f[c].c(sko.v()))});sko.O[c]=f}b(c)})}};
sko.rel=function(a,e,b,c){var f=""+sko.N,h=n;sko.N++;typeof a==="string"?(h=a,sko.c[f]=p.i({Ma:function(){sko.log("*** OBSERVABLE READING RELATED  DEPENDING NODE ABOT ID:"+f);var c=sko.I(jQuery(e).parent().t()[0]);sko.log(c);if(c!=n)if(sko.log(" ** about:"+c.c()),sko.log("*** Found parent resource: "+c.c()),c[a]){var b=c[a]();if(b!=n&&!sko.Ia(c[a]()))return sko.f[f]==n||sko.f[f].c()!=b?(sko.log("*** found related resource: "+b),sko.l.K(sko.h(b),function(a,c){sko.log("CREATED NODE FOR ID "+f+" AND URI: "+
sko.h(b));sko.log(c);sko.log(" ------------\> "+f+" : "+b+" 8b");sko.f[f]=new sko.D(f,b,c)})):sko.log("*** Related resource hasn't changed"),b;else{if(b==n){sko.log("*** related resource is null");sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL");var h=sko.v();sko.log(" ** setting parent node related resource to "+h);c[a](h)}else sko.f[f]?(sko.log("*** setting new value for related resource "+h),sko.log(" ------------\> "+f+" : "+h+" 9"),sko.f[f].c(h)):sko.log("!! Should I create the new blank node?");
return h}}else sko.log("!!! parent resource doest not link to the related resource");else sko.log("!!! impossible to find parent resource")},write:function(a){a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.v());sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+a);var c=sko.I(jQuery(e).parent().t()[0]);c!=n?(sko.log("*** Found parent resource: "+c.c()),c[h]?(sko.log("*** Setting new related resource in parent resource found: "+a),c[h](a)):sko.log("!!! parent resource doest not link to the related resource")):
sko.log("!!! impossible to find parent resource")},Ka:b}),b=sko.c[f].C(function(c){sko.log("*** OBSERVING RELATED NODE ABOT ID:"+f+" new value -> "+c);c==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),c=sko.v());sko.c[f]()!=n?sko.h(c)!==sko.h(sko.c[f]())&&sko.l.K(sko.h(c),function(b,e){b?(e.t(),sko.log(" ------------\> "+f+" : "+a+" 10"),sko.f[f].c(a)):sko.log("Error updating 1 resource for URI:"+c+" in SKO about related node observer")}):sko.log("!! this resource is now null, should be removed from list of resources?")})):
(sko.c[f]=p.i({Ma:function(){var c=a();sko.log("*** OBSERVABLE READING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+c);c==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),c=sko.v());var b=sko.I(jQuery(e).parent().t()[0]);if(b!=n)if(sko.log("*** Found parent resource: "+b.c()),b[c]){var h=b[c]();sko.log("*** found related resource: "+h);sko.l.K(sko.h(h),function(a,c){sko.log(" ------------\> "+f+" : "+h+" 11");sko.f[f]=new sko.D(f,h,c)});return h}else sko.log("!!! parent resource doest not link to the related resource");
else sko.log("!!! impossible to find parent resource")},write:function(c){var b=sko.I(jQuery(e).parent().t()[0]);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+c);c==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),c=sko.v());b!=n?(sko.log("*** Found parent resource: "+b.c()),b[a()]?(sko.log("*** Setting new related resource in parent resource found: "+c),b[a()](c),a(c)):sko.log("!!! parent resource doest not link to the related resource")):sko.log("!!! impossible to find parent resource")},
Ka:b}),b=sko.c[f].C(function(a){sko.log("*** OBSERVING RELATED NODE (F) ABOT ID:"+f+" new value -> "+a);a==n&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.v());sko.h(a)!=sko.h(sko.c[f]())?sko.l.K(sko.h(a),function(c,b){if(c){var e=b.t()[0].$.valueOf();sko.log(" ------------\> "+f+" : "+e+" 12");sko.f[f].c(e)}else sko.log("Error updating  2 resource for URI:"+a+" in SKO about related node observer")}):sko.log("*** Related about resource hasn't changed")}));sko.O[f]=b;c(f)};
sko.h=function(a){return a[0]==="<"&&a[a.length-1]==">"?a.slice(1,a.length-1):a};
sko.ob=function(a){if(a==n)return n;else if(a.W&&a.W==="Literal")if(a.p=="http://www.w3.org/2001/XMLSchema#integer"||a.p=="http://www.w3.org/2001/XMLSchema#decimal"||a.p=="http://www.w3.org/2001/XMLSchema#double"||a.p=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.p=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.p=="http://www.w3.org/2001/XMLSchema#long"||a.p=="http://www.w3.org/2001/XMLSchema#int"||a.p=="http://www.w3.org/2001/XMLSchema#short"||a.p=="http://www.w3.org/2001/XMLSchema#byte"||
a.p=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.p=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.p=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.p=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.p=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.p=="http://www.w3.org/2001/XMLSchema#positiveInteger")return parseFloat(a.valueOf());else if(a.type==="http://www.w3.org/2001/XMLSchema#boolean")return a.valueOf()==="true"||a.valueOf()===!0||a.valueOf()==="True";else if(a.type===
"http://www.w3.org/2001/XMLSchema#string")return a.valueOf();else if(a.type==="http://www.w3.org/2001/XMLSchema#dateTime")return new Date(a.valueOf());else{if(a.type==n)return a.valueOf()}else return a.valueOf()};
sko.D=function(a,e,b){this.va=a;this.g={};this.aa=[];var c=this;b.forEach(function(a){sko.log(a);if(a.object.W==="NamedNode")c.g[a.B.q()]=a.object.q(),c[a.B.q()]=p.s(a.object.q());else if(a.object.W==="Literal"){var b=sko.ob(a.object.valueOf());c.g[a.B.q()]=b;c[a.B.q()]=p.s(b)}else c.g[a.B.q()]=a.object.valueOf(),c[a.B.q()]=p.s(a.object.valueOf())});this.c=p.s(e);this.Z=sko.D.Ob(this);c=this;this.aa.push(this.c.C(function(a){sko.log("SKO Resource new resource:"+a);sko.log("*** STOP OBSERVING NODE STORE FOR "+
c.c());sko.l.Nb(c.Z);if(a!=n&&a.indexOf("_:sko")!=0)sko.log("*** START OBSERVING NODE STORE FOR "+c.c()),sko.l.Mb(sko.h(a),c.Z);else{sko.log("*** nullifying resources");for(var b in c.g)c.g[b]=n;for(b in c.g)c[b](n)}}));sko.D.yb(this);sko.l.Mb(sko.h(this.c()),c.Z)};sko.Ia=function(a){return a.indexOf("_:sko")===0};
sko.H=function(a){sko.log("*** CLEANING!");sko.log(a);var e=jQuery(a).o("aboutId"),b=[];e!=n&&b.push(e);b=b.concat(sko.ib(a));for(a=0;a<b.length;a++)if(sko.f[b[a]]!=n){sko.log("*** DISCONNECTING "+b[a]);sko.log(sko.f[b[a]]);e=sko.f[b[a]];sko.log(" ** DISCONNECTING");sko.l.Nb(e.Z);sko.log(" ** disconnected STORE");for(var c=0;c<e.aa.length;c++)sko.log(" ** disconnecting subscription"),e.aa[c].u();sko.log(" ** disconnecting resource map");sko.O[e.va].u();sko.log(" ** deleting");delete sko.f[e.va];delete sko.c[e.va]}};
sko.D.yb=function(a){function e(a,b){sko.log("*** subcribing to property "+b);var e=a[b].C(function(e){sko.log("*** received KO notification for property "+b+" -> "+e);if(a.g[b]!=n&&a.g[b]!==e&&!sko.Ia(e)){var h="DELETE { "+a.c()+" "+b+' "'+a.g[b]+'" }',h=h+" INSERT { "+a.c()+" "+b+' "'+e+'" }',h=h+" WHERE { "+a.c()+" "+b+' "'+a.g[b]+'" }',h=h.replace(/"</g,"<").replace(/>"/g,">");a.g[b]=e;sko.log("*** updating STORE: \n  "+h);sko.l.execute(h)}});a.aa.push(e)}for(var b in a.g)e(a,b)};
sko.D.Ob=function(a){return function(e){sko.log("*** received notification change from STORE in resource "+a.c());if(a.c()!=="_:sko_10"){var b={};sko.log("*** triples in STORE resource -> "+e.t().length);e.forEach(function(a){a.object.W==="NamedNode"?(sko.log(" "+a.B.q()+" -> "+a.object.q()),b[a.B.q()]=a.object.q()):(sko.log(" "+a.B.q()+" -> "+a.object.valueOf()),b[a.B.q()]=a.object.valueOf())});var c={},e=[],f=[],h=[],g;for(g in a.g)b[g]!=n?(c[g]=b[g],a.g[g]!==b[g]&&f.push(g)):e.push(g);for(g in b)a.g[g]==
n&&(h.push(g),c[g]=b[g]);a.g=c;for(g=0;g<e.length;g++)sko.log("*** setting value to null "+e[g]+" -> NULL"),a[e[g]](n);for(g=0;g<f.length;g++)sko.log("*** updating value "+f[g]+" -> "+a.g[f[g]]),a[f[g]](a.g[f[g]]);for(g=0;g<h.length;g++)sko.log("*** new value "+h[g]+" -> "+a.g[h[g]]),a[h[g]]=p.s(a.g[h[g]]);sko.log("*** END MODIFICATION")}}};
sko.Wa=function(a,e,b){function c(a,b){node=f[b.Ba];var i=jQuery(node).o("about");i==n&&(dataBind=jQuery(node).o("data-bind"),dataBind!=n&&dataBind.indexOf("about:")!=-1&&(i=/s*([^ ]+)s*,?/.exec(dataBind.split("about:")[1])[0],i[i.length-1]===","&&(i=i.slice(0,i.length-1))));i!=n?(typeof i==="string"&&i[0]!=="<"&&i[i.length-1]!==">"&&(i=e[i]),sko.c(i,e,function(e){jQuery(node).o("aboutId",e);a(c,b)})):a(c,b)}sko.log("** TRACING:");sko.log(a);var f=[];(jQuery(a).o("about")||jQuery(a).o("data-bind"))&&
f.push(a);a=jQuery(a).find("*[about], *[data-bind]").t();f=f.concat(a);Utils.repeat(0,f.length,c,function(){b()})};sko.I=function(a){sko.log("in current resource");sko.log(a);if(a==n)return sko.log("!!! top of DOM tree, About node not found"),n;var e=jQuery(a).o("aboutId");sko.log("about id:"+e);if(e)if(a=sko.c[e](),sko.log("uri:"+a),a!=n)return sko.f[e];else sko.log("!!! current resource is null: "+e);else return sko.log("recurring"),sko.I(jQuery(a).parent().t()[0])};
sko.Da=function(a){sko.log("in current resource node");sko.log(a);if(a==n)return sko.log("!!! top of DOM tree, About node not found"),n;var e=jQuery(a).o("aboutId");sko.log("about id:"+e);if(e){var b=sko.c[e]();sko.log("uri:"+b);return b!=n?a:(sko.log("!!! current resource is null: "+e),n)}else return sko.log("recurring"),sko.Da(jQuery(a).parent().t()[0])};sko.ib=function(a){return jQuery(a).find("*[aboutId]").map(function(){return jQuery(this).o("aboutId")})};
sko.Va=function(a,e,b){function c(a,b){node=f[b.Ba];var i=jQuery(node).o("rel");i==n&&(dataBind=jQuery(node).o("data-bind"),dataBind!=n&&dataBind.indexOf("rel:")!=-1&&(i=/s*([^ ]+)s*,?/.exec(dataBind.split("rel:")[1])[0],i[i.length-1]===","&&(i=i.slice(0,i.length-1))));i!=n?(typeof i==="string"&&i[0]!=="<"&&i[i.length-1]!==">"&&(i=e[i]),jQuery(node).o("aboutId")==n?(sko.log("*** CREATING RELATED NODE"),sko.rel(i,node,e,function(e){jQuery(node).o("aboutId",e);a(c,b)})):(sko.log("*** NODE IS ALREADY TRACED"),
a(c,b))):a(c,b)}sko.log("*** TRACING RELATIONS:");a=sko.Da(a)||a;sko.log("*** FOUND ROOT NODE TO LOOK FOR RELATIONS:");sko.log(a);var f=[];(jQuery(a).o("rel")||jQuery(a).o("data-bind"))&&f.push(a);a=jQuery(a).find("*[rel], *[data-bind]").t();f=f.concat(a);sko.log(" ** NODES TO LOOK FOR RELATED RESOURCES");sko.log(f);Utils.repeat(0,f.length,c,function(){b()})};sko.na=0;sko.V={};
sko.Vb=function(a){var a="select ?subject where "+a,e=""+sko.na;sko.na++;sko.V[e]=p.s([]);sko.log("*** WHERE QUERY: "+a);sko.l.Tb(a,function(a){var c=[];sko.log(" ** RESULTS!!!");for(var f=0;f<a.length;f++)sko.log(" ** ADDING VALUE "+a[f].$.value),c.push("<"+a[f].$.value+">");sko.log("** SETTING VALUE");sko.log(c);sko.V[e](c)});return sko.V[e]};sko.ea=function(a,e,b){typeof a==="string"&&(a=jQuery(a)[0]);sko.Wa(a,e,function(){sko.Va(a,e,function(){p.ea(e,a);b!=n&&b()})})};
})(window);
