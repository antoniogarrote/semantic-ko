// Knockout JavaScript library v1.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,undefined){
function e(a){throw a;}var j=void 0,o=null,p=window.ko={};p.b=function(a,d){for(var c=a.split("."),b=window,f=0;f<c.length-1;f++)b=b[c[f]];b[c[c.length-1]]=d};p.w=function(a,d,c){a[d]=c};
p.a=new function(){function a(a,b){if(a.tagName!="INPUT"||!a.type)return!1;if(b.toLowerCase()!="click")return!1;var c=a.type.toLowerCase();return c=="checkbox"||c=="radio"}var d=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c=/MSIE 6/i.test(navigator.userAgent),b=/MSIE 7/i.test(navigator.userAgent),f={},h={};f[/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];f.MouseEvents="click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave".split(",");
for(var i in f){var g=f[i];if(g.length)for(var m=0,k=g.length;m<k;m++)h[g[m]]=i}return{Qa:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,f=a.length;c<f;c++)b(a[c])},s:function(a,b){if(typeof a.indexOf=="function")return a.indexOf(b);for(var c=0,f=a.length;c<f;c++)if(a[c]===b)return c;return-1},qb:function(a,b,c){for(var f=0,d=a.length;f<d;f++)if(b.call(c,a[f]))return a[f];return o},qa:function(a,b){var c=p.a.s(a,b);c>=0&&a.splice(c,1)},oa:function(a){for(var a=
a||[],b=[],c=0,f=a.length;c<f;c++)p.a.s(b,a[c])<0&&b.push(a[c]);return b},pa:function(a,b){for(var a=a||[],c=[],f=0,d=a.length;f<d;f++)c.push(b(a[f]));return c},na:function(a,b){for(var a=a||[],c=[],f=0,d=a.length;f<d;f++)b(a[f])&&c.push(a[f]);return c},U:function(a,b){for(var c=0,f=b.length;c<f;c++)a.push(b[c])},ta:function(a){for(;a.firstChild;)p.removeNode(a.firstChild)},Xb:function(a,b){p.a.ta(a);b&&p.a.r(b,function(b){a.appendChild(b)})},ab:function(a,b){var c=a.nodeType?[a]:a;if(c.length>0){for(var f=
c[0],d=f.parentNode,g=0,h=b.length;g<h;g++)d.insertBefore(b[g],f);g=0;for(h=c.length;g<h;g++)p.removeNode(c[g])}},cb:function(a,b){navigator.userAgent.indexOf("MSIE 6")>=0?a.setAttribute("selected",b):a.selected=b},Ra:function(a,b){if(!a||a.nodeType!=1)return[];var c=[];a.getAttribute(b)!==o&&c.push(a);for(var f=a.getElementsByTagName("*"),d=0,g=f.length;d<g;d++)f[d].getAttribute(b)!==o&&c.push(f[d]);return c},B:function(a){return(a||"").replace(d,"")},jc:function(a,b){for(var c=[],f=(a||"").split(b),
d=0,g=f.length;d<g;d++){var h=p.a.B(f[d]);h!==""&&c.push(h)}return c},cc:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},Bb:function(a,b,c){if(b===j)return(new Function("return "+a))();b.skonode=c;return(new Function("__SKO__sc","with(__SKO__sc){ return ("+a+") }"))(b)},zb:function(a,b){if(b.compareDocumentPosition)return(b.compareDocumentPosition(a)&16)==16;for(;a!=o;){if(a==b)return!0;a=a.parentNode}return!1},sa:function(a){return p.a.zb(a,document)},R:function(b,
c,f){if(typeof jQuery!="undefined"){if(a(b,c))var d=f,f=function(a,b){var c=this.checked;if(b)this.checked=b.tb!==!0;d.call(this,a);this.checked=c};jQuery(b).bind(c,f)}else typeof b.addEventListener=="function"?b.addEventListener(c,f,!1):typeof b.attachEvent!="undefined"?b.attachEvent("on"+c,function(a){f.call(b,a)}):e(Error("Browser doesn't support addEventListener or attachEvent"))},jb:function(b,c){(!b||!b.nodeType)&&e(Error("element must be a DOM node when calling triggerEvent"));if(typeof jQuery!=
"undefined"){var f=[];a(b,c)&&f.push({tb:b.checked});jQuery(b).trigger(c,f)}else if(typeof document.createEvent=="function")typeof b.dispatchEvent=="function"?(f=document.createEvent(h[c]||"HTMLEvents"),f.initEvent(c,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(f)):e(Error("The supplied element doesn't support dispatchEvent"));else if(typeof b.fireEvent!="undefined"){if(c=="click"&&b.tagName=="INPUT"&&(b.type.toLowerCase()=="checkbox"||b.type.toLowerCase()=="radio"))b.checked=b.checked!==
!0;b.fireEvent("on"+c)}else e(Error("Browser doesn't support triggering events"))},g:function(a){return p.da(a)?a():a},yb:function(a,b){return p.a.s((a.className||"").split(/\s+/),b)>=0},gb:function(a,b,c){var f=p.a.yb(a,b);if(c&&!f)a.className=(a.className||"")+" "+b;else if(f&&!c){for(var c=(a.className||"").split(/\s+/),f="",d=0;d<c.length;d++)c[d]!=b&&(f+=c[d]+" ");a.className=p.a.B(f)}},Sb:function(a,b){for(var a=p.a.g(a),b=p.a.g(b),c=[],f=a;f<=b;f++)c.push(f);return c},za:function(a){for(var b=
[],c=0,f=a.length;c<f;c++)b.push(a[c]);return b},wa:c,Ib:b,Sa:function(a,b){for(var c=p.a.za(a.getElementsByTagName("INPUT")).concat(p.a.za(a.getElementsByTagName("TEXTAREA"))),f=typeof b=="string"?function(a){return a.name===b}:function(a){return b.test(a.name)},d=[],g=c.length-1;g>=0;g--)f(c[g])&&d.push(c[g]);return d},X:function(a){return typeof a=="string"&&(a=p.a.B(a))?window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))():o},Fa:function(a){(typeof JSON=="undefined"||
typeof JSON.stringify=="undefined")&&e(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(p.a.g(a))},Qb:function(a,b,c){var c=c||{},f=c.params||{},d=c.includeFields||this.Qa,g=a;if(typeof a=="object"&&a.tagName=="FORM")for(var g=a.action,h=d.length-1;h>=0;h--)for(var i=p.a.Sa(a,d[h]),m=i.length-1;m>=0;m--)f[i[m].name]=
i[m].value;var b=p.a.g(b),k=document.createElement("FORM");k.style.display="none";k.action=g;k.method="post";for(var u in b)a=document.createElement("INPUT"),a.name=u,a.value=p.a.Fa(p.a.g(b[u])),k.appendChild(a);for(u in f)a=document.createElement("INPUT"),a.name=u,a.value=f[u],k.appendChild(a);document.body.appendChild(k);c.submitter?c.submitter(k):k.submit();setTimeout(function(){k.parentNode.removeChild(k)},0)}}};p.b("ko.utils",p.a);p.b("ko.utils.arrayForEach",p.a.r);
p.b("ko.utils.arrayFirst",p.a.qb);p.b("ko.utils.arrayFilter",p.a.na);p.b("ko.utils.arrayGetDistinctValues",p.a.oa);p.b("ko.utils.arrayIndexOf",p.a.s);p.b("ko.utils.arrayMap",p.a.pa);p.b("ko.utils.arrayPushAll",p.a.U);p.b("ko.utils.arrayRemoveItem",p.a.qa);p.b("ko.utils.fieldsIncludedWithJsonPost",p.a.Qa);p.b("ko.utils.getElementsHavingAttribute",p.a.Ra);p.b("ko.utils.getFormFields",p.a.Sa);p.b("ko.utils.postJson",p.a.Qb);p.b("ko.utils.parseJson",p.a.X);p.b("ko.utils.registerEventHandler",p.a.R);
p.b("ko.utils.stringifyJson",p.a.Fa);p.b("ko.utils.range",p.a.Sb);p.b("ko.utils.toggleDomNodeCssClass",p.a.gb);p.b("ko.utils.triggerEvent",p.a.jb);p.b("ko.utils.unwrapObservable",p.a.g);Function.prototype.bind||(Function.prototype.bind=function(a){var d=this,c=Array.prototype.slice.call(arguments),a=c.shift();return function(){return d.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});
p.a.o=new function(){var a=0,d="__ko__"+(new Date).getTime(),c={};return{get:function(a,c){var d=p.a.o.getAll(a,!1);return d===j?j:d[c]},set:function(a,c,d){d===j&&p.a.o.getAll(a,!1)===j||(p.a.o.getAll(a,!0)[c]=d)},getAll:function(b,f){var h=b[d];if(!h){if(!f)return;h=b[d]="ko"+a++;c[h]={}}return c[h]},clear:function(a){var f=a[d];f&&(delete c[f],a[d]=o)}}};
p.a.M=new function(){function a(a,f){var d=p.a.o.get(a,c);d===j&&f&&(d=[],p.a.o.set(a,c,d));return d}function d(b){sko.L(b);var c=a(b,!1);if(c)for(var c=c.slice(0),d=0;d<c.length;d++)c[d](b);p.a.o.clear(b);typeof jQuery=="function"&&typeof jQuery.cleanData=="function"&&jQuery.cleanData([b])}var c="__ko_domNodeDisposal__"+(new Date).getTime();return{La:function(b,c){typeof c!="function"&&e(Error("Callback must be a function"));a(b,!0).push(c)},$a:function(b,f){var d=a(b,!1);d&&(p.a.qa(d,f),d.length==
0&&p.a.o.set(b,c,j))},L:function(a){if(!(a.nodeType!=1&&a.nodeType!=9)){d(a);var c=[];p.a.U(c,a.getElementsByTagName("*"));for(var a=0,h=c.length;a<h;a++)d(c[a])}},removeNode:function(a){p.L(a);a.parentNode&&a.parentNode.removeChild(a)}}};p.L=p.a.M.L;p.removeNode=p.a.M.removeNode;p.b("ko.cleanNode",p.L);p.b("ko.removeNode",p.removeNode);p.b("ko.utils.domNodeDisposal",p.a.M);p.b("ko.utils.domNodeDisposal.addDisposeCallback",p.a.M.La);p.b("ko.utils.domNodeDisposal.removeDisposeCallback",p.a.M.$a);
p.a.Pb=function(a){if(typeof jQuery!="undefined")a=jQuery.clean([a]);else{var d=p.a.B(a).toLowerCase(),c=document.createElement("div"),d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];for(c.innerHTML=d[1]+a+d[2];d[0]--;)c=c.lastChild;a=p.a.za(c.childNodes)}return a};
p.a.Yb=function(a,d){p.a.ta(a);if(d!==o&&d!==j)if(typeof d!="string"&&(d=d.toString()),typeof jQuery!="undefined")jQuery(a).html(d);else for(var c=p.a.Pb(d),b=0;b<c.length;b++)a.appendChild(c[b])};
p.C=function(){function a(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function d(a,c){if(a)if(a.nodeType==8){var h=p.C.Xa(a.nodeValue);h!=o&&c.push({xb:a,Mb:h})}else if(a.nodeType==1)for(var h=0,i=a.childNodes,g=i.length;h<g;h++)d(i[h],c)}var c={};return{Aa:function(b){typeof b!="function"&&e(Error("You can only pass a function to ko.memoization.memoize()"));var f=a()+a();c[f]=b;return"<\!--[ko_memo:"+f+"]--\>"},kb:function(a,f){var d=c[a];d===j&&e(Error("Couldn't find any memo with ID "+
a+". Perhaps it's already been unmemoized."));try{return d.apply(o,f||[]),!0}finally{delete c[a]}},lb:function(a,c){var h=[];d(a,h);for(var i=0,g=h.length;i<g;i++){var m=h[i].xb,k=[m];c&&p.a.U(k,c);p.C.kb(h[i].Mb,k);m.nodeValue="";m.parentNode&&m.parentNode.removeChild(m)}},Xa:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:o}}}();p.b("ko.memoization",p.C);p.b("ko.memoization.memoize",p.C.Aa);p.b("ko.memoization.unmemoize",p.C.kb);p.b("ko.memoization.parseMemoText",p.C.Xa);
p.b("ko.memoization.unmemoizeDomNodeAndDescendants",p.C.lb);p.dc=function(a,d){this.sb=a;this.z=function(){this.Hb=!0;d()}.bind(this);p.w(this,"dispose",this.z)};p.Ga=function(){var a=[];this.G=function(d,c){var b=c?d.bind(c):d,f=new p.dc(b,function(){p.a.qa(a,f)});a.push(f);return f};this.W=function(d){p.a.r(a.slice(0),function(a){a&&a.Hb!==!0&&a.sb(d)})};this.Db=function(){return a.length};p.w(this,"subscribe",this.G);p.w(this,"notifySubscribers",this.W);p.w(this,"getSubscriptionsCount",this.Db)};
p.Va=function(a){return typeof a.G=="function"&&typeof a.W=="function"};p.b("ko.subscribable",p.Ga);p.b("ko.isSubscribable",p.Va);p.$=function(){var a=[];return{rb:function(){a.push([])},end:function(){return a.pop()},Za:function(d){p.Va(d)||e("Only subscribable things can act as dependencies");a.length>0&&a[a.length-1].push(d)}}}();var x={undefined:!0,"boolean":!0,number:!0,string:!0};function y(a,d){return a===o||typeof a in x?a===d:!1}
p.p=function(a){function d(){if(arguments.length>0){if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))c=arguments[0],d.W(c);return this}else return p.$.Za(d),c}var c=a;d.K=p.p;d.ja=function(){d.W(c)};d.equalityComparer=y;p.Ga.call(d);p.w(d,"valueHasMutated",d.ja);return d};p.da=function(a){return a===o||a===j||a.K===j?!1:a.K===p.p?!0:p.da(a.K)};p.ea=function(a){return typeof a=="function"&&a.K===p.p?!0:typeof a=="function"&&a.K===p.m&&a.Eb?!0:!1};p.b("ko.observable",p.p);
p.b("ko.isObservable",p.da);p.b("ko.isWriteableObservable",p.ea);
p.Ob=function(a){arguments.length==0&&(a=[]);a!==o&&a!==j&&!("length"in a)&&e(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var d=new p.p(a);p.a.r("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){d[a]=function(){var b=d(),b=b[a].apply(b,arguments);d.ja();return b}});p.a.r(["slice"],function(a){d[a]=function(){var b=d();return b[a].apply(b,arguments)}});d.remove=function(a){for(var b=d(),f=[],h=[],i=typeof a=="function"?
a:function(b){return b===a},g=0,m=b.length;g<m;g++){var k=b[g];i(k)?h.push(k):f.push(k)}d(f);return h};d.Ub=function(a){if(a===j){var b=d();d([]);return b}return!a?[]:d.remove(function(b){return p.a.s(a,b)>=0})};d.ra=function(a){for(var b=d(),f=typeof a=="function"?a:function(b){return b===a},h=b.length-1;h>=0;h--)f(b[h])&&(b[h]._destroy=!0);d.ja()};d.wb=function(a){return a===j?d.ra(function(){return!0}):!a?[]:d.ra(function(b){return p.a.s(a,b)>=0})};d.indexOf=function(a){var b=d();return p.a.s(b,
a)};d.replace=function(a,b){var f=d.indexOf(a);f>=0&&(d()[f]=b,d.ja())};p.w(d,"remove",d.remove);p.w(d,"removeAll",d.Ub);p.w(d,"destroy",d.ra);p.w(d,"destroyAll",d.wb);p.w(d,"indexOf",d.indexOf);return d};p.b("ko.observableArray",p.Ob);
p.m=function(a,d,c){function b(){p.a.r(n,function(a){a.z()});n=[]}function f(a){b();p.a.r(a,function(a){n.push(a.G(h))})}function h(){if(m&&typeof c.disposeWhen=="function"&&c.disposeWhen())i.z();else{try{p.$.rb(),g=c.owner?c.read.call(c.owner):c.read()}finally{var a=p.a.oa(p.$.end());f(a)}i.W(g);m=!0}}function i(){if(arguments.length>0)if(typeof c.write==="function"){var a=arguments[0];c.owner?c.write.call(c.owner,a):c.write(a)}else e("Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
else return m||h(),p.$.Za(i),g}var g,m=!1;a&&typeof a=="object"?c=a:(c=c||{},c.read=a||c.read,c.owner=d||c.owner);typeof c.read!="function"&&e("Pass a function that returns the value of the dependentObservable");var k=typeof c.disposeWhenNodeIsRemoved=="object"?c.disposeWhenNodeIsRemoved:o,l=o;if(k){l=function(){i.z()};p.a.M.La(k,l);var q=c.disposeWhen;c.disposeWhen=function(){return!p.a.sa(k)||typeof q=="function"&&q()}}var n=[];i.K=p.m;i.Cb=function(){return n.length};i.Eb=typeof c.write==="function";
i.z=function(){k&&p.a.M.$a(k,l);b()};p.Ga.call(i);c.deferEvaluation!==!0&&h();p.w(i,"dispose",i.z);p.w(i,"getDependenciesCount",i.Cb);return i};p.m.K=p.p;p.b("ko.dependentObservable",p.m);
(function(){function a(b,f,h){h=h||new c;b=f(b);if(!(typeof b=="object"&&b!==o&&b!==j))return b;var i=b instanceof Array?[]:{};h.save(b,i);d(b,function(c){var d=f(b[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":i[c]=d;break;case "object":case "undefined":var k=h.get(d);i[c]=k!==j?k:a(d,f,h)}});return i}function d(a,c){if(a instanceof Array)for(var d=0;d<a.length;d++)c(d);else for(d in a)c(d)}function c(){var a=[],c=[];this.save=function(d,i){var g=p.a.s(a,d);g>=0?
c[g]=i:(a.push(d),c.push(i))};this.get=function(d){d=p.a.s(a,d);return d>=0?c[d]:j}}p.fb=function(b){arguments.length==0&&e(Error("When calling ko.toJS, pass the object you want to convert."));return a(b,function(a){for(var b=0;p.da(a)&&b<10;b++)a=a();return a})};p.toJSON=function(a){a=p.fb(a);return p.a.Fa(a)}})();p.b("ko.toJS",p.fb);p.b("ko.toJSON",p.toJSON);
p.q={D:function(a){return a.tagName=="OPTION"?a.__ko__hasDomDataOptionValue__===!0?p.a.o.get(a,p.d.options.Ba):a.getAttribute("value"):a.tagName=="SELECT"?a.selectedIndex>=0?p.q.D(a.options[a.selectedIndex]):j:a.value},ka:function(a,d){if(a.tagName=="OPTION")switch(typeof d){case "string":case "number":p.a.o.set(a,p.d.options.Ba,j);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=d;break;default:p.a.o.set(a,p.d.options.Ba,d),a.__ko__hasDomDataOptionValue__=!0,a.value=
""}else if(a.tagName=="SELECT")for(var c=a.options.length-1;c>=0;c--){if(p.q.D(a.options[c])==d){a.selectedIndex=c;break}}else{if(d===o||d===j)d="";a.value=d}}};p.b("ko.selectExtensions",p.q);p.b("ko.selectExtensions.readValue",p.q.D);p.b("ko.selectExtensions.writeValue",p.q.ka);
p.J=function(){function a(a,b){return a.replace(c,function(a,c){return b[c]})}function d(a){return p.a.s(f,p.a.B(a).toLowerCase())>=0?!1:a[0]=="<"&&a[a.length-1]==">"?!0:a.match(b)!==o}var c=/\[ko_token_(\d+)\]/g,b=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,f=["true","false"];return{X:function(b){b=p.a.B(b);if(b.length<3)return{};for(var c=[],d=o,f,k=b.charAt(0)=="{"?1:0;k<b.length;k++){var l=b.charAt(k);if(d===o)switch(l){case '"':case "'":case "/":d=k;f=l;break;case "<":d=
k;f=">";break;case "{":d=k;f="}";break;case "[":d=k,f="]"}else if(l==f){l=b.substring(d,k+1);c.push(l);var q="[ko_token_"+(c.length-1)+"]",b=b.substring(0,d)+q+b.substring(k+1);k-=l.length-q.length;d=o}}d={};b=b.split(",");f=0;for(k=b.length;f<k;f++){var q=b[f],n=q.indexOf(":");n>0&&n<q.length-1&&(l=p.a.B(q.substring(0,n)),q=p.a.B(q.substring(n+1)),l.charAt(0)=="{"&&(l=l.substring(1)),q.charAt(q.length-1)=="}"&&(q=q.substring(0,q.length-1)),l=p.a.B(a(l,c)),q=p.a.B(a(q,c)),d[l]=q)}return d},Fb:function(a){var b=
p.J.X(a),c=[],f;for(f in b){var k=b[f];d(k)&&(c.length>0&&c.push(", "),c.push(f+" : function(__ko_value) { "+k+" = __ko_value; }"))}c.length>0&&(a=a+", '_ko_property_writers' : { "+c.join("")+" } ");return a},va:function(a){var a=p.J.X(a),b=[],c="",f=!0,k;for(k in a){var l=a[k];d(l)&&(b.length>0&&b.push(", "),l[0]==="<"&&l[l.length-1]===">"&&k!=="about"&&k!=="rel"?b.push(k+" : function(__ko_value) { sko.current = function() { return sko.currentResource(skonode); }; sko.current().tryProperty('"+l+
"') = __ko_value; }"):l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=o&&k!=="about"&&k!=="rel"?b.push(k+" : function(__ko_value) { sko.current = function() { return sko.currentResource(skonode); }; sko.current().tryProperty('"+l+"') = __ko_value; }"):l[0]==="<"&&l[l.length-1]===">"&&(k==="about"||k==="rel")||l[0]==="["&&l[l.length-1]==="]"&&(k==="about"||k==="rel")||b.push(k+" : function(__ko_value) { sko.current = function() { return sko.currentResource(skonode); }; "+l+" = __ko_value; }"));
f?f=!1:c+=", ";c=l[0]==="<"&&l[l.length-1]===">"&&k!=="about"&&k!=="rel"?c+k+": (function(){ sko.current = function() { return sko.currentResource(skonode); }; return sko.current().tryProperty('"+l+"') })()":l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=o&&k!=="about"&&k!=="rel"?c+k+": (function(){ sko.current = function() { return sko.currentResource(skonode); }; return sko.current().tryProperty('"+l+"') })()":l[0]==="<"&&l[l.length-1]===">"&&(k==="about"||k==="rel")?c+k+": '"+l.slice(1,
l.length-1)+"'":l.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=o&&(k==="about"||k==="rel")?c+k+": sko.rdf.prefixes.resolve('"+l.slice(1,l.length-1)+"')":c+k+": (function(){ sko.current = function() { return sko.currentResource(skonode); }; return "+l+" })()"}a=c;b.length>0&&(a=a+", '_ko_property_writers' : { "+b.join("")+" } ");return a}}}();p.b("ko.jsonExpressionRewriting",p.J);p.b("ko.jsonExpressionRewriting.parseJson",p.J.X);
p.b("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",p.J.Fb);p.b("ko.jsonExpressionRewriting.insertPropertyReaderWritersIntoJson",p.J.va);p.d={};
p.ma=function(a,d,c,b){function f(a){return function(){return g[a]}}function h(){return g}var i=!0,b=b||"data-bind",g;new p.m(function(){var m;if(typeof d=="function"){c.skonode=a;with(c)m=d()}else m=d;if(!m){var k=a.getAttribute(b);try{var l=" { "+p.J.va(k)+" } ";m=p.a.Bb(l,c===o?window:c,a)}catch(q){e(Error("Unable to parse binding attribute.\nMessage: "+q+";\nAttribute value: "+k))}}g=m;if(i)for(var n in g)p.d[n]&&typeof p.d[n].init=="function"&&(0,p.d[n].init)(a,f(n),h,c);for(n in g)p.d[n]&&typeof p.d[n].update==
"function"&&(0,p.d[n].update)(a,f(n),h,c)},o,{disposeWhenNodeIsRemoved:a});i=!1};p.la=function(a,d){d&&d.nodeType==j&&e(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)"));var d=d||window.document.body,c=p.a.Ra(d,"data-bind");p.a.r(c,function(b){p.ma(b,o,a)})};p.b("ko.bindingHandlers",p.d);p.b("ko.applyBindings",p.la);p.b("ko.applyBindingsToNode",p.ma);
p.a.r(["click"],function(a){p.d[a]={init:function(d,c,b,f){return p.d.event.init.call(this,d,function(){var b={};b[a]=c();return b},b,f)}}});p.d.event={init:function(a,d,c,b){var f=d()||{},h;for(h in f)(function(){var f=h;typeof f=="string"&&p.a.R(a,f,function(a){var h,k=d()[f];if(k){var l=c();try{h=k.apply(b,arguments)}finally{if(h!==!0)a.preventDefault?a.preventDefault():a.returnValue=!1}if(l[f+"Bubble"]===!1)a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()}})})()}};
p.d.submit={init:function(a,d,c,b){typeof d()!="function"&&e(Error("The value for a submit binding must be a function to invoke on submit"));p.a.R(a,"submit",function(c){var h,i=d();try{h=i.call(b,a)}finally{if(h!==!0)c.preventDefault?c.preventDefault():c.returnValue=!1}})}};p.d.visible={update:function(a,d){var c=p.a.g(d()),b=a.style.display!="none";if(c&&!b)a.style.display="";else if(!c&&b)a.style.display="none"}};
p.d.enable={update:function(a,d){var c=p.a.g(d());if(c&&a.disabled)a.removeAttribute("disabled");else if(!c&&!a.disabled)a.disabled=!0}};p.d.disable={update:function(a,d){p.d.enable.update(a,function(){return!p.a.g(d())})}};
p.d.value={init:function(a,d,c){var b=["change"],f=c().valueUpdate;f&&(typeof f=="string"&&(f=[f]),p.a.U(b,f),b=p.a.oa(b));p.a.r(b,function(b){var f=!1;p.a.cc(b,"after")&&(f=!0,b=b.substring(5));var g=f?function(a){setTimeout(a,0)}:function(a){a()};p.a.R(a,b,function(){g(function(){var b=d(),f=p.q.D(a);p.ea(b)?b(f):(b=c(),b._ko_property_writers&&b._ko_property_writers.value&&b._ko_property_writers.value(f))})})})},update:function(a,d){var c=p.a.g(d()),b=p.q.D(a),f=c!=b;c===0&&b!==0&&b!=="0"&&(f=!0);
f&&(b=function(){p.q.ka(a,c)},b(),a.tagName=="SELECT"&&setTimeout(b,0));a.tagName=="SELECT"&&(b=p.q.D(a),b!==c&&p.a.jb(a,"change"))}};
p.d.options={update:function(a,d,c){a.tagName!="SELECT"&&e(Error("options binding applies only to SELECT elements"));var b=p.a.pa(p.a.na(a.childNodes,function(a){return a.tagName&&a.tagName=="OPTION"&&a.selected}),function(a){return p.q.D(a)||a.innerText||a.textContent}),f=a.scrollTop,h=p.a.g(d());p.a.ta(a);if(h){var i=c();typeof h.length!="number"&&(h=[h]);if(i.optionsCaption){var g=document.createElement("OPTION");g.innerHTML=i.optionsCaption;p.q.ka(g,j);a.appendChild(g)}c=0;for(d=h.length;c<d;c++){var g=
document.createElement("OPTION"),m=typeof i.optionsValue=="string"?h[c][i.optionsValue]:h[c],m=p.a.g(m);p.q.ka(g,m);var k=i.optionsText;optionText=typeof k=="function"?k(h[c]):typeof k=="string"?h[c][k]:m;if(optionText===o||optionText===j)optionText="";optionText=p.a.g(optionText).toString();typeof g.innerText=="string"?g.innerText=optionText:g.textContent=optionText;a.appendChild(g)}h=a.getElementsByTagName("OPTION");c=i=0;for(d=h.length;c<d;c++)p.a.s(b,p.q.D(h[c]))>=0&&(p.a.cb(h[c],!0),i++);if(f)a.scrollTop=
f}}};p.d.options.Ba="__ko.bindingHandlers.options.optionValueDomData__";
p.d.selectedOptions={Ta:function(a){for(var d=[],a=a.childNodes,c=0,b=a.length;c<b;c++){var f=a[c];f.tagName=="OPTION"&&f.selected&&d.push(p.q.D(f))}return d},init:function(a,d,c){p.a.R(a,"change",function(){var a=d();p.ea(a)?a(p.d.selectedOptions.Ta(this)):(a=c(),a._ko_property_writers&&a._ko_property_writers.value&&a._ko_property_writers.value(p.d.selectedOptions.Ta(this)))})},update:function(a,d){a.tagName!="SELECT"&&e(Error("values binding applies only to SELECT elements"));var c=p.a.g(d());if(c&&
typeof c.length=="number")for(var b=a.childNodes,f=0,h=b.length;f<h;f++){var i=b[f];i.tagName=="OPTION"&&p.a.cb(i,p.a.s(c,p.q.D(i))>=0)}}};p.d.text={update:function(a,d){var c=p.a.g(d());if(c===o||c===j)c="";typeof a.innerText=="string"?a.innerText=c:a.textContent=c}};p.d.html={update:function(a,d){var c=p.a.g(d());p.a.Yb(a,c)}};p.d.css={update:function(a,d){var c=p.a.g(d()||{}),b;for(b in c)if(typeof b=="string"){var f=p.a.g(c[b]);p.a.gb(a,b,f)}}};
p.d.style={update:function(a,d){var c=p.a.g(d()||{}),b;for(b in c)if(typeof b=="string"){var f=p.a.g(c[b]);a.style[b]=f||""}}};p.d.uniqueName={init:function(a,d){if(d())a.name="ko_unique_"+ ++p.d.uniqueName.vb,p.a.wa&&a.mergeAttributes(document.createElement("<input name='"+a.name+"'/>"),!1)}};p.d.uniqueName.vb=0;
p.d.checked={init:function(a,d,c){p.a.R(a,"click",function(){var b;if(a.type=="checkbox")b=a.checked;else if(a.type=="radio"&&a.checked)b=a.value;else return;var f=d();a.type=="checkbox"&&p.a.g(f)instanceof Array?(b=p.a.s(p.a.g(f),a.value),a.checked&&b<0?f.push(a.value):!a.checked&&b>=0&&f.splice(b,1)):p.ea(f)?f()!==b&&f(b):(f=c(),f._ko_property_writers&&f._ko_property_writers.checked&&f._ko_property_writers.checked(b))});a.type=="radio"&&!a.name&&p.d.uniqueName.init(a,function(){return!0})},update:function(a,
d){var c=p.a.g(d());if(a.type=="checkbox")a.checked=c instanceof Array?p.a.s(c,a.value)>=0:c,c&&p.a.wa&&a.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),!1);else if(a.type=="radio")a.checked=a.value==c,a.value==c&&(p.a.wa||p.a.Ib)&&a.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),!1)}};
p.d.attr={update:function(a,d){var c=p.a.g(d())||{},b;for(b in c)if(typeof b=="string"){var f=p.a.g(c[b]);f===!1||f===o||f===j?a.removeAttribute(b):a.setAttribute(b,f.toString())}}};
p.Ha=function(){this.renderTemplate=function(){e("Override renderTemplate in your ko.templateEngine subclass")};this.isTemplateRewritten=function(){e("Override isTemplateRewritten in your ko.templateEngine subclass")};this.rewriteTemplate=function(){e("Override rewriteTemplate in your ko.templateEngine subclass")};this.createJavaScriptEvaluatorBlock=function(){e("Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass")}};p.b("ko.templateEngine",p.Ha);
p.ia=function(){var a=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;return{Ab:function(a,c){c.isTemplateRewritten(a)||c.rewriteTemplate(a,function(a){return p.ia.Nb(a,c)})},Nb:function(d,c){return d.replace(a,function(a,d,h,i,g,m,k){a=p.J.va(k);return c.createJavaScriptEvaluatorBlock("ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {                     return (function() { return { "+a+" } })()                 })")+d})},
ob:function(a){return p.C.Aa(function(c,b){c.nextSibling&&sko.ib(c.nextSibling,b,function(){sko.hb(c.nextSibling,b,function(){p.ma(c.nextSibling,a,b)})})})}}}();p.b("ko.templateRewriting",p.ia);p.b("ko.templateRewriting.applyMemoizedBindingsToNextSibling",p.ia.ob);
(function(){function a(a,b,f,h,i){var g=p.a.g(h),i=i||{},m=i.templateEngine||d;p.ia.Ab(f,m);f=m.renderTemplate(f,g,i);(typeof f.length!="number"||f.length>0&&typeof f[0].nodeType!="number")&&e("Template engine must return an array of DOM nodes");switch(b){case "replaceChildren":p.a.Xb(a,f);break;case "replaceNode":p.a.ab(a,f);break;case "ignoreTargetNode":break;default:e(Error("Unknown renderMode: "+b))}f&&p.a.r(f,function(a){p.C.lb(a,[h])});i.afterRender&&i.afterRender(f,h);return f}var d;p.eb=function(a){a!=
j&&!(a instanceof p.Ha)&&e("templateEngine must inherit from ko.templateEngine");d=a};p.Ca=function(c,b,f,h,i){f=f||{};(f.templateEngine||d)==j&&e("Set a template engine before calling renderTemplate");i=i||"replaceChildren";if(h){var g=h.nodeType?h:h.length>0?h[0]:o;return new p.m(function(){var d=typeof c=="function"?c(b):c,d=a(h,i,d,b,f);i=="replaceNode"&&(h=d,g=h.nodeType?h:h.length>0?h[0]:o)},o,{disposeWhen:function(){return!g||!p.a.sa(g)},disposeWhenNodeIsRemoved:g&&i=="replaceNode"?g.parentNode:
g})}else return p.C.Aa(function(a){p.Ca(c,b,f,a,"replaceNode")})};p.Vb=function(c,b,d,h){return new p.m(function(){var i=p.a.g(b)||[];typeof i.length=="undefined"&&(i=[i]);i=p.a.na(i,function(a){return d.includeDestroyed||!a._destroy});p.a.bb(h,i,function(b){var h=typeof c=="function"?c(b):c;return a(o,"ignoreTargetNode",h,b,d)},d)},o,{disposeWhenNodeIsRemoved:h})};p.d.template={update:function(a,b,d,h){b=p.a.g(b());d=typeof b=="string"?b:b.name;if(typeof b.foreach!="undefined")h=p.Vb(d,b.foreach||
[],{templateOptions:b.templateOptions,afterAdd:b.afterAdd,beforeRemove:b.beforeRemove,includeDestroyed:b.includeDestroyed,afterRender:b.afterRender},a);else var i=b.data,h=p.Ca(d,typeof i=="undefined"?h:i,{templateOptions:b.templateOptions,afterRender:b.afterRender},a);(b=p.a.o.get(a,"__ko__templateSubscriptionDomDataKey__"))&&typeof b.z=="function"&&b.z();p.a.o.set(a,"__ko__templateSubscriptionDomDataKey__",h)}}})();p.b("ko.setTemplateEngine",p.eb);p.b("ko.renderTemplate",p.Ca);
p.a.V=function(a,d,c){if(c===j)return p.a.V(a,d,1)||p.a.V(a,d,10)||p.a.V(a,d,Number.MAX_VALUE);else{for(var a=a||[],d=d||[],b=a,f=d,h=[],i=0;i<=f.length;i++)h[i]=[];for(var i=0,g=Math.min(b.length,c);i<=g;i++)h[0][i]=i;i=1;for(g=Math.min(f.length,c);i<=g;i++)h[i][0]=i;for(var g=b.length,m,k=f.length,i=1;i<=g;i++){m=Math.max(1,i-c);for(var l=Math.min(k,i+c);m<=l;m++)h[m][i]=b[i-1]===f[m-1]?h[m-1][i-1]:Math.min(h[m-1][i]===j?Number.MAX_VALUE:h[m-1][i]+1,h[m][i-1]===j?Number.MAX_VALUE:h[m][i-1]+1)}c=
a.length;b=d.length;f=[];i=h[b][c];if(i===j)h=o;else{for(;c>0||b>0;){g=h[b][c];k=b>0?h[b-1][c]:i+1;l=c>0?h[b][c-1]:i+1;m=b>0&&c>0?h[b-1][c-1]:i+1;if(k===j||k<g-1)k=i+1;if(l===j||l<g-1)l=i+1;m<g-1&&(m=i+1);k<=l&&k<m?(f.push({status:"added",value:d[b-1]}),b--):(l<k&&l<m?f.push({status:"deleted",value:a[c-1]}):(f.push({status:"retained",value:a[c-1]}),b--),c--)}h=f.reverse()}return h}};p.b("ko.utils.compareArrays",p.a.V);
(function(){function a(a,c,b){var f=[],a=p.m(function(){var a=c(b)||[];f.length>0&&p.a.ab(f,a);f.splice(0,f.length);p.a.U(f,a)},o,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return f.length==0||!p.a.sa(f[0])}});return{Lb:f,m:a}}p.a.bb=function(d,c,b,f){for(var c=c||[],f=f||{},h=p.a.o.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===j,i=p.a.o.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],g=p.a.pa(i,function(a){return a.pb}),m=p.a.V(g,c),c=[],k=0,l=[],g=[],
q=o,n=0,v=m.length;n<v;n++)switch(m[n].status){case "retained":var r=i[k];c.push(r);r.aa.length>0&&(q=r.aa[r.aa.length-1]);k++;break;case "deleted":i[k].m.z();p.a.r(i[k].aa,function(a){l.push({element:a,index:n,value:m[n].value});q=a});k++;break;case "added":var s=a(d,b,m[n].value),r=s.Lb;c.push({pb:m[n].value,aa:r,m:s.m});for(var s=0,w=r.length;s<w;s++){var t=r[s];g.push({element:t,index:n,value:m[n].value});q==o?d.firstChild?d.insertBefore(t,d.firstChild):d.appendChild(t):q.nextSibling?d.insertBefore(t,
q.nextSibling):d.appendChild(t);q=t}}p.a.r(l,function(a){p.L(a.element)});b=!1;if(!h){if(f.afterAdd)for(n=0;n<g.length;n++)f.afterAdd(g[n].element,g[n].index,g[n].value);if(f.beforeRemove){for(n=0;n<l.length;n++)f.beforeRemove(l[n].element,l[n].index,l[n].value);b=!0}}b||p.a.r(l,function(a){a.element.parentNode&&a.element.parentNode.removeChild(a.element)});p.a.o.set(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult",c)}})();p.b("ko.utils.setDomNodeChildrenFromArrayMapping",p.a.bb);
p.ya=function(){this.Q=typeof jQuery=="undefined"||!jQuery.tmpl?0:jQuery.tmpl.tag?jQuery.tmpl.tag.tmpl&&jQuery.tmpl.tag.tmpl.open&&jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?3:2:1;this.getTemplateNode=function(a){var c=document.getElementById(a);c==o&&e(Error("Cannot find template with ID="+a));return c};var a=RegExp("__ko_apos__","g");this.renderTemplate=function(d,c,b){b=b||{};this.Q==0&&e(Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details."));
if(this.Q==1)return d='<script type="text/html">'+this.getTemplateNode(d).text+"<\/script>",c=jQuery.tmpl(d,c)[0].text.replace(a,"'"),jQuery.clean([c],document);if(!(d in jQuery.template)){var f=this.getTemplateNode(d).text;jQuery.template(d,f)}c=[c];c=jQuery.tmpl(d,c,b.templateOptions);c.appendTo(document.createElement("div"));jQuery.fragments={};return c};this.isTemplateRewritten=function(a){return a in jQuery.template?!0:this.getTemplateNode(a).Jb===!0};this.rewriteTemplate=function(a,c){var b=
this.getTemplateNode(a),f=c(b.text);this.Q==1&&(f=p.a.B(f),f=f.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g,function(a,b,c){return b.replace(/\'/g,"__ko_apos__")+c}));b.text=f;b.Jb=!0};this.createJavaScriptEvaluatorBlock=function(a){return this.Q==1?"{{= "+a+"}}":"{{ko_code ((function() { return "+a+" })()) }}"};this.nb=function(a,c){document.write("<script type='text/html' id='"+a+"'>"+c+"<\/script>")};p.w(this,"addTemplate",this.nb);this.Q>1&&(jQuery.tmpl.tag.ko_code={open:(this.Q<
3?"_":"__")+".push($1 || '');"})};p.ya.prototype=new p.Ha;p.eb(new p.ya);p.b("ko.jqueryTmplTemplateEngine",p.ya);Utils={Zb:1E3,Ea:0};Utils.Tb=function(a){Utils.Ea===Utils.Zb?(Utils.Ea=0,setTimeout(a,0)):(Utils.Ea++,a())};Utils.repeat=function(a,d,c,b,f){arguments.length===4&&(f={});a<d?(f.Ka=a,c(function(c,f){Utils.Tb(function(){Utils.repeat(a+1,d,c,b,f)})},f)):b(f)};SemanticKnockOut={};window.sko=SemanticKnockOut;sko.mb=!1;sko.log=function(a){sko.mb&&console.log(a)};sko.k={};sko.k.Ia=function(){};
sko.k.Z={};sko.k.ec=function(a,d){sko.k.Z[sko.n(a.replace(/\s*/g,""))]=d};sko.k.Gb=function(a,d){var c=sko.n(a),b=d||{};sko.k.Ia.prototype=sko.k.Z[c];c=new sko.k.Ia;b.Pa=o;for(var f in c)b[f]==o&&(b[f]=c[f]);b.Pa&&b.Pa()};sko.k.Ma=function(a,d){var c=d||!1,b;for(b in sko.k.Z)if(sko.log("*** IS INSTANCE OF? "+b),sko.k.xa(a,b))sko.log("Y!"),(c||a.I[b]==o)&&sko.k.Gb(b,a),a.I[b]=!0;else if(sko.log("N!"),a.I[b]!=o){delete a.I[b];for(var f in sko.k.Z[b])delete a[f]}};
sko.k.xa=function(a,d){if(d.indexOf("ObjectIntersectionOf(")===0){for(var c=d.slice(0,d.length-1).split("ObjectIntersectionOf(")[1].split(","),b=0;b<c.length;b++)if(sko.log("INTERSECTION CHECKING "+c[b]),!sko.k.xa(a,c[b]))return!1;return!0}else if(d.indexOf("ObjectUnionOf(")===0){c=d.slice(0,d.length-1).split("ObjectUnionOf(")[1].split(",");for(b=0;b<c.length;b++)if(sko.k.xa(a,c[b]))return!0;return!1}else if(d.indexOf("ObjectSomeValuesFrom(")===0){c=d.slice(0,d.length-1).split("ObjectSomeValuesFrom(")[1];
sko.log("CHECKIN CLASS URI: "+sko.n(c));for(b in a.h)sko.log(" - "+b+" ---\> "+a.h[sko.n(c)]);return a.h[sko.n(c)]!=o}else{sko.log("CHECKIN CLASS URI: "+sko.n(d));sko.log(a);for(b in a.I)sko.log(" - "+b+" ---\> "+a.I[b]);return a.I[sko.n(d)]===!0}};sko.gc=function(){sko.i={};sko.T={};sko.k.Z={};sko.S=0;sko.ua=0;sko.ba={};var a=o;arguments.length===2?(sko.l=arguments[0],a=arguments[1],sko.Y=sko.l.Y,a(!0)):(a=arguments[0],rdfstore.create(function(d){sko.l=d;sko.Y=sko.l.Y;a(!0)}))};sko.Ja=0;
sko.A=function(){var a="_:sko_"+sko.Ja;sko.Ja++;return a};sko.i={};sko.T={};sko.S=0;
sko.c=function(a,d,c){if(sko.c[a]!=o)c(a);else{var b=""+sko.S;sko.S++;a==o&&(a=sko.A());if(typeof a==="string"){var f=a;sko.l.N(sko.j(f),function(a,d){if(a){sko.log("FOUND RESOURCE: "+f);sko.log(d);sko.log(" FOR "+sko.j(f));sko.log(" ------------\> "+b+" : "+f);sko.i[b]=new sko.H(b,f,d);sko.c[b]=p.p(f);var g=sko.c[b].G(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+b+" new value -> "+a);a==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.A());sko.l.N(sko.j(a),function(c,d){if(c){var f=
d.v()[0].ga.valueOf();sko.log(" ------------\> "+b+" : "+f+" 2");sko.i[b].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : "+a+" 3"),sko.i[b].c(a)})});sko.T[b]=g}c(b)})}else sko.c[b]=p.m({Ya:function(){var c=a();sko.log("*** OBSERVABLE READING DEPENDING NODE ABOT ID:"+b+" new value -> "+c);c==o&&(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),c=sko.A());return c},write:function(c){sko.log("*** OBSERVABLE WRITING DEPENDING NODE ABOT ID:"+b+" new value -> "+c);c==o&&
(sko.log(" ** URI IS BLANK -> GEN BLANK LABEL"),c=sko.A());a(c)},Wa:d}),sko.l.N(sko.j(sko.c[b]()),function(a,d){if(a){sko.log(" ------------\> "+b+" : "+d+" 4");sko.i[b]=new sko.H(b,sko.c[b](),d);var f=sko.c[b].G(function(a){sko.log("*** OBSERVING NODE ABOT ID:"+b+" new value -> "+a);a!=o?sko.l.N(sko.j(a),function(c,d){if(c)if(d.v().length>0){var f=d.v()[0].ga.e();sko.log(" ------------\> "+b+" : "+f+" 5");sko.i[b].c(f)}else sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : "+
a+" 6"),sko.i[b].c(a);else sko.log("Error updating 3 resource for URI:"+a+" in SKO about node observer"),sko.log("*** NO RESOURCE FOR URI:"+a+" NEXT ID:"+b),sko.log(" ------------\> "+b+" : "+a+" 7"),sko.i[b].c(a)}):(sko.log("*** NO RESOURCE FOR URI:"+a),sko.log(" ------------\> "+b+" : NEW BLANK  8"),sko.i[b].c(sko.A()))});sko.T[b]=f}c(b)})}};
sko.rel=function(a,d,c,b){var f=""+sko.S,h=o;sko.S++;if(typeof a==="string"){var i=sko.n(a),h=i;sko.c[f]=p.m({Ya:function(){sko.log("*** OBSERVABLE READING RELATED  DEPENDING NODE ABOT ID:"+f);var a=sko.O(jQuery(d).parent().v()[0]);sko.log(a);if(a!=o)if(sko.log(" ** about:"+a.c()),sko.log("*** Found parent resource: "+a.c()),a[i]){var b=a[i]();if(b!=o&&!sko.Ua(a[i]()))return b=sko.n(b),sko.i[f]==o||sko.i[f].c()!=b?(sko.log("*** found related resource: "+b),sko.l.N(sko.j(b),function(a,c){sko.log("CREATED NODE FOR ID "+
f+" AND URI: "+sko.j(b));sko.log(c);sko.log(" ------------\> "+f+" : "+b+" 8b");sko.i[f]=new sko.H(f,b,c)})):sko.log("*** Related resource hasn't changed"),b;else{if(b==o){sko.log("*** related resource is null");sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL");var c=sko.A();sko.log(" ** setting parent node related resource to "+c);a[i](c)}else sko.i[f]?(sko.log("*** setting new value for related resource "+c),sko.log(" ------------\> "+f+" : "+c+" 9"),sko.i[f].c(c)):sko.log("!! Should I create the new blank node?");
return c}}else sko.log("!!! parent resource doest not link to the related resource");else sko.log("!!! impossible to find parent resource")},write:function(a){a==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.A());a=sko.n(a);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+a);var b=sko.O(jQuery(d).parent().v()[0]);b!=o?(sko.log("*** Found parent resource: "+b.c()),b[h]?(sko.log("*** Setting new related resource in parent resource found: "+a),b[h](a)):sko.log("!!! parent resource doest not link to the related resource")):
sko.log("!!! impossible to find parent resource")},Wa:c});c=sko.c[f].G(function(a){sko.log("*** OBSERVING RELATED NODE ABOT ID:"+f+" new value -> "+a);a==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.A());a=sko.n(a);sko.c[f]()!=o?sko.j(a)!==sko.j(sko.c[f]())&&sko.l.N(sko.j(a),function(b,c){b?(c.v(),sko.log(" ------------\> "+f+" : "+i+" 10"),sko.i[f].c(i)):sko.log("Error updating 1 resource for URI:"+a+" in SKO about related node observer")}):sko.log("!! this resource is now null, should be removed from list of resources?")})}else sko.c[f]=
p.m({Ya:function(){var b=a(),b=sko.n(b);sko.log("*** OBSERVABLE READING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+b);b==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),b=sko.A());var c=sko.O(jQuery(d).parent().v()[0]);if(c!=o)if(sko.log("*** Found parent resource: "+c.c()),c[b]){var h=c[b]();sko.log("*** found related resource: "+h);sko.l.N(sko.j(h),function(a,b){sko.log(" ------------\> "+f+" : "+h+" 11");sko.i[f]=new sko.H(f,h,b)});return h}else sko.log("!!! parent resource doest not link to the related resource");
else sko.log("!!! impossible to find parent resource")},write:function(b){var b=sko.n(b),c=sko.O(jQuery(d).parent().v()[0]);sko.log("*** OBSERVABLE WRITING RELATED DEPENDING NODE ABOT ID:"+f+" URI -> "+b);b==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),b=sko.A());c!=o?(sko.log("*** Found parent resource: "+c.c()),c[a()]?(sko.log("*** Setting new related resource in parent resource found: "+b),c[a()](b),a(b)):sko.log("!!! parent resource doest not link to the related resource")):sko.log("!!! impossible to find parent resource")},
Wa:c}),c=sko.c[f].G(function(a){a=sko.n(a);sko.log("*** OBSERVING RELATED NODE (F) ABOT ID:"+f+" new value -> "+a);a==o&&(sko.log(" ** NEXT URI IS NULL, GEN BLANK LABEL"),a=sko.A());sko.j(a)!=sko.j(sko.c[f]())?sko.l.N(sko.j(a),function(b,c){if(b){var d=c.v()[0].ga.valueOf();sko.log(" ------------\> "+f+" : "+d+" 12");sko.i[f].c(d)}else sko.log("Error updating  2 resource for URI:"+a+" in SKO about related node observer")}):sko.log("*** Related about resource hasn't changed")});sko.T[f]=c;b(f)};
sko.j=function(a){if(a[0]==="<"&&a[a.length-1]==">")return a.slice(1,a.length-1);else if(a.match(/\[[^,;"\]\}\{\[\.:]+:[^,;"\}\]\{\[\.:]+\]/)!=o)if(a=a.slice(1,a.length-1),resolved=sko.Y.Rb.Wb(a),resolved==o)e("The CURIE "+a+" cannot be resolved");else return resolved;else return a};
sko.Oa=function(a){if(a==o)return o;else if(a.ca&&a.ca==="Literal")if(a.u=="http://www.w3.org/2001/XMLSchema#integer"||a.u=="http://www.w3.org/2001/XMLSchema#decimal"||a.u=="http://www.w3.org/2001/XMLSchema#double"||a.u=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.u=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.u=="http://www.w3.org/2001/XMLSchema#long"||a.u=="http://www.w3.org/2001/XMLSchema#int"||a.u=="http://www.w3.org/2001/XMLSchema#short"||a.u=="http://www.w3.org/2001/XMLSchema#byte"||
a.u=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.u=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.u=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.u=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.u=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.u=="http://www.w3.org/2001/XMLSchema#positiveInteger")return parseFloat(a.valueOf());else if(a.type==="http://www.w3.org/2001/XMLSchema#boolean")return a.valueOf()==="true"||a.valueOf()===!0||a.valueOf()==="True";else if(a.type===
"http://www.w3.org/2001/XMLSchema#string")return a.valueOf();else if(a.type==="http://www.w3.org/2001/XMLSchema#dateTime")return new Date(a.valueOf());else{if(a.type==o)return a.valueOf()}else return a.valueOf()};sko.P=p.p(o);
sko.H=function(a,d,c){this.Da=a;this.h={};this.ha=[];this.F={};this.I={};var b=this;this.P=p.m(function(){return sko.P()});d=sko.n(d);c.forEach(function(a){sko.log(a);a.f.e()==="<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"&&(sko.log(" found resource class "+a.object.e()),b.I[a.object.e()]=!0);if(a.object.ca==="NamedNode")b.h[a.f.e()]=a.object.e(),b[a.f.e()]=p.p(a.object.e());else if(a.object.ca==="Literal")if(b.P()!=o){if(b.h[a.f.e()]==o||a.object.language==b.P()){var c=sko.Oa(a.object.valueOf());
b.h[a.f.e()]=c;b[a.f.e()]=p.p(c);b[sko.j(a.f.e())]=b[a.f.e()];b.F[a.f.e()]=a.object.language}}else{if(b.h[a.f.e()]==o||a.object.language==o)c=sko.Oa(a.object.valueOf()),b.h[a.f.e()]=c,b[a.f.e()]=p.p(c),b[sko.j(a.f.e())]=b[a.f.e()],b.F[a.f.e()]=a.object.language}else b.h[a.f.e()]=a.object.valueOf(),b[a.f.e()]=p.p(a.object.valueOf()),b[sko.j(a.f.e())]=b[a.f.e()]});this.c=p.p(d);this["@"]=this.c;this.fa=sko.H.bc(this);sko.k.Ma(this,!0);b=this;this.ha.push(this.c.G(function(a){sko.log("SKO Resource new resource:"+
a);sko.log("*** STOP OBSERVING NODE STORE");sko.l.ac(b.fa);if(a!=o&&a.indexOf("_:sko")!=0)sko.log("*** START OBSERVING NODE STORE FOR "+b.c()),sko.l.$b(sko.j(a),b.fa);else{sko.log("*** nullifying resources");for(var c in b.h)b.h[c]=o;for(c in b.h)b[c](o)}}));sko.H.Kb(this);sko.l.$b(sko.j(this.c()),b.fa)};sko.n=function(a){a[0]==="["&&a[a.length-1]==="]"&&(a=a.slice(1,a.length-1),resolved=sko.Y.Rb.Wb(a),a==o?e("The CURIE "+a+" cannot be resolved"):a="<"+resolved+">");return a};
sko.Ua=function(a){return a.indexOf("_:sko")===0};
sko.L=function(a){sko.log("*** CLEANING!");sko.log(a);var d=jQuery(a).t("aboutId"),c=[];d!=o&&c.push(d);c=c.concat(sko.ub(a));for(a=0;a<c.length;a++)if(sko.i[c[a]]!=o){sko.log("*** DISCONNECTING "+c[a]);sko.log(sko.i[c[a]]);d=sko.i[c[a]];sko.log(" ** DISCONNECTING");sko.l.ac(d.fa);sko.log(" ** disconnected STORE");for(var b=0;b<d.ha.length;b++)sko.log(" ** disconnecting subscription"),d.ha[b].z();sko.log(" ** disconnecting resource map");sko.T[d.Da].z();sko.log(" ** deleting");delete sko.i[d.Da];
delete sko.c[d.Da]}};
sko.H.Kb=function(a){function d(a,c){sko.log("*** subcribing to property "+c);var d=a[c].G(function(d){sko.log("*** received KO notification for property "+c+" -> "+d);if(a.h[c]!=o&&a.h[c]!==d&&!sko.Ua(d)){var g='"'+a.h[c]+'"',d='"'+d+'"';a.F[c]!=o&&(g=g+"@"+a.F[c],d=d+"@"+a.F[c]);var h="DELETE { "+a.c()+" "+c+" "+g+" }",h=h+" INSERT { "+a.c()+" "+c+" "+d+" }",h=h+" WHERE { "+a.c()+" "+c+" "+g+" }",h=h.replace(/"</g,"<").replace(/>"/g,">");a.h[c]=d;sko.log("*** updating STORE: \n  "+h);sko.l.execute(h)}});
a.ha.push(d)}for(var c in a.h)d(a,c)};
sko.H.bc=function(a){return function(d){sko.log("*** received notification change from STORE in resource "+a.c());if(a.c().indexOf("_:sko")!==0){var c={},b={};sko.log("*** triples in STORE resource -> "+d.v().length);d.forEach(function(d){if(d.object.ca==="NamedNode")sko.log(" "+d.f.e()+" -> "+d.object.e()),c[d.f.e()]=d.object.e();else if(a.P()!=o){if(c[d.f.e()]==o||d.object.language==a.P())sko.log(" "+d.f.e()+" -> "+d.object.valueOf()),c[d.f.e()]=d.object.valueOf(),b[d.f.e()]=d.object.language}else if(c[d.f.e()]==
o||d.object.language==o)sko.log(" "+d.f.e()+" -> "+d.object.valueOf()),c[d.f.e()]=d.object.valueOf(),b[d.f.e()]=d.object.language});var f={},d=[],h=[],i=[],g;for(g in a.h)if(c[g]!=o){if(f[g]=c[g],a.h[g]!==c[g]&&(h.push(g),b[g]!=o||a.F[g]!=o))a.F[g]=b[g]}else d.push(g),delete a.F[g];for(g in c)a.h[g]==o&&(i.push(g),f[g]=c[g],a.F[g]=b[g]);a.h=f;for(g=0;g<d.length;g++)sko.log("*** setting value to null "+d[g]+" -> NULL"),a[d[g]](o);for(g=0;g<h.length;g++)sko.log("*** updating value "+h[g]+" -> "+a.h[h[g]]),
a[h[g]](a.h[h[g]]);for(g=0;g<i.length;g++)sko.log("*** new value "+i[g]+" -> "+a.h[i[g]]),a[i[g]]=p.p(a.h[i[g]]),a[sko.j(i[g])]=a[i[g]];sko.k.Ma(a);sko.log("*** END MODIFICATION")}}};
sko.ib=function(a,d,c){function b(a,c){node=f[c.Ka];var g=jQuery(node).t("about");g==o&&(dataBind=jQuery(node).t("data-bind"),dataBind!=o&&dataBind.indexOf("about:")!=-1&&(g=/s*([^ ]+)s*,?/.exec(dataBind.split("about:")[1])[0],g[g.length-1]===","&&(g=g.slice(0,g.length-1))));g!=o&&g!=""?(typeof g==="string"&&g[0]!=="<"&&g[g.length-1]!==">"&&g[0]!=="["&&g[g.length-1]!=="]"&&(g=d[g]),sko.c(g,d,function(d){jQuery(node).t("aboutId",d);a(b,c)})):a(b,c)}sko.log("** TRACING:");sko.log(a);var f=[];(jQuery(a).t("about")||
jQuery(a).t("data-bind"))&&f.push(a);a=jQuery(a).find("*[about], *[data-bind]").v();f=f.concat(a);Utils.repeat(0,f.length,b,function(){c()})};sko.O=function(a){sko.log("in current resource");sko.log(a);if(a==o)return sko.log("!!! top of DOM tree, About node not found"),o;var d=jQuery(a).t("aboutId");sko.log("about id:"+d);if(d)if(a=sko.c[d](),sko.log("uri:"+a),a!=o)return sko.i[d];else sko.log("!!! current resource is null: "+d);else return sko.log("recurring"),sko.O(jQuery(a).parent().v()[0])};
sko.Na=function(a){sko.log("in current resource node");sko.log(a);if(a==o)return sko.log("!!! top of DOM tree, About node not found"),o;var d=jQuery(a).t("aboutId");sko.log("about id:"+d);if(d){var c=sko.c[d]();sko.log("uri:"+c);return c!=o?a:(sko.log("!!! current resource is null: "+d),o)}else return sko.log("recurring"),sko.Na(jQuery(a).parent().v()[0])};sko.ub=function(a){return jQuery(a).find("*[aboutId]").map(function(){return jQuery(this).t("aboutId")})};
sko.hb=function(a,d,c){function b(a,c){node=f[c.Ka];var g=jQuery(node).t("rel");g==o&&(dataBind=jQuery(node).t("data-bind"),dataBind!=o&&dataBind.indexOf("rel:")!=-1&&(g=/s*([^ ]+)s*,?/.exec(dataBind.split("rel:")[1])[0],g[g.length-1]===","&&(g=g.slice(0,g.length-1))));g!=o&&g!=""?(typeof g==="string"&&g[0]!=="<"&&g[g.length-1]!==">"&&g[0]!=="["&&g[g.length-1]!=="]"&&(g=d[g]),jQuery(node).t("aboutId")==o?(sko.log("*** CREATING RELATED NODE"),sko.rel(g,node,d,function(d){jQuery(node).t("aboutId",d);
a(b,c)})):(sko.log("*** NODE IS ALREADY TRACED"),a(b,c))):a(b,c)}sko.log("*** TRACING RELATIONS:");a=sko.Na(a)||a;sko.log("*** FOUND ROOT NODE TO LOOK FOR RELATIONS:");sko.log(a);var f=[];(jQuery(a).t("rel")||jQuery(a).t("data-bind"))&&f.push(a);a=jQuery(a).find("*[rel], *[data-bind]").v();f=f.concat(a);sko.log(" ** NODES TO LOOK FOR RELATED RESOURCES");sko.log(f);Utils.repeat(0,f.length,b,function(){c()})};sko.ua=0;sko.ba={};
sko.kc=function(a){var a="select ?subject where "+a,d=""+sko.ua;sko.ua++;sko.ba[d]=p.p([]);sko.log("*** WHERE QUERY: "+a);sko.l.ic(a,function(a){var b=[];sko.log(" ** RESULTS!!!");for(var f=0;f<a.length;f++)sko.log(" ** ADDING VALUE "+a[f].ga.value),b.push("<"+a[f].ga.value+">");sko.log("** SETTING VALUE");sko.log(b);sko.ba[d](b)});return sko.ba[d]};sko.la=function(a,d,c){typeof a==="string"&&(a=jQuery(a)[0]);sko.ib(a,d,function(){sko.hb(a,d,function(){p.la(d,a);c!=o&&c()})})};sko.hc=function(a){return sko.O(jQuery(a).v()[0])};
sko.fc={};
})(window);
